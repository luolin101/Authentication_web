{"remainingRequest":"C:\\Users\\86191\\Desktop\\text\\Authentication_web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\86191\\Desktop\\text\\Authentication_web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\86191\\Desktop\\text\\Authentication_web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\86191\\Desktop\\text\\Authentication_web\\src\\components\\index\\Index.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\86191\\Desktop\\text\\Authentication_web\\src\\components\\index\\Index.vue","mtime":1655627644000},{"path":"C:\\Users\\86191\\Desktop\\text\\Authentication_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\86191\\Desktop\\text\\Authentication_web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\86191\\Desktop\\text\\Authentication_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\86191\\Desktop\\text\\Authentication_web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzLzg2MTkxL0Rlc2t0b3AvdGV4dC9BdXRoZW50aWNhdGlvbl93ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIgZnJvbSAiQzovVXNlcnMvODYxOTEvRGVza3RvcC90ZXh0L0F1dGhlbnRpY2F0aW9uX3dlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zZWFyY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0IHsgYmF0Y2hDb3B5RmlsZSwgYmF0Y2hEZWxldGVGaWxlLCBiYXRjaE1vdmVGaWxlLCBjb3B5RmlsZSBhcyBfY29weUZpbGUsIGNyZWF0ZUZvbGRlciwgY3JlYXRlT2ZmbGluZSwgZGVsZXRlRmlsZSBhcyBfZGVsZXRlRmlsZSwgZ2V0RG93bmxvYWRQcm9ncmVzcywgZ2V0RmlsZUxpc3RCeVR5cGUgYXMgX2dldEZpbGVMaXN0QnlUeXBlLCBtb3ZlRmlsZSBhcyBfbW92ZUZpbGUsIHJlbmFtZUZpbGUgYXMgX3JlbmFtZUZpbGUsIHNlYXJjaEZpbGUsIHNoYXJlRmlsZSBhcyBfc2hhcmVGaWxlLCB1bnppcEZpbGUsIGdldFByb2dyZXNzLCBmb3JtYXRjb252ZXJzaW9uIH0gZnJvbSAnQC9yZXF1ZXN0L2ZpbGUnOwppbXBvcnQgdmlld2VyQXBpIGZyb20gJ0AvY29tcG9uZW50cy9wbGF5L2ltYWdlUHJldmlldy9hcGknOwppbXBvcnQgRmlsZUluZm8gZnJvbSAnQC9jb21wb25lbnRzL2luZGV4L2ZpbGVJbmZvL0ZpbGVJbmZvJzsKaW1wb3J0IENvbnRleHRNZW51IGZyb20gJ0AvY29tcG9uZW50cy9jb21tb24vY29udGV4dE1lbnUvQ29udGV4dE1lbnUudnVlJzsKaW1wb3J0IE1lc3NhZ2UgZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9tZXNzYWdlL01lc3NhZ2UnOwppbXBvcnQgTG9hZGluZyBmcm9tICdAL2NvbXBvbmVudHMvY29tbW9uL2xvYWRpbmcvTG9hZGluZyc7CmltcG9ydCBCdXMgZnJvbSAnQC9saWJzL2J1cyc7CmltcG9ydCB7IGdldFVzZXJJbmZvIGFzIF9nZXRVc2VySW5mbyB9IGZyb20gJ0AvcmVxdWVzdC91c2VyJzsKaW1wb3J0IHsgYmxhbmtNZW51TGlzdCwgY29udmVyc2lvbkV4dExpc3QsIGRlZmF1bHRNZW51TGlzdCwgbXVsdGlNZW51TGlzdCB9IGZyb20gJ0AvbGlicy9tYXAnOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CnZhciB3ZWJzb2NrZXQ7CnZhciB1bnppcFRpbWVyOwp2YXIgZm9ybWF0VGltZXI7CnZhciBvZmZsaW5lVGltZXI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnSW5kZXgnLAogIHByb3BzOiB7fSwKICBjb21wb25lbnRzOiB7CiAgICBGaWxlSW5mbzogRmlsZUluZm8sCiAgICBDb250ZXh0TWVudTogQ29udGV4dE1lbnUsCiAgICBNZXNzYWdlOiBNZXNzYWdlLAogICAgTG9hZGluZzogTG9hZGluZwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRlZmF1bHRNZW51TGlzdDogZGVmYXVsdE1lbnVMaXN0LAogICAgICBtdWx0aU1lbnVMaXN0OiBtdWx0aU1lbnVMaXN0LAogICAgICBibGFua01lbnVMaXN0OiBibGFua01lbnVMaXN0LAogICAgICBjb252ZXJzaW9uRXh0TGlzdDogY29udmVyc2lvbkV4dExpc3QsCiAgICAgIHdlYnNvY2tldDogV2ViU29ja2V0LAogICAgICBsb2FkaW5nVGV4dDogJ+WKoOi9veS4rS4uLicsCiAgICAgIC8vIOaWh+S7tuaAu+aVsAogICAgICB0b3RhbDogMCwKICAgICAgLy8g5paH5Lu25a6h5qC45Lit5pWwCiAgICAgIGF1ZGl0Q291bnQ6IDAsCiAgICAgIC8vIOaAu+mhteaVsAogICAgICBwYWdlQ291bnQ6IDAsCiAgICAgIC8vIOWIhumhteWkp+WwjwogICAgICBwYWdlU2l6ZTogNTAsCiAgICAgIGU6IE9iamVjdCwKICAgICAgLy8g5pi+56S65Yqg6L295Yqo55S7CiAgICAgIHNob3dMb2FkaW5nOiBmYWxzZSwKICAgICAgLy8g5pi+56S65Yib5bu65paH5Lu25aS5CiAgICAgIHNob3dDcmVhdGVGb2xkZXI6IGZhbHNlLAogICAgICBmaWxlTmFtZTogJycsCiAgICAgIGNyZWF0ZUZvbGRlck5hbWU6ICcnLAogICAgICAvLyDmiZPlvIDmlofku7bntKLlvJUKICAgICAgb3BlbkZpbGVJbmRleDogLTEsCiAgICAgIC8vIOaYvuekuuaPkOekuuahhgogICAgICBzaG93TWVzc2FnZTogZmFsc2UsCiAgICAgIC8vIOiOt+WPluaWh+S7tueahOWFqOi3r+W+hAogICAgICBmdWxsUGF0aDogJycsCiAgICAgIHNlbGVjdEZ1bGxQYXRoOiAnJywKICAgICAgc2hvd01lbnU6IGZhbHNlLAogICAgICBzaG93TWFya2Rvd246IGZhbHNlLAogICAgICBpbWFnZUxpc3Q6IFtdLAogICAgICAvLyDlj7PplK7oj5zljZXlvLnnqpflt6bovrnot53nprsKICAgICAgbWVudUxlZnQ6IDAsCiAgICAgIHNlYXJjaEtleVdvcmRzOiAnJywKICAgICAgLy8g5Y+z6ZSu6I+c5Y2V5by556qX5LiK6L656Led56a7CiAgICAgIG1lbnVUb3A6IDAsCiAgICAgIG1lbnVUeXBlOiAxLAogICAgICBwYXRoOiAnLycsCiAgICAgIGN1cnJlbnRGaWxlOiB7CiAgICAgICAgaWQ6IC0xCiAgICAgIH0sCiAgICAgIC8vIOmAieS4reaWh+S7tuaVsOmHjwogICAgICBzZWxlY3RlZEZpbGVDb3VudDogMCwKICAgICAgLy8g5b2T5YmN54K55Ye75paH5Lu257Si5byVCiAgICAgIHNlbGVjdEZpbGVJbmRleDogLTEsCiAgICAgIC8vIOmAieS4reaWh+S7tuiusOW9lSDplb/luqbkuLrmlofku7bmlbDph48sdHJ1ZemAieS4rSxmYWxzZeacqumAieS4rQogICAgICBzZWxlY3RlZEZpbGU6IFtdLAogICAgICAvLyDmmK/lkKbpgInkuK3miYDmnInmlofku7YKICAgICAgc2VsZWN0QWxsRmlsZXM6IGZhbHNlLAogICAgICAvLyDpgInkuK3mlofku7blr7nosaHmlbDnu4QKICAgICAgc2VsZWN0RmlsZUFycmF5OiBbXSwKICAgICAgLy8g5paH5Lu25YiX6KGoCiAgICAgIGZpbGVMaXN0OiBbXSwKICAgICAgLy8g5o6S5bqP5paH5Lu25YiX6KGoCiAgICAgIHNvcnRGaWxlTGlzdDogW10sCiAgICAgIC8vIOmAieS4reaWh+S7tuWIl+ihqCDljIXlkKtmaWxl5omA5pyJ5L+h5oGvCiAgICAgIHNlbGVjdEZpbGVMaXN0OiBbXSwKICAgICAgLy8g6YCJ5Lit5paH5Lu2aWTliJfooagKICAgICAgc2VsZWN0RmlsZUlkTGlzdDogW10sCiAgICAgIC8vIOaWh+S7tuaYvuekuuaWueW8jyDpu5jorqRibG9jayzlj6/pgInlgLxsaXN0CiAgICAgIGRpc3BsYXlNb2RlOiAnYmxvY2snLAogICAgICBmaWxlVG9vbEJhckxpc3Q6IFsvLyB7CiAgICAgIC8vICAgaWQ6IDIsCiAgICAgIC8vICAgbmFtZTogJ+S4i+i9vScsCiAgICAgIC8vICAgaWNvbkNsYXNzTmFtZTogJ2ljb24teGlhemFpJywKICAgICAgLy8gICBtZXRob2ROYW1lOiAnZG93bmxvYWQnCiAgICAgIC8vIH0sCiAgICAgIHsKICAgICAgICBpZDogMywKICAgICAgICBuYW1lOiAn5YiG5LqrJywKICAgICAgICBpY29uQ2xhc3NOYW1lOiAnaWNvbi1mZW54aWFuZzEnLAogICAgICAgIG1ldGhvZE5hbWU6ICdzaGFyZUZpbGUnCiAgICAgIH0sIHsKICAgICAgICBpZDogNCwKICAgICAgICBuYW1lOiAn5aSN5Yi2JywKICAgICAgICBpY29uQ2xhc3NOYW1lOiAnaWNvbi1mdXpoaScsCiAgICAgICAgbWV0aG9kTmFtZTogJ2NvcHlGaWxlJwogICAgICB9LCB7CiAgICAgICAgaWQ6IDUsCiAgICAgICAgbmFtZTogJ+enu+WKqCcsCiAgICAgICAgaWNvbkNsYXNzTmFtZTogJ2ljb24teWlkb25nJywKICAgICAgICBtZXRob2ROYW1lOiAnbW92ZUZpbGUnCiAgICAgIH0sIC8vIHsKICAgICAgLy8gICBpZDogNiwKICAgICAgLy8gICBuYW1lOiAn6YeN5ZG95ZCNJywKICAgICAgLy8gICBpY29uQ2xhc3NOYW1lOiAnaWNvbi16aG9uZ21pbmdtaW5nJywKICAgICAgLy8gICBtZXRob2ROYW1lOiAncmVuYW1lRmlsZScKICAgICAgLy8gfSwKICAgICAgewogICAgICAgIGlkOiA3LAogICAgICAgIG5hbWU6ICfliKDpmaQnLAogICAgICAgIGljb25DbGFzc05hbWU6ICdpY29uLXNoYW5jaHUnLAogICAgICAgIG1ldGhvZE5hbWU6ICdkZWxldGVGaWxlJwogICAgICB9XSwKICAgICAgc2luZ2xlTWVudUxpc3Q6IFt7CiAgICAgICAgaWQ6IDEsCiAgICAgICAgbmFtZTogJ+aJk+W8gCcsCiAgICAgICAgaWNvbkNsYXNzTmFtZTogJ2ljb24tb3BlbmwnLAogICAgICAgIG1ldGhvZE5hbWU6ICdtZW51T3BlbicsCiAgICAgICAgY291bnQ6IDEKICAgICAgfSwgLy8gewogICAgICAvLyAgIGlkOiAyLAogICAgICAvLyAgIG5hbWU6ICfkuIvovb0nLAogICAgICAvLyAgIGljb25DbGFzc05hbWU6ICdpY29uLXhpYXphaScsCiAgICAgIC8vICAgbWV0aG9kTmFtZTogJ21lbnVEb3dubG9hZCcKICAgICAgLy8gfSwKICAgICAgewogICAgICAgIGlkOiAzLAogICAgICAgIG5hbWU6ICfliIbkuqsnLAogICAgICAgIGljb25DbGFzc05hbWU6ICdpY29uLWZlbnhpYW5nMScsCiAgICAgICAgbWV0aG9kTmFtZTogJ3NoYXJlRmlsZScKICAgICAgfSwgewogICAgICAgIGlkOiA0LAogICAgICAgIG5hbWU6ICflpI3liLYnLAogICAgICAgIGljb25DbGFzc05hbWU6ICdpY29uLWZ1emhpJywKICAgICAgICBtZXRob2ROYW1lOiAnY29weUZpbGUnCiAgICAgIH0sIHsKICAgICAgICBpZDogNSwKICAgICAgICBuYW1lOiAn56e75YqoJywKICAgICAgICBpY29uQ2xhc3NOYW1lOiAnaWNvbi15aWRvbmcnLAogICAgICAgIG1ldGhvZE5hbWU6ICdtb3ZlRmlsZScKICAgICAgfSwgewogICAgICAgIGlkOiA2LAogICAgICAgIG5hbWU6ICfph43lkb3lkI0nLAogICAgICAgIGljb25DbGFzc05hbWU6ICdpY29uLXpob25nbWluZ21pbmcnLAogICAgICAgIG1ldGhvZE5hbWU6ICdyZW5hbWVGaWxlJwogICAgICB9LCB7CiAgICAgICAgaWQ6IDcsCiAgICAgICAgbmFtZTogJ+WIoOmZpCcsCiAgICAgICAgaWNvbkNsYXNzTmFtZTogJ2ljb24tc2hhbmNodScsCiAgICAgICAgbWV0aG9kTmFtZTogJ2RlbGV0ZUZpbGUnCiAgICAgIH1dLAogICAgICBvcmRlckNvbHVtbjogJycsCiAgICAgIG9yZGVyOiAnJywKICAgICAgcmVtb3RlVGFzazogMCwKICAgICAgcHJvZ3Jlc3M6IDAsCiAgICAgIC8vIOemu+e6v+S4i+i9veaWh+S7tgogICAgICBvZmZsaW5lRmlsZToge30sCiAgICAgIHVuemlwVGltZXI6IG51bGwKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgY3JlYXRlRm9sZGVyTmFtZTogZnVuY3Rpb24gY3JlYXRlRm9sZGVyTmFtZSh2YWwpIHsKICAgICAgdmFyIGZsYWcgPSBuZXcgUmVnRXhwKCdbYH4hQCMkXiYqKCk9fHt9XCc6O1wnLFxcW1xcXS48PuOAiuOAiy8/fu+8gUAj77+l4oCm4oCmJirvvIjvvInigJTigJR8e33jgJDjgJHigJjvvJvvvJrigJ3igJxcJ+OAgu+8jOOAge+8nyBdJyk7IC8vIC8vIOWIpOaWrSBldmVuIOaYr+WQpuWMheWQq+eJueauiuWtl+espgoKICAgICAgaWYgKGZsYWcudGVzdCh2YWwpKSB7CiAgICAgICAgdGhpcy4kdG9hc3QuZXJyb3IoJ+aWh+S7tuWkueWQjeensOS4jeiDveWMheWQq+eJueauiuWtl+espicpOwogICAgICB9CiAgICB9LAogICAgLy8g55uR5ZCs6YCJ5oup5paH5Lu25pWw6YePCiAgICBzZWxlY3RlZEZpbGVDb3VudDogZnVuY3Rpb24gc2VsZWN0ZWRGaWxlQ291bnQoKSB7CiAgICAgIGlmICh0aGlzLnNlbGVjdGVkRmlsZUNvdW50ID09PSAwKSB7CiAgICAgICAgdGhpcy5zZWxlY3RBbGxGaWxlcyA9IGZhbHNlOwogICAgICAgIHRoaXMuc2VsZWN0RmlsZUluZGV4ID0gLTE7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkRmlsZUNvdW50ID09PSAxKSB7CiAgICAgICAgdGhpcy5tZW51VHlwZSA9IDE7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RlZEZpbGVDb3VudCA+IDEpIHsKICAgICAgICB0aGlzLm1lbnVUeXBlID0gMjsKICAgICAgfQoKICAgICAgdGhpcy5zZWxlY3RGaWxlTGlzdC5sZW5ndGggPSAwOwogICAgICB0aGlzLnNlbGVjdEZpbGVJZExpc3QubGVuZ3RoID0gMDsKICAgICAgdmFyIGkgPSAwOwoKICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMuc2VsZWN0ZWRGaWxlKSwKICAgICAgICAgIF9zdGVwOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGFyZ3VtZW50c0tleSA9IF9zdGVwLnZhbHVlOwoKICAgICAgICAgIGlmIChhcmd1bWVudHNLZXkgPT09IHRydWUpIHsKICAgICAgICAgICAgdGhpcy5zZWxlY3RGaWxlTGlzdC5wdXNoKHRoaXMuZmlsZUxpc3RbaV0pOwogICAgICAgICAgICB0aGlzLnNlbGVjdEZpbGVJZExpc3QucHVzaCh0aGlzLmZpbGVMaXN0W2ldLmlkKTsKICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCd1cGRhdGVTZWxlY3RGaWxlSWRMaXN0JywgdGhpcy5zZWxlY3RGaWxlSWRMaXN0KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpKys7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgIH0KICAgIH0sCiAgICBzaG93TWVzc2FnZTogZnVuY3Rpb24gc2hvd01lc3NhZ2UoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuc2hvd01lc3NhZ2UgPT09IHRydWUpIHsKICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczIuc2hvd01lc3NhZ2UgPSBmYWxzZTsKICAgICAgICB9LCAzMDAwKTsKICAgICAgfQogICAgfSwKICAgIC8vIOebkeWQrOi3r+eUseeahGZpbGVQYXRo5bGe5oCn55qE5pWw5o2u5Y+Y5YyWCiAgICAnJHJvdXRlLnF1ZXJ5LmZpbGVQYXRoJzogZnVuY3Rpb24gJHJvdXRlUXVlcnlGaWxlUGF0aChwYXRoKSB7CiAgICAgIC8vIOWKoOi9veaWsOaWh+S7tuWIl+ihqOaXtumHjee9ruaVsOaNruS4uuepuizlvIDlp4vlkaIg5Yqg6L295Yqo55S7CiAgICAgIHRoaXMuZmlsZUxpc3QubGVuZ3RoID0gMDsKICAgICAgdGhpcy5zb3J0RmlsZUxpc3QubGVuZ3RoID0gMDsKICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWU7IC8vIHZhciBwYXRoID0gdGhpcy4kcm91dGUucXVlcnkuZmlsZVBhdGgKCiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgndXBkYXRlRnVsbFBhdGgnLCBwYXRoKTsgLy8gaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5LnNlYXJoICE9PSB1bmRlZmluZWQpIHsKICAgICAgLy8gICB0aGlzLnNlYXJjaCgpCiAgICAgIC8vICAgcmV0dXJuCiAgICAgIC8vIH0KCiAgICAgIGlmIChwYXRoID09PSB1bmRlZmluZWQpIHsKICAgICAgICB0aGlzLmZ1bGxQYXRoID0gJyc7CiAgICAgICAgdGhpcy5jdXJyZW50UGF0aCA9ICcnOwogICAgICAgIHRoaXMuZ2V0RmlsZUxpc3QocGF0aCk7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCd1cGRhdGVGdWxsUGF0aCcsICcvJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5nZXRGaWxlTGlzdChwYXRoKTsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3VwZGF0ZUZ1bGxQYXRoJywgcGF0aCk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDnm5HlkKzmlofku7bliIbnsbvlj5jljJYKICAgICckcm91dGUucXVlcnkuY2F0ZWdvcnknOiBmdW5jdGlvbiAkcm91dGVRdWVyeUNhdGVnb3J5KCkgewogICAgICAvLyDliqDovb3mlrDmlofku7bliJfooajml7bph43nva7mlbDmja7kuLrnqbos5byA5aeL5ZGiIOWKoOi9veWKqOeUuwogICAgICB0aGlzLmZpbGVMaXN0Lmxlbmd0aCA9IDA7CiAgICAgIHRoaXMuc29ydEZpbGVMaXN0Lmxlbmd0aCA9IDA7CiAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlOwogICAgICB0aGlzLnRvdGFsID0gMDsKICAgICAgdGhpcy5wYWdlQ291bnQgPSAwOwogICAgICB0aGlzLnNlbGVjdGVkRmlsZUNvdW50ID0gMDsgLy8g5Y+q6KaBY2F0ZWdvcnlJZOeahOWAvOWPkeeUn+WPmOWMlizov5nkuKrmlrnms5XlsLHkvJrooqvosIPnlKgKCiAgICAgIGNvbnNvbGUubG9nKCd0aGlzLiRyb3V0ZS5xdWVyeS5jYXRlZ29yeSAhPT0gdW5kZWZpbmVkPT09PT09PT0nLCB0aGlzLiRyb3V0ZS5xdWVyeS5jYXRlZ29yeSAhPT0gdW5kZWZpbmVkKTsKCiAgICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS5jYXRlZ29yeSAhPSB1bmRlZmluZWQpIHsKICAgICAgICBpZiAodGhpcy4kcm91dGUucXVlcnkuY2F0ZWdvcnkgPT0gJ2FsbCcpIHsKICAgICAgICAgIHRoaXMuZnVsbFBhdGggPSAnJzsKICAgICAgICAgIHRoaXMuY3VycmVudFBhdGggPSAnJzsKICAgICAgICAgIHRoaXMuY3VycmVudEZpbGUuaWQgPSAtMTsKICAgICAgICAgIHRoaXMuZ2V0RmlsZUxpc3QodGhpcy5mdWxsUGF0aCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICBmaWxlVHlwZTogdGhpcy4kcm91dGUucXVlcnkuY2F0ZWdvcnksCiAgICAgICAgICAgIGN1cnJlbnRQYWdlOiB0aGlzLiRzdG9yZS5zdGF0ZS5jdXJyZW50UGFnZSwKICAgICAgICAgICAgcGFnZUNvdW50OiB0aGlzLiRzdG9yZS5zdGF0ZS5wYWdlQ291bnQKICAgICAgICAgIH07CiAgICAgICAgICBjb25zb2xlLmxvZygnJHJvdXRlLnF1ZXJ5LmNhdGVnb3J56I635Y+W5YiG57G75paH5Lu25YiX6KGoJyk7CiAgICAgICAgICB0aGlzLmdldEZpbGVMaXN0QnlUeXBlKGRhdGEpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHNlYXJjaEtleVdvcmRzOiBmdW5jdGlvbiBzZWFyY2hLZXlXb3Jkcyh2YWwpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBpZiAodmFsID09PSAnJykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAga2V5d29yZHM6IHZhbAogICAgICB9OwogICAgICBzZWFyY2hGaWxlKGRhdGEsIHRydWUpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuY29kZSA9PT0gMCkgewogICAgICAgICAgX3RoaXMzLmZpbGVMaXN0Lmxlbmd0aCA9IDA7CiAgICAgICAgICBfdGhpczMuc29ydEZpbGVMaXN0Lmxlbmd0aCA9IDA7CiAgICAgICAgICBfdGhpczMuZmlsZUxpc3QgPSByZXMuZGF0YTsKICAgICAgICAgIF90aGlzMy5zb3J0RmlsZUxpc3QgPSByZXMuZGF0YTsKCiAgICAgICAgICBfdGhpczMuJHN0b3JlLmNvbW1pdCgndXBkYXRlRmlsZUxpc3QnLCBfdGhpczMuZmlsZUxpc3QpOwoKICAgICAgICAgIF90aGlzMy5zZWxlY3RlZEZpbGUgPSBuZXcgQXJyYXkoX3RoaXMzLmZpbGVMaXN0Lmxlbmd0aCkuZmlsbChmYWxzZSk7IC8vIHRoaXMucGFnZURhdGEudG90YWwgPSByZXMuZGF0YS50b3RhbAogICAgICAgICAgLy8gdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMzLiR0b2FzdC5lcnJvcihyZXMubXNnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgICckcm91dGUucXVlcnkuc2VhcmNoMSc6IGZ1bmN0aW9uICRyb3V0ZVF1ZXJ5U2VhcmNoMSgpIHsKICAgICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5LnNlYXJjaCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpcy5iYWNrKCcvJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2codGhpcy5zZWFyY2hLZXlXb3Jkcyk7IC8vIGNvbnN0IGRhdGEgPSB7CiAgICAgICAgLy8gICBrZXl3b3JkczogdGhpcy5zZWFyY2hLZXlXb3JkcwogICAgICAgIC8vIH0KICAgICAgICAvLyBzZWFyY2hGaWxlKGRhdGEsIHRydWUpLnRoZW4oKHJlcykgPT4gewogICAgICAgIC8vICAgaWYgKHJlcy5jb2RlID09PSAwKSB7CiAgICAgICAgLy8gICAgIHRoaXMuZmlsZUxpc3QubGVuZ3RoID0gMAogICAgICAgIC8vICAgICB0aGlzLnNvcnRGaWxlTGlzdC5sZW5ndGggPSAwCiAgICAgICAgLy8gICAgIHRoaXMuZmlsZUxpc3QgPSByZXMuZGF0YQogICAgICAgIC8vICAgICB0aGlzLnNvcnRGaWxlTGlzdCA9IHJlcy5kYXRhCiAgICAgICAgLy8gICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgndXBkYXRlRmlsZUxpc3QnLCB0aGlzLmZpbGVMaXN0KQogICAgICAgIC8vICAgICB0aGlzLnNlbGVjdGVkRmlsZSA9IG5ldyBBcnJheSh0aGlzLmZpbGVMaXN0Lmxlbmd0aCkuZmlsbChmYWxzZSkKICAgICAgICAvLyAgICAgLy8gdGhpcy5wYWdlRGF0YS50b3RhbCA9IHJlcy5kYXRhLnRvdGFsCiAgICAgICAgLy8gICAgIC8vIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgLy8gICB9IGVsc2UgewogICAgICAgIC8vICAgICB0aGlzLiR0b2FzdC5lcnJvcihyZXMubXNnKQogICAgICAgIC8vICAgfQogICAgICAgIC8vIH0pCiAgICAgIH0KICAgIH0sCiAgICBzaG93TWVudTogZnVuY3Rpb24gc2hvd01lbnUodmFsdWUpIHsKICAgICAgaWYgKHZhbHVlKSB7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2VNZW51KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZU1lbnUpOwogICAgICB9CiAgICB9LAogICAgc2hvd0NyZWF0ZUZvbGRlcjogZnVuY3Rpb24gc2hvd0NyZWF0ZUZvbGRlcihfc2hvd0NyZWF0ZUZvbGRlcikgewogICAgICBpZiAoIV9zaG93Q3JlYXRlRm9sZGVyID09PSB0cnVlKSB7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2VNZW51KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZU1lbnUpCiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2VNZW51KTsKICAgICAgfQogICAgfSwKICAgIHZpc2libGU6IHsKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihuZXdWYWwpIHsKICAgICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgICAgaWYgKCFuZXdWYWwpIHsKICAgICAgICAgIC8vIOino+mZpOemgeatoua7muWKqAogICAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXdoZWVsJywgX3RoaXM0Lm1vdXNld2hlZWxIYW5kbGVyLCB7CiAgICAgICAgICAgICAgcGFzc2l2ZTogZmFsc2UKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTp2aXNpYmxlJywgZmFsc2UpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6dmlzaWJsZScsIHRydWUpOyAvLyDmr4/mrKHlvLnlh7rlvLnnqpcs6K6p6YGu572p5bGC5LiL6Z2i55qE6aG16Z2i5LiN6IO95rua5YqoCgogICAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXdoZWVsJywgX3RoaXM0Lm1vdXNld2hlZWxIYW5kbGVyLCB7CiAgICAgICAgICAgICAgcGFzc2l2ZTogZmFsc2UKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC8vIOS4iuS8oOaWh+S7tue7hOS7tuWPguaVsAogICAgdXBsb2FkRmlsZVBhcmFtczogewogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICB2YXIgcmVzID0gewogICAgICAgICAgZmlsZVBhdGg6IHRoaXMuZnVsbFBhdGggPT09ICcnID8gJy8nIDogdGhpcy5mdWxsUGF0aCwKICAgICAgICAgIGlzRGlyOiAwCiAgICAgICAgfTsKICAgICAgICByZXR1cm4gcmVzOwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uIHNldCgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgZmlsZVBhdGg6IHRoaXMuZnVsbFBhdGggPT09ICcnID8gJy8nIDogdGhpcy5mdWxsUGF0aCwKICAgICAgICAgIGlzRGlyOiAwCiAgICAgICAgfTsKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS5jYXRlZ29yeSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAnL2luZGV4JywKICAgICAgICBxdWVyeTogewogICAgICAgICAgY2F0ZWdvcnk6ICdhbGwnCiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICBpZiAodGhpcy4kcm91dGUucXVlcnkuY2F0ZWdvcnkgIT09IHVuZGVmaW5lZCkgewogICAgICB0aGlzLnNlbGVjdGVkRmlsZUNvdW50ID0gMDsgLy8g5Y+q6KaBY2F0ZWdvcnlJZOeahOWAvOWPkeeUn+WPmOWMlizov5nkuKrmlrnms5XlsLHkvJrooqvosIPnlKgKCiAgICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS5jYXRlZ29yeSA9PT0gJ2FsbCcpIHsKICAgICAgICB0aGlzLmZ1bGxQYXRoID0gdGhpcy4kcm91dGUucXVlcnkuZmlsZVBhdGggPyB0aGlzLiRyb3V0ZS5xdWVyeS5maWxlUGF0aCA6ICcnOwogICAgICAgIHRoaXMuY3VycmVudFBhdGggPSAnJzsKICAgICAgICB0aGlzLmdldEZpbGVMaXN0KHRoaXMuZnVsbFBhdGgsIGZhbHNlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgIGZpbGVUeXBlOiB0aGlzLiRyb3V0ZS5xdWVyeS5jYXRlZ29yeSwKICAgICAgICAgIGN1cnJlbnRQYWdlOiB0aGlzLiRzdG9yZS5zdGF0ZS5jdXJyZW50UGFnZSwKICAgICAgICAgIHBhZ2VDb3VudDogdGhpcy4kc3RvcmUuc3RhdGUucGFnZUNvdW50CiAgICAgICAgfTsKCiAgICAgICAgX2dldEZpbGVMaXN0QnlUeXBlKGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAwKSB7CiAgICAgICAgICAgIF90aGlzNS5maWxlTGlzdC5sZW5ndGggPSAwOwogICAgICAgICAgICBfdGhpczUuc29ydEZpbGVMaXN0ID0gMDsKICAgICAgICAgICAgX3RoaXM1LmZpbGVMaXN0ID0gcmVzLmRhdGEubGlzdDsKICAgICAgICAgICAgX3RoaXM1LnNvcnRGaWxlTGlzdCA9IHJlcy5kYXRhLmxpc3Q7CgogICAgICAgICAgICBfdGhpczUuJHN0b3JlLmNvbW1pdCgndXBkYXRlRmlsZUxpc3QnLCBfdGhpczUuZmlsZUxpc3QpOwoKICAgICAgICAgICAgX3RoaXM1LnNlbGVjdGVkRmlsZSA9IG5ldyBBcnJheShfdGhpczUuZmlsZUxpc3QubGVuZ3RoKS5maWxsKGZhbHNlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzNS4kdG9hc3QuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICBpZiAoJ1dlYlNvY2tldCcgaW4gd2luZG93KSB7Ly8gd2Vic29ja2V0ID0gbmV3IFdlYlNvY2tldCgnd3M6Ly9sb2NhbGhvc3Q6ODA4MC9hcGkvcHVzaC93ZWJzb2NrZXQvJyArIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJbmZvJykpLnVzZXJOYW1lKQogICAgICAvLyB3ZWJzb2NrZXQgPSBuZXcgV2ViU29ja2V0KCd3czovL2xvY2FsaG9zdDo4MDgwL2FwaS9wdXNoL3dlYnNvY2tldD9zaWQ9JyArIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJbmZvJykpLnVzZXJOYW1lKQogICAgICAvLyB0aGlzLmluaXRXZWJTb2NrZXQoKQogICAgfSBlbHNlIHsKICAgICAgdGhpcy4kdG9hc3QuZXJyb3IoJ+W9k+WJjea1j+iniOWZqOS4jeaUr+aMgXdlYnNvY2tldCcpOwogICAgfQoKICAgIHRoaXMuZGlzcGxheU1vZGUgPSB0aGlzLiRzdG9yZS5zdGF0ZS5kaXNwbGF5TW9kZTsgLy8g5paH5Lu26YCJ5oup5ZCO55qE5Zue6LCDCgogICAgQnVzLiRvbignZmlsZUFkZGVkJywgZnVuY3Rpb24gKCkgewogICAgICBjb25zb2xlLmxvZygn5paH5Lu25bey6YCJ5oupJyk7CiAgICB9KTsgLy8g5paH5Lu25LiK5Lyg5oiQ5Yqf55qE5Zue6LCDCgogICAgQnVzLiRvbignZmlsZVN1Y2Nlc3MnLCBmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnNvbGUubG9nKCfmlofku7bkuIrkvKDmiJDlip8nKTsKICAgIH0pOyAvLyDph43mlrDojrflj5bmlofku7bliJfooagKCiAgICBCdXMuJG9uKCd1cGRhdGVGaWxlTGlzdCcsIGZ1bmN0aW9uIChlKSB7CiAgICAgIF90aGlzNi5nZXRGaWxlTGlzdChfdGhpczYuZnVsbFBhdGgsIHRydWUpOwogICAgfSk7CiAgfSwKICBkZXN0cm95ZWQ6IGZ1bmN0aW9uIGRlc3Ryb3llZCgpIHsvLyDnprvlvIDpobXpnaLnlJ/lkb3lkajmnJ/lh73mlbAKICB9LAogIG1ldGhvZHM6IHsKICAgIGNyZWF0ZVdlYlNvY2tldDogZnVuY3Rpb24gY3JlYXRlV2ViU29ja2V0KHVzZXJJZCwgZmlsZUlkLCBwYXRoKSB7CiAgICAgIGlmICghd2Vic29ja2V0KSB7CiAgICAgICAgLy8gcmV0dXJuIG5ldyBXZWJTb2NrZXQoJ3dzOi8vbG9jYWxob3N0OjgwODAvYXBpL3B1c2gvd2Vic29ja2V0Lz91aWQnICsgdXNlcklkICsgJyZmaWQnICsgZmlsZUlkKQogICAgICAgIHJldHVybiBuZXcgV2ViU29ja2V0KCd3czovL2xvY2FsaG9zdDo4MDgwL2FwaS9wcm9ncmVzcz9maWxlTmFtZT0xMjMuemlwJnVybFN0cj1odHRwczovL21pcnJvcnMuYWxpeXVuLmNvbS91YnVudHUtcmVsZWFzZXMvdHJ1c3R5L3VidW50dS0xNC4wNC42LXNlcnZlci1hbWQ2NC5pc28mdXNlcklkPTEmdHlwZT1vZmZsaW5lJmRvd25sb2FkUGF0aD0vJmZpbGVTYXZlUGF0aD0vJyk7IC8vIGNvbnNvbGUubG9nKCd3czovLycgKyB3aW5kb3cubG9jYXRpb24uaG9zdCArICcvYXBpL3B1c2gvd2Vic29ja2V0JyArIHVzZXJJZCArICcvJyArIGZpbGVJZCkKICAgICAgICAvLyB3ZWJzb2NrZXQgPSBXZWJTb2NrZXQoJ3dzOi8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0ICsgJy9hcGkvcHVzaC93ZWJzb2NrZXQ/c2lkPScgKyBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VySW5mbycpKS51c2VyTmFtZSkKICAgICAgICAvLyByZXR1cm4gd2Vic29ja2V0CiAgICAgICAgLy8gcmV0dXJuIG5ldyBXZWJTb2NrZXQoJ3dzOi8vMTI3LjAuMC4xOjgwODAvYXBpL3B1c2gvd2Vic29ja2V0LycgKyB1c2VySWQgKyAnLycgKyBmaWxlSWQpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHdlYnNvY2tldDsKICAgICAgfQogICAgfSwKCiAgICAvKioKICAgICAqIFdlYlNvY2tldAogICAgICovCiAgICBpbml0V2ViU29ja2V0OiBmdW5jdGlvbiBpbml0V2ViU29ja2V0KCkgewogICAgICAvLyDov57mjqXplJnor68KICAgICAgd2Vic29ja2V0Lm9uZXJyb3IgPSB0aGlzLnNldEVycm9yTWVzc2FnZTsgLy8g6L+e5o6l5oiQ5YqfCgogICAgICB3ZWJzb2NrZXQub25vcGVuID0gdGhpcy5zZXRPbm9wZW5NZXNzYWdlOyAvLyDmlLbliLDmtojmga/nmoTlm57osIMKCiAgICAgIHdlYnNvY2tldC5vbm1lc3NhZ2UgPSB0aGlzLnNldE9ubWVzc2FnZU1lc3NhZ2U7IC8vIOi/nuaOpeWFs+mXreeahOWbnuiwgwoKICAgICAgd2Vic29ja2V0Lm9uY2xvc2UgPSB0aGlzLnNldE9uY2xvc2VNZXNzYWdlOyAvLyDnm5HlkKznqpflj6PlhbPpl63kuovku7Ys5b2T56qX5Y+j5YWz6Zet5pe2LOS4u+WKqOWOu+WFs+mXrXdlYnNvY2tldOi/nuaOpSzpmLLmraLov57mjqXov5jmsqHmlq3lvIDlsLHlhbPpl63nqpflj6Msc2VydmVy56uv5Lya5oqb5byC5bi4LgoKICAgICAgd2luZG93Lm9uYmVmb3JldW5sb2FkID0gdGhpcy5vbmJlZm9yZXVubG9hZDsKICAgIH0sCiAgICBzZXRFcnJvck1lc3NhZ2U6IGZ1bmN0aW9uIHNldEVycm9yTWVzc2FnZSgpIHsKICAgICAgY29uc29sZS5sb2coJ1dlYlNvY2tldOi/nuaOpeWPkeeUn+mUmeivryAgIOeKtuaAgeeggTonICsgd2Vic29ja2V0LnJlYWR5U3RhdGUpOwogICAgfSwKICAgIHNldE9ub3Blbk1lc3NhZ2U6IGZ1bmN0aW9uIHNldE9ub3Blbk1lc3NhZ2UoKSB7CiAgICAgIGNvbnNvbGUubG9nKCdXZWJTb2NrZXTov57mjqXmiJDlip8gICAg54q25oCB56CBOicgKyB3ZWJzb2NrZXQucmVhZHlTdGF0ZSk7CiAgICB9LAogICAgc2V0T25tZXNzYWdlTWVzc2FnZTogZnVuY3Rpb24gc2V0T25tZXNzYWdlTWVzc2FnZShldmVudCkgewogICAgICAvLyDmoLnmja7mnI3liqHlmajmjqjpgIHnmoTmtojmga/lgZroh6rlt7HnmoTkuJrliqHlpITnkIYKICAgICAgY29uc29sZS5sb2coJ+acjeWKoeerr+i/lOWbnjonICsgZXZlbnQuZGF0YSk7CiAgICB9LAogICAgc2V0T25jbG9zZU1lc3NhZ2U6IGZ1bmN0aW9uIHNldE9uY2xvc2VNZXNzYWdlKCkgewogICAgICBjb25zb2xlLmxvZygnV2ViU29ja2V06L+e5o6l5YWz6ZetICAgIOeKtuaAgeeggTonICsgd2Vic29ja2V0LnJlYWR5U3RhdGUpOwogICAgfSwKICAgIG9uYmVmb3JldW5sb2FkOiBmdW5jdGlvbiBvbmJlZm9yZXVubG9hZCgpIHsKICAgICAgdGhpcy5jbG9zZVdlYlNvY2tldCgpOwogICAgfSwKICAgIGNsb3NlV2ViU29ja2V0OiBmdW5jdGlvbiBjbG9zZVdlYlNvY2tldCgpIHsKICAgICAgd2Vic29ja2V0LmNsb3NlKCk7CiAgICB9LAogICAgc2VuZFdlYnNvY2tldEluZm86IGZ1bmN0aW9uIHNlbmRXZWJzb2NrZXRJbmZvKCkgewogICAgICBnZXREb3dubG9hZFByb2dyZXNzKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKCiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAwKSB7fSBlbHNlIHsvLyB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tZXNzYWdlKQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g5L+u5pS55o6S5bqP5pa55byPCiAgICBjaGFuZ2VPcmRlcjogZnVuY3Rpb24gY2hhbmdlT3JkZXIoY29sdW1uKSB7CiAgICAgIGlmIChjb2x1bW4gIT09IHRoaXMub3JkZXJDb2x1bW4pIHsKICAgICAgICB0aGlzLm9yZGVyID0gJ2Rlc2MnOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLm9yZGVyID09ICcnKSB7CiAgICAgICAgICB0aGlzLm9yZGVyID0gJ2Rlc2MnOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5vcmRlciA9PSAnZGVzYycpIHsKICAgICAgICAgIHRoaXMub3JkZXIgPSAnYXNjJzsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMub3JkZXIgPT0gJ2FzYycpIHsKICAgICAgICAgIHRoaXMub3JkZXIgPSAnZGVzYyc7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLm9yZGVyQ29sdW1uID0gY29sdW1uOwogICAgICB0aGlzLnNvcnRGaWxlTGlzdCA9IHRoaXMuZ2VuZXJhdGVOZXdMaXN0KHRoaXMub3JkZXJDb2x1bW4sIHRoaXMub3JkZXIsIHRoaXMuc29ydEZpbGVMaXN0KTsKICAgIH0sCgogICAgLyoqCiAgICAgKiDmlofku7bmoLzlvI/ovazmjaIKICAgICAqLwogICAgZm9ybWF0Q29udmVyc2lvbjogZnVuY3Rpb24gZm9ybWF0Q29udmVyc2lvbihyb3csIGNvbnZlcnNpb25FeHQpIHsKICAgICAgdGhpcy5maWxlRm9ybWF0Q29udmVyc2lvbihyb3csIGNvbnZlcnNpb25FeHQpOwogICAgfSwKCiAgICAvKioKICAgICAqIOaWh+S7tuagvOW8j+i9rOaNogogICAgICogQHBhcmFtIHJvdwogICAgICogQHBhcmFtIGNvbnZlcnNpb25FeHQKICAgICAqLwogICAgZmlsZUZvcm1hdENvbnZlcnNpb246IGZ1bmN0aW9uIGZpbGVGb3JtYXRDb252ZXJzaW9uKHJvdywgY29udmVyc2lvbkV4dCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIC8vIHZhciBfdGhpcyA9IHRoaXMKICAgICAgdmFyIHQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgZmlsZUV4dDogcm93LmZpbGVFeHQsCiAgICAgICAgY29udmVydEV4dDogY29udmVyc2lvbkV4dCwKICAgICAgICBmaWxlSWQ6IHJvdy5pZCwKICAgICAgICB0OiB0CiAgICAgIH07CiAgICAgIGZvcm1hdFRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgIC8vIOavjzXnp5LliLfmlrDkuIDmrKEKICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgIHR5cGU6ICdjb252ZXJzaW9uJywKICAgICAgICAgIGZpbGVFeHQ6IHJvdy5maWxlRXh0LAogICAgICAgICAgY29udmVydEV4dDogY29udmVyc2lvbkV4dCwKICAgICAgICAgIGlkOiByb3cuaWQsCiAgICAgICAgICB0OiB0CiAgICAgICAgfTsKICAgICAgICBnZXRQcm9ncmVzcyhkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIEJ1cy4kZW1pdCgndXBkYXRlTG9hZGluZ1RleHQnLCByZXMuZGF0YS5wcm9ncmVzcyA+PSAxMDAgPyAn6L2s5o2i5a6M5oiQJyA6ICfovazmjaLov5vluqY6ICcgKyByZXMuZGF0YS5wcm9ncmVzcyArICclJyk7CgogICAgICAgICAgaWYgKHJlcy5kYXRhLmZpbmlzaCA9PT0gMSkgewogICAgICAgICAgICBjbGVhckludGVydmFsKGZvcm1hdFRpbWVyKTsKICAgICAgICAgICAgQnVzLiRlbWl0KCd1cGRhdGVGaWxlTGlzdCcpOyAvLyBfdGhpcy5nZXRGaWxlTGlzdCgpCiAgICAgICAgICB9CgogICAgICAgICAgQnVzLiRlbWl0KCd0b2FzdE1zZycsICcg6L2s5o2i6L+b5bqmOiAnICsgcmVzLmRhdGEucHJvZ3Jlc3MgKyAnJScpOwoKICAgICAgICAgIGlmIChyZXMuZGF0YS5wcm9ncmVzcyA+PSAxMDApIHsKICAgICAgICAgICAgLy8gX3RoaXMuZ2V0RmlsZUxpc3QodGhpcy5mdWxsUGF0aCwgdHJ1ZSkKICAgICAgICAgICAgQnVzLiRlbWl0KCd0b2FzdE1zZycsICcg6L2s5o2i5a6M5oiQJyk7CiAgICAgICAgICAgIEJ1cy4kZW1pdCgndXBkYXRlRmlsZUxpc3QnKTsKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChmb3JtYXRUaW1lcik7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0sIDQwMDApOwogICAgICBmb3JtYXRjb252ZXJzaW9uKGRhdGEsIHRydWUpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuY29kZSA9PT0gMCkgewogICAgICAgICAgX3RoaXM3LiR0b2FzdC5zdWNjZXNzKCfovazmjaLku7vliqHliJvlu7rmiJDlip8nLCAtMSk7IC8vIHRoaXMuZmlsZSA9IHJlcy5kYXRhLmZpbGUKCgogICAgICAgICAgaWYgKF90aGlzNy4kcm91dGUucXVlcnkuY2F0ZWdvcnkgPT09ICdhbGwnKSB7Ly8gX3RoaXMuZ2V0RmlsZUxpc3Qocm93LmZpbGVQYXRoLCB0cnVlKQogICAgICAgICAgfSBlbHNlIHsvLyB0aGlzLmdldEZpbGVMaXN0QnlUeXBlKHRoaXMuJHJvdXRlLnF1ZXJ5LmNhdGVnb3J5KQogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzNy4kdG9hc3QuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgLyoqCiAgICAgKiDliLfmlrDmlofku7bliJfooagKICAgICAqLwogICAgcmVmcmVzaEZpbGVMaXN0OiBmdW5jdGlvbiByZWZyZXNoRmlsZUxpc3QoKSB7CiAgICAgIHRoaXMuZ2V0RmlsZUxpc3QodGhpcy5mdWxsUGF0aCwgdHJ1ZSk7IC8vIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS5jYXRlZ29yeSA9PT0gJ2FsbCcpIHsKICAgICAgLy8gICByZWZyZXNoRmlsZS50aGVuKChyZXMpID0+IHsKICAgICAgLy8gICAgIGlmIChyZXMuY29kZSA9PT0gMCkgewogICAgICAvLwogICAgICAvLyAgICAgfSBlbHNlIHsKICAgICAgLy8gICAgICAgdGhpcy4kdG9hc3QuZXJyb3IocmVzLm1zZykKICAgICAgLy8gICAgIH0KICAgICAgLy8gICB9KQogICAgICAvLyAgIC8vIHRoaXMuZ2V0RmlsZUxpc3QodGhpcy5mdWxsUGF0aCwgdHJ1ZSkKICAgICAgLy8gfSBlbHNlIHsKICAgICAgLy8gICByZWZyZXNoRmlsZS50aGVuKChyZXMpID0+IHsKICAgICAgLy8gICAgIGlmIChyZXMuY29kZSA9PT0gMCkgewogICAgICAvLyAgICAgfSBlbHNlIHsKICAgICAgLy8gICAgICAgdGhpcy4kdG9hc3QuZXJyb3IocmVzLm1zZykKICAgICAgLy8gICAgIH0KICAgICAgLy8gICB9KQogICAgICAvLyAgIC8vIHRoaXMuZ2V0RmlsZUxpc3RCeVR5cGUodGhpcy4kcm91dGUucXVlcnkuZmlsZVR5cGUpCiAgICAgIC8vIH0KICAgIH0sCiAgICAvLyDmuIXpmaTlrprml7blmagKICAgIGNsZWFyVGltZXI6IGZ1bmN0aW9uIGNsZWFyVGltZXIodGltZXIpIHsKICAgICAgY29uc29sZS5sb2coJ+a4hemZpOWumuaXtuWZqCcsIHRpbWVyKTsKICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7IC8vIGNsZWFySW50ZXJ2YWwoZm9ybWF0VGltZXIpCiAgICB9LAogICAgdW56aXA6IGZ1bmN0aW9uIHVuemlwKGl0ZW0sIHR5cGUpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBfdGhpcywgX3lpZWxkJF90aGlzOCQkZmlsZVNlLCBmaWxlUGF0aCwgZGF0YTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgLy8gdmFyIHRpbWVyCiAgICAgICAgICAgICAgICBfdGhpcyA9IF90aGlzODsKCiAgICAgICAgICAgICAgICBpZiAoISh0eXBlID09PSAzKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM4LiRmaWxlU2VsZWN0b3IoewogICAgICAgICAgICAgICAgICB0aXRsZTogJ+mAieaLqeebruW9lScsCiAgICAgICAgICAgICAgICAgIHVzZXJJbmZvOiBfdGhpczguJHN0b3JlLnN0YXRlLnVzZXJJbmZvLAogICAgICAgICAgICAgICAgICBvbmx5Rm9sZGVyOiB0cnVlLAogICAgICAgICAgICAgICAgICBzaG93OiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgX3lpZWxkJF90aGlzOCQkZmlsZVNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGZpbGVQYXRoID0gX3lpZWxkJF90aGlzOCQkZmlsZVNlLmZpbGVQYXRoOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09IDIpIHsKICAgICAgICAgICAgICAgICAgZmlsZVBhdGggPSAoaXRlbS5maWxlUGF0aCA9PT0gJy8nID8gJy8nIDogaXRlbS5maWxlUGF0aCArICcvJykgKyBpdGVtLmZpbGVOYW1lLnJlcGxhY2UoJy4nICsgaXRlbS5maWxlRXh0LCAnJyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBmaWxlUGF0aCA9IF90aGlzOC4kc3RvcmUuc3RhdGUuZnVsbFBhdGg7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIF90aGlzLnJlbW90ZVRhc2sgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgIGZpZDogX3RoaXM4LmZpbGVMaXN0W190aGlzOC5zZWxlY3RGaWxlSW5kZXhdLmlkLAogICAgICAgICAgICAgICAgICB1bnppcE1vZGU6IHR5cGUsCiAgICAgICAgICAgICAgICAgIGZpbGVQYXRoOiBmaWxlUGF0aCwKICAgICAgICAgICAgICAgICAgdDogX3RoaXMucmVtb3RlVGFzawogICAgICAgICAgICAgICAgfTsgLy8gd2Vic29ja2V0ID0gbmV3IFdlYlNvY2tldCgnd3M6Ly9sb2NhbGhvc3Q6ODA4MC9hcGkvcHJvZ3Jlc3MvdW56aXA/aWQ9JyArIHRoaXMuZmlsZUxpc3RbdGhpcy5zZWxlY3RGaWxlSW5kZXhdLmlkICsgJyZ1aWQ9JyArIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJJbmZvLmlkKQogICAgICAgICAgICAgICAgLy8gdGhpcy4kdG9hc3Quc3VjY2VzcygnLOino+WOi+aWh+S7tuaJgOWcqOebruW9leino+WOi+aWh+S7tuaJgOWcqOebruW9leino+WOi+aWh+S7tuaJgOWcqOebruW9leino+WOi+aWh+S7tuaJgOWcqOebruW9lTonICsgZmlsZVBhdGgsIC0xKQogICAgICAgICAgICAgICAgLy8g6Kej5Y6L5Yiw5oyH5a6a5paH5Lu25aS5CgogICAgICAgICAgICAgICAgX3RoaXM4LnVuemlwVGltZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAvLyDmr48156eS5Yi35paw5LiA5qyhCiAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICd1bnppcCcsCiAgICAgICAgICAgICAgICAgICAgZmlkOiBpdGVtLmlkLAogICAgICAgICAgICAgICAgICAgIHVuemlwTW9kZTogdHlwZSwKICAgICAgICAgICAgICAgICAgICBmaWxlUGF0aDogZmlsZVBhdGgsCiAgICAgICAgICAgICAgICAgICAgdDogX3RoaXMucmVtb3RlVGFzawogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICBnZXRQcm9ncmVzcyhkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICBCdXMuJGVtaXQoJ3RvYXN0TXNnJywgJyDop6Pljovov5vluqY6ICcgKyByZXMuZGF0YS5wcm9ncmVzcyArICclJyk7IC8vIEJ1cy4kZW1pdCgndXBkYXRlTG9hZGluZ1RleHQnLCByZXMuZGF0YS5wcm9ncmVzcyA+PSAxMDAgPyAn6Kej5Y6L5a6M5oiQJyA6ICfop6Pljovov5vluqY6ICcgKyByZXMuZGF0YS5wcm9ncmVzcyArICclJykKCiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEucHJvZ3Jlc3MgPj0gMTAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIEJ1cy4kZW1pdCgndG9hc3RNc2cnLCAnIOino+WOi+WujOaIkCcpOwogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChfdGhpcy51bnppcFRpbWVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudW56aXBUaW1lciA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgIEJ1cy4kZW1pdCgndXBkYXRlRmlsZUxpc3QnKTsgLy8gX3RoaXMuZ2V0RmlsZUxpc3QodGhpcy5mdWxsUGF0aCwgdHJ1ZSkKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIEJ1cy4kZW1pdCgndG9hc3RNc2cnLCAnIOino+WOi+i/m+W6pjogJyArIHJlcy5kYXRhLnByb2dyZXNzICsgJyUnKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgQnVzLiRlbWl0KCd0b2FzdE1zZycsICcg6Kej5Y6L5aSx6LSlJyk7CiAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChfdGhpcy51bnppcFRpbWVyKTsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVuemlwVGltZXIgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9LCAyMDAwKTsKICAgICAgICAgICAgICAgIHVuemlwRmlsZShkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gY2xlYXJJbnRlcnZhbCh1bnppcFRpbWVyKQogICAgICAgICAgICAgICAgICAgIF90aGlzOC4kdG9hc3Quc3VjY2Vzcygn6Kej5Y6L5Lu75Yqh5Yib5bu65oiQ5YqfLOS/neWtmOi3r+W+hDonICsgZmlsZVBhdGgsIC0xKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvLyBjbGVhckludGVydmFsKHVuemlwVGltZXIpCiAgICAgICAgICAgICAgICAgICAgX3RoaXM4LiR0b2FzdC5lcnJvcihyZXMubXNnKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgb2NyOiBmdW5jdGlvbiBvY3IoaW5kZXgpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CgogICAgICB2YXIgaW1hZ2UgPSB0aGlzLmZpbGVMaXN0W2luZGV4XTsKCiAgICAgIGlmIChpbWFnZS5maWxlU2l6ZSA+IDQxOTQzMDQpIHsKICAgICAgICB0aGlzLiR0b2FzdC5lcnJvcign5Zu+54mH5aSn5bCP5LiN6IO96LaF6L+HNE0nKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBpbWFnZUxpc3QgPSB0aGlzLmZpbGVMaXN0LmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLmZpbGVUeXBlID09PSAxOwogICAgICB9KTsKICAgICAgdmFyIGRpID0gaW1hZ2VMaXN0Lmxlbmd0aCA+IDEgPyBpbWFnZUxpc3QuaW5kZXhPZihpbWFnZUxpc3QuZmlsdGVyKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgcmV0dXJuIGQuZmlsZU5hbWUgPT0gX3RoaXM5LmZpbGVMaXN0W190aGlzOS5zZWxlY3RGaWxlSW5kZXhdLmZpbGVOYW1lOwogICAgICB9KVswXSkgOiAwOwogICAgICBWdWUucHJvdG90eXBlLiRwcmV2aWV3SW1hZ2VPY3IoewogICAgICAgIGltYWdlTGlzdDogaW1hZ2VMaXN0LAogICAgICAgIGRlZmF1bHRJbmRleDogZGkKICAgICAgfSk7CiAgICB9LAogICAgbWVudU1ldGhvZHM6IGZ1bmN0aW9uIG1lbnVNZXRob2RzKG1ldGhvZCkgewogICAgICB0aGlzW21ldGhvZF0oKTsKICAgIH0sCiAgICAvLyDmiZPlvIAKICAgIG1lbnVPcGVuOiBmdW5jdGlvbiBtZW51T3BlbigpIHsKICAgICAgdmFyIGluZGV4ID0gdGhpcy4kc3RvcmUuc3RhdGUuc2VsZWN0RmlsZUluZGV4OwogICAgICB0aGlzLmNsaWNrQWN0aW9ucyhpbmRleCwgdGhpcy5maWxlTGlzdFtpbmRleF0pOwogICAgfSwKICAgIC8vIOWIhuS6q+aWh+S7tgogICAgbWVudVNoYXJlOiBmdW5jdGlvbiBtZW51U2hhcmUoKSB7CiAgICAgIHRoaXMuc2hhcmVGaWxlKCk7CiAgICB9LAogICAgLy8g5aSN5Yi25paH5Lu2CiAgICBtZW51Q29weTogZnVuY3Rpb24gbWVudUNvcHkoKSB7CiAgICAgIHRoaXMuY29weUZpbGUoKTsKICAgIH0sCiAgICAvLyDnp7vliqjmlofku7YKICAgIG1lbnVNb3ZlOiBmdW5jdGlvbiBtZW51TW92ZSgpIHsKICAgICAgdGhpcy5tb3ZlRmlsZSgpOwogICAgfSwKICAgIC8vIOaWh+S7tumHjeWRveWQjQogICAgbWVudVJlbmFtZTogZnVuY3Rpb24gbWVudVJlbmFtZSgpIHsKICAgICAgdGhpcy5yZW5hbWVGaWxlKCk7IC8vIGJ1cy4kZW1pdCgncmVuYW1lRmlsZU5hbWUnLCB0aGlzLiRzdG9yZS5zdGF0ZS5maWxlTGlzdFt0aGlzLiRzdG9yZS5zdGF0ZS5zZWxlY3RGaWxlSW5kZXhdLmZpbGVOYW1lKQogICAgfSwKICAgIC8vIOWIoOmZpOaWh+S7tgogICAgbWVudURlbGV0ZTogZnVuY3Rpb24gbWVudURlbGV0ZSgpIHsKICAgICAgdGhpcy5kZWxldGVGaWxlKCk7CiAgICB9LAogICAgbWVudURvd25sb2FkOiBmdW5jdGlvbiBtZW51RG93bmxvYWQoKSB7Ly8gdGhpcy4kcGFyZW50LmRvd25sb2FkKCkKICAgIH0sCiAgICAvLyDliLfmlrDpobXpnaIKICAgIG1lbnVSZWZyZXNoOiBmdW5jdGlvbiBtZW51UmVmcmVzaCgpIHsKICAgICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5LmNhdGVnb3J5ID09PSAnYWxsJykgewogICAgICAgIHRoaXMuZ2V0RmlsZUxpc3QodGhpcy5mdWxsUGF0aCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5nZXRGaWxlTGlzdEJ5VHlwZSh0aGlzLiRyb3V0ZS5xdWVyeS5jYXRlZ29yeSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDliJvlu7rmlofku7blpLkKICAgIG1lbnVDcmVhdGVGb2xkZXI6IGZ1bmN0aW9uIG1lbnVDcmVhdGVGb2xkZXIoKSB7CiAgICAgIHRoaXMuY3JlYXRlRm9sZGVyKCk7CiAgICB9LAogICAgbWVudVJlc3RvcmVGaWxlOiBmdW5jdGlvbiBtZW51UmVzdG9yZUZpbGUoKSB7CiAgICAgIGNvbnNvbGUubG9nKCfov5jljp/mlofku7YnKTsKICAgICAgdGhpcy5yZXN0b3JlRmlsZSgpOwogICAgfSwKICAgIG1lbnVEZWxldGVSZWN5Y2xlOiBmdW5jdGlvbiBtZW51RGVsZXRlUmVjeWNsZSgpIHsKICAgICAgY29uc29sZS5sb2coJ+W9u+W6leWIoOmZpCcpOwogICAgICB0aGlzLmRlbGV0ZVJlY3ljbGUoKTsKICAgIH0sCiAgICBzaG93Q29udGVudE1lbnVUeXBlOiBmdW5jdGlvbiBzaG93Q29udGVudE1lbnVUeXBlKGluZGV4KSB7CiAgICAgIC8vIGNvbnN0IF90aGlzID0gdGhpcwogICAgICB0aGlzLnNlbGVjdEZpbGVJbmRleCA9IGluZGV4OwogICAgICB0aGlzLml0ZW0gPSB0aGlzLmZpbGVMaXN0W2luZGV4XTsKCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkRmlsZVtpbmRleF0gPT09IHRydWUpIHt9IGVsc2UgewogICAgICAgIHRoaXMuaW5pdCgpOwogICAgICB9CgogICAgICBpZiAodGhpcy5nZXRTZWxlY3RlZEZpbGVJbmRleCh0aGlzLnNlbGVjdGVkRmlsZSwgaW5kZXgpID09PSBpbmRleCkgewogICAgICAgIHRoaXMuc2VsZWN0RmlsZShpbmRleCk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RlZEZpbGVDb3VudCA9PT0gMCkgewogICAgICAgIHRoaXMuc2VsZWN0RmlsZShpbmRleCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5zZWxlY3RGaWxlQ291bnQ7CiAgICB9LAogICAgZ2V0VXNlckluZm86IGZ1bmN0aW9uIGdldFVzZXJJbmZvKCkgewogICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7CgogICAgICBfZ2V0VXNlckluZm8oKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwoKICAgICAgICBpZiAocmVzLmNvZGUgPT09IDApIHsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VySW5mbycsIEpTT04uc3RyaW5naWZ5KHJlcy5kYXRhLnVzZXJJbmZvKSk7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlclN0b3JhZ2UnLCBKU09OLnN0cmluZ2lmeShyZXMuZGF0YS51c2VyU3RvcmFnZSkpOwoKICAgICAgICAgIF90aGlzMTAuJHN0b3JlLmNvbW1pdCgndXBkYXRlSXNMb2dpbicsIHRydWUpOwoKICAgICAgICAgIF90aGlzMTAuJHN0b3JlLmNvbW1pdCgndXBkYXRlVXNlckluZm8nLCByZXMuZGF0YS51c2VySW5mbyk7CgogICAgICAgICAgX3RoaXMxMC4kc3RvcmUuY29tbWl0KCd1cGRhdGVVc2VyU3RvcmFnZScsIHJlcy5kYXRhLnVzZXJTdG9yYWdlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMxMC4kdG9hc3QuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDmlofku7bmkJzntKIKICAgIHNlYXJjaDogZnVuY3Rpb24gc2VhcmNoKCkgewogICAgICB0aGlzLnNlbGVjdEFsbEZpbGVzID0gZmFsc2U7CiAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlQ291bnQgPSAwOwoKICAgICAgaWYgKHRoaXMuc2VhcmNoS2V5V29yZHMgPT09ICcnKSB7CiAgICAgICAgdGhpcy4kdG9hc3QuZXJyb3IoJ+aQnOe0ouWFs+mUruivjeS4jeiDveS4uuepuicpOwogICAgICB9IC8vIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsKICAgICAgLy8gICAvLyBwYXRoOiAnL2luZGV4JywKICAgICAgLy8gICBxdWVyeTogewogICAgICAvLyAgICAgY2F0ZWdvcnk6ICdhbGwnLAogICAgICAvLyAgICAgc2VhcmNoOiB0aGlzLnNlYXJjaEtleVdvcmRzCiAgICAgIC8vICAgfQogICAgICAvLyB9KQoKICAgIH0sCgogICAgLyoqCiAgICAgKiDkuIrkvKDmlofku7bmjInpkq7ngrnlh7vkuovku7YKICAgICAqIEBkZXNjcmlwdGlvbiDpgJrov4dCdXPpgJrkv6Es5byA5ZCv5YWo5bGA5LiK5Lyg5paH5Lu25rWB56iLCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHVwbG9hZFdheSDkuIrkvKDmlrnlvI8gMC3mlofku7bkuIrkvKAgMS3mlofku7blpLnkuIrkvKAgMi3nspjotLTlm77niYfmiJbmi5bmi73kuIrkvKAKICAgICAqLwogICAgaGFuZGxlVXBsb2FkRmlsZUJ0bkNsaWNrOiBmdW5jdGlvbiBoYW5kbGVVcGxvYWRGaWxlQnRuQ2xpY2sodXBsb2FkV2F5KSB7CiAgICAgIHRoaXMuJHVwbG9hZEZpbGUoewogICAgICAgIHBhcmFtczogdGhpcy51cGxvYWRGaWxlUGFyYW1zLAogICAgICAgIHVwbG9hZFdheTogdXBsb2FkV2F5LAogICAgICAgIHNlcnZpY2VFbDogdGhpcwogICAgICB9KTsKICAgIH0sCiAgICAvLyB0ZXN05pa55rOVCiAgICB0ZXN0OiBmdW5jdGlvbiB0ZXN0KCkgewogICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMxMS4kdG9hc3Quc3VjY2Vzcygn5Yqg6L295LitLi4uJywgLTEpOyAvLyB0aGlzLnNlbmRXZWJzb2NrZXRJbmZvKCkKCgogICAgICAgICAgICAgICAgd2Vic29ja2V0ID0gX3RoaXMxMS5jcmVhdGVXZWJTb2NrZXQoMSwgMSwgJycpOyAvLyB0aGlzLmRvd25sb2FkRmlsZSA9IHRoaXMuZmlsZUxpc3RbNF0KICAgICAgICAgICAgICAgIC8vIGF3YWl0IHRoaXMuJHJlcXVlc3QoCiAgICAgICAgICAgICAgICAvLyAgICcvZmlsZXRyYW5zZmVyL2Rvd25sb2FkJywKICAgICAgICAgICAgICAgIC8vICAgdGhpcy5kb3dubG9hZEZpbGUsCiAgICAgICAgICAgICAgICAvLyAgICdnZXQnLAogICAgICAgICAgICAgICAgLy8gICAncGFyYW1zJwogICAgICAgICAgICAgICAgLy8gKQoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICB0ZXN0MjogZnVuY3Rpb24gdGVzdDIoKSB7CiAgICAgIGNsZWFySW50ZXJ2YWwodW56aXBUaW1lcik7IC8vIGNvbnN0IGRhdGEgPSB7CiAgICAgIC8vICAgZmlsZU5hbWU6ICcyMDIyMDUwOCcKICAgICAgLy8gfQogICAgICAvLyBjcmVhdGVDb3NGb2xkZXIoZGF0YSkudGhlbihyZXMgPT4gewogICAgICAvLyAgIGNvbnNvbGUubG9nKHJlcykKICAgICAgLy8gfSkKICAgICAgLy8gdGhpcy5wcm9ncmVzcysrCiAgICAgIC8vIGlmICh0aGlzLnByb2dyZXNzID4gNSkgewogICAgICAvLyAgIGNvbnN0IGRhdGEgPSB7CiAgICAgIC8vICAgICBjb250ZW50OiAn5omT5byA5paH5Lu25L2N572uJywKICAgICAgLy8gICAgIHNyYzogJy9pbmRleCcKICAgICAgLy8gICB9CiAgICAgIC8vICAgQnVzLiRlbWl0KCd0b2FzdE1lbnUnLCBkYXRhKQogICAgICAvLyB9CiAgICAgIC8vIEJ1cy4kZW1pdCgndG9hc3RNc2cnLCAn5LiL6L296L+b5bqmJyArIHRoaXMucHJvZ3Jlc3MgKyAnJScpCiAgICB9LAogICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgdGhpcy5zZWxlY3RlZEZpbGVDb3VudCA9IDA7CiAgICAgIHRoaXMuc2VsZWN0RmlsZUluZGV4ID0gLTE7CiAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gbmV3IEFycmF5KHRoaXMuZmlsZUxpc3QubGVuZ3RoKS5maWxsKGZhbHNlKTsKICAgIH0sCiAgICBwcmV2aWV3SW1nT2JqZWN0OiBmdW5jdGlvbiBwcmV2aWV3SW1nT2JqZWN0KGluZGV4LCBpbWFnZUxpc3QpIHsKICAgICAgdmFyICR2aWV3ZXIgPSB2aWV3ZXJBcGkoewogICAgICAgIG9wdGlvbnM6IHsKICAgICAgICAgIHRvb2xiYXI6IHRydWUsCiAgICAgICAgICB1cmw6ICdkYXRhLXNvdXJjZScsCiAgICAgICAgICBpbml0aWFsVmlld0luZGV4OiBpbmRleAogICAgICAgIH0sCiAgICAgICAgaW1hZ2VzOiBpbWFnZUxpc3QKICAgICAgfSk7CiAgICAgIGNvbnNvbGUubG9nKCR2aWV3ZXIpOwogICAgfSwKICAgIC8vIOaWh+S7tuWkuQogICAgZm9sZGVyOiBmdW5jdGlvbiBmb2xkZXIoaW5kZXgsIGZpbGVOYW1lLCBlKSB7CiAgICAgIGNvbnNvbGUubG9nKCfngrnlh7vnm67lvZU6JyArIGZpbGVOYW1lKTsKICAgICAgdGhpcy5lbnRlckZvbGRlcihpbmRleCwgJy8nICsgZmlsZU5hbWUsIGUpOwogICAgfSwKICAgIC8vIOi3r+W+hOWvvOiIqgogICAgbmF2aWdhdGU6IGZ1bmN0aW9uIG5hdmlnYXRlKGluZGV4KSB7CiAgICAgIHZhciBjdXJyZW50UGF0aCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmZpbGVQYXRoOyAvLyBjb25zb2xlLmxvZygn5b2T5YmN6Lev5b6EOicgKyBjdXJyZW50UGF0aCkKCiAgICAgIHZhciByb3V0ZUFyciA9IGN1cnJlbnRQYXRoLnNwbGl0KCcvJykuc2xpY2UoMSk7IC8vIOWwhnJvdXRlQXJy55qE5YmNaW5kZXjkuKrlhYPntKDliY3pnaLmt7vliqAv5YaN5ou85o6lCgogICAgICB2YXIgcGF0aCA9ICcvJyArIHJvdXRlQXJyLnNsaWNlKDAsIGluZGV4ICsgMSkuam9pbignLycpOyAvLyB2YXIgcm91dGVyTGVuZ3RoID0gdGhpcy4kcm91dGUucXVlcnkuZmlsZVBhdGguc3BsaXQoJy8nKS5sZW5ndGgKICAgICAgLy8gY29uc29sZS5sb2coJ+i3s+i9rOaWsOi3r+W+hDonICsgcGF0aCkKICAgICAgLy8gY29uc29sZS5sb2coJ3JvdXRlQXJyLOaIquWPluaOieesrOS4gOS4quepujonLCByb3V0ZUFycikKICAgICAgLy8gY29uc29sZS5sb2coJ3JvdXRlckxlbmd0aDonICsgcm91dGVyTGVuZ3RoKQogICAgICAvLyBjb25zb2xlLmxvZygn54K55Ye7aW5kZXg6JywgaW5kZXgpCiAgICAgIC8vIGNvbnNvbGUubG9nKCfngrnlh7vlvZPliY3ot6/lvoQ6Jywgcm91dGVBcnJbaW5kZXhdKQogICAgICAvLyDojrflj5ZjdXJyZW50UGF0aOeahHJvdXRlckxlbmd0aFtpbmRleF3lt6bovrnnmoTot6/lvoQKICAgICAgLy8gY29uc29sZS5sb2coJ+i/m+WFpeeahOi3r+W+hDonICsgKQoKICAgICAgaWYgKHBhdGggPT09ICcvJykgewogICAgICAgIC8vIHRoaXMuZ2V0RmlsZUxpc3QoJy8nKQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIHBhdGg6ICcvaW5kZXgnLAogICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgY2F0ZWdvcnk6ICdhbGwnCiAgICAgICAgICB9CiAgICAgICAgfSk7IC8vIHRoaXMuZ2V0RmlsZUxpc3QoJy8nLCBmYWxzZSkKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBwYXRoOiAnL2luZGV4JywKICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgIGNhdGVnb3J5OiAnYWxsJywKICAgICAgICAgICAgZmlsZVBhdGg6IHBhdGgKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7Ly8gdGhpcy5nZXRGaWxlTGlzdCh0aGlzLiRzdG9yZS5zdGF0ZS5mdWxsUGF0aCkKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8vIOi/lOWbnuS4iuS4gOe6p+ebruW9lQogICAgYmFjazogZnVuY3Rpb24gYmFjayhwYXRoKSB7CiAgICAgIHRoaXMuc2VhcmNoS2V5V29yZHMgPSAnJzsKICAgICAgdGhpcy5zaG93TG9hZGluZyA9IHRydWU7CiAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlQ291bnQgPSAwOwogICAgICB0aGlzLnNlbGVjdEFsbEZpbGVzID0gZmFsc2U7CiAgICAgIHRoaXMuc29ydEZpbGVMaXN0Lmxlbmd0aCA9IDA7CgogICAgICBpZiAocGF0aCA9PT0gJy8nKSB7CiAgICAgICAgLy8gdGhpcy5nZXRGaWxlTGlzdCgnLycpCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgcGF0aDogJy9pbmRleCcsCiAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICBjYXRlZ29yeTogJ2FsbCcKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB0aGlzLmdldEZpbGVMaXN0KCcvJywgZmFsc2UpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHJvdXRlci5nbygtMSk7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgey8vIHRoaXMuZ2V0RmlsZUxpc3QodGhpcy4kc3RvcmUuc3RhdGUuZnVsbFBhdGgpCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBtb3JlT3B0aW9uOiBmdW5jdGlvbiBtb3JlT3B0aW9uKCkge30sCiAgICAvLyDmiZPlvIDlj7PplK7oj5zljZUKICAgIG9wZW5NZW51OiBmdW5jdGlvbiBvcGVuTWVudShlLCBpdGVtLCBpbmRleCkgewogICAgICB0aGlzLmUgPSBlOwogICAgICB0aGlzLnNlbGVjdEZpbGVJbmRleCA9IGluZGV4OwogICAgICB0aGlzLml0ZW0gPSB0aGlzLmZpbGVMaXN0W2luZGV4XTsKCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkRmlsZVtpbmRleF0gPT09IHRydWUpIHt9IGVsc2UgewogICAgICAgIHRoaXMuaW5pdCgpOwogICAgICB9CgogICAgICB0aGlzLm1lbnVMZWZ0ID0gZS5zY3JlZW5YOwogICAgICB0aGlzLm1lbnVUb3AgPSBlLnNjcmVlblkgLSAxMTA7CgogICAgICBpZiAodGhpcy5nZXRTZWxlY3RlZEZpbGVJbmRleCh0aGlzLnNlbGVjdGVkRmlsZSwgaW5kZXgpID09PSBpbmRleCkgewogICAgICAgIHRoaXMuc2VsZWN0RmlsZShpbmRleCk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RlZEZpbGVDb3VudCA9PT0gMCkgewogICAgICAgIHRoaXMuc2VsZWN0RmlsZShpbmRleCk7CiAgICAgIH0KCiAgICAgIHRoaXMuc2hvd01lbnUgPSB0cnVlOwogICAgfSwKICAgIC8vIOWFs+mXreeql+WPowogICAgY2xvc2VNZW51OiBmdW5jdGlvbiBjbG9zZU1lbnUoKSB7CiAgICAgIHRoaXMuc2hvd01lbnUgPSBmYWxzZTsKICAgICAgdGhpcy5zaG93Q3JlYXRlRm9sZGVyID0gZmFsc2U7CiAgICB9LAogICAgLy8g6YCJ5oup5paH5Lu2CiAgICBzZWxlY3RGaWxlOiBmdW5jdGlvbiBzZWxlY3RGaWxlKGluZGV4KSB7CiAgICAgIHRoaXMuc2VsZWN0RmlsZUluZGV4ID0gaW5kZXg7IC8vIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCkKCiAgICAgIGlmICh0aGlzLnNlbGVjdEFsbEZpbGVzID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy5zZWxlY3RBbGxGaWxlcyA9IGZhbHNlOwogICAgICB9CgogICAgICBpZiAodGhpcy5zZWxlY3RlZEZpbGVbaW5kZXhdID09IGZhbHNlKSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZEZpbGVDb3VudCArPSAxOwogICAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlW2luZGV4XSA9IHRydWU7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCd1cGRhdGVTZWxlY3RGaWxlQ291bnQnLCB0aGlzLnNlbGVjdGVkRmlsZUNvdW50KTsgLy8g5Yik5pat5piv5ZCm5omA5pyJ6YO96YCJ5YiZCgogICAgICAgIGlmICh0aGlzLnNlbGVjdGVkRmlsZS5maWx0ZXIoZnVuY3Rpb24gKGZpbGUpIHsKICAgICAgICAgIHJldHVybiBmaWxlID09IHRydWU7CiAgICAgICAgfSkubGVuZ3RoID09PSB0aGlzLmZpbGVMaXN0Lmxlbmd0aCkgewogICAgICAgICAgdGhpcy5zZWxlY3RBbGxGaWxlcyA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuc2VsZWN0QWxsRmlsZXMgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZEZpbGVDb3VudCAtPSAxOwogICAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlW2luZGV4XSA9IGZhbHNlOwogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgndXBkYXRlU2VsZWN0RmlsZUNvdW50JywgdGhpcy5zZWxlY3RlZEZpbGVDb3VudCk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkRmlsZUNvdW50ID09PSAxKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCd1cGRhdGVTZWxlY3RGaWxlSW5kZXgnLCBpbmRleCk7IC8vIOmAieS4reaWh+S7tuS4ujEg5LiU6Lev5b6E5Li656m65pe2CgogICAgICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS5maWxlUGF0aCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICB0aGlzLnNlbGVjdEZ1bGxQYXRoID0gJy8nICsgdGhpcy5maWxlTGlzdFtpbmRleF0uZmlsZU5hbWU7CiAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3VwZGF0ZVNlbGVjdEZ1bGxQYXRoJywgdGhpcy5zZWxlY3RGdWxsUGF0aCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIOi3r+W+hOS4jeS4uuepuuaXtgogICAgICAgICAgdGhpcy5zZWxlY3RGdWxsUGF0aCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmZpbGVQYXRoICsgJy8nICsgdGhpcy5maWxlTGlzdFtpbmRleF0uZmlsZU5hbWU7CiAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3VwZGF0ZVNlbGVjdEZ1bGxQYXRoJywgdGhpcy5zZWxlY3RGdWxsUGF0aCk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLnNlbGVjdEZpbGVJbmRleCA9IHRoaXMuZ2V0U2VsZWN0ZWRGaWxlSW5kZXgodGhpcy5zZWxlY3RlZEZpbGUsIHRydWUpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2VsZWN0RmlsZUluZGV4ID0gLTE7CiAgICAgIH0KICAgIH0sCiAgICAvLyDojrflj5bpgInkuK3mlofku7bntKLlvJUKICAgIGdldFNlbGVjdGVkRmlsZUluZGV4OiBmdW5jdGlvbiBnZXRTZWxlY3RlZEZpbGVJbmRleChhcnJheXMsIG9iaikgewogICAgICB2YXIgaSA9IGFycmF5cy5sZW5ndGg7CgogICAgICB3aGlsZSAoaS0tKSB7CiAgICAgICAgaWYgKGFycmF5c1tpXSA9PT0gb2JqKSB7CiAgICAgICAgICByZXR1cm4gaTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICAvLyDpgInmi6nlhajpg6jmlofku7YKICAgIHNlbGVjdEFsbDogZnVuY3Rpb24gc2VsZWN0QWxsKGUpIHsKICAgICAgaWYgKHRoaXMuc2VsZWN0QWxsRmlsZXMgPT09IHRydWUpIHsKICAgICAgICAvLyDlj5bmtojpgInkuK3miYDmnIkKICAgICAgICB0aGlzLnNlbGVjdGVkRmlsZUNvdW50ID0gMDsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3VwZGF0ZVNlbGVjdEZpbGVDb3VudCcsIHRoaXMuZmlsZUxpc3QubGVuZ3RoKTsKICAgICAgICB0aGlzLnNlbGVjdGVkRmlsZSA9IG5ldyBBcnJheSh0aGlzLmZpbGVMaXN0Lmxlbmd0aCkuZmlsbChmYWxzZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZEZpbGVDb3VudCA9IHRoaXMuZmlsZUxpc3QubGVuZ3RoOwogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgndXBkYXRlU2VsZWN0RmlsZUNvdW50JywgdGhpcy5maWxlTGlzdC5sZW5ndGgpOwogICAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gbmV3IEFycmF5KHRoaXMuZmlsZUxpc3QubGVuZ3RoKS5maWxsKHRydWUpOwogICAgICB9CgogICAgICB0aGlzLnNlbGVjdEFsbEZpbGVzID0gIXRoaXMuc2VsZWN0QWxsRmlsZXM7CiAgICB9LAogICAgLy8g54K55Ye75LiN5ZCM5paH5Lu25a6e546w5LiN5ZCM55qE5Yqf6IO9CiAgICBjbGlja0FjdGlvbnM6IGZ1bmN0aW9uIGNsaWNrQWN0aW9ucyhpbmRleCwgaXRlbSwgZSkgewogICAgICBjb25zb2xlLmxvZygnPT1pbmRleDonICsgaW5kZXggKyAnPT1maWxlTmFtZTonICsgaXRlbS5maWxlTmFtZSk7CgogICAgICBpZiAoaXRlbS5pc0RpciA9PT0gMSkgewogICAgICAgIHRoaXMuY3VycmVudEZpbGUuaWQgPSBpdGVtLmlkOwoKICAgICAgICBpZiAodGhpcy5zZWFyY2hLZXlXb3JkcyAhPT0gJycpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCfmkJzntKLov5vlhaXmlofku7blpLknKTsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICBjYXRlZ29yeTogJ2FsbCcsCiAgICAgICAgICAgICAgZmlsZVBhdGg6IGl0ZW0uZmlsZVBhdGggPT09ICcvJyA/ICcvJyArIGl0ZW0uZmlsZU5hbWUgOiBpdGVtLmZpbGVQYXRoICsgJy8nICsgaXRlbS5maWxlTmFtZQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuc2VhcmNoS2V5V29yZHMgPSAnJzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5lbnRlckZvbGRlcihpbmRleCwgJy8nICsgaXRlbS5maWxlTmFtZSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaGFuZGxlRmlsZVByZXZpZXcoaW5kZXgsIGl0ZW0sIHRoaXMuZmlsZUxpc3QpOwogICAgICB9CiAgICB9LAoKICAgIC8qKgogICAgICog5omT5byA55uu5b2VCiAgICAgKiBAcGFyYW0gaW5kZXgg6YCJ5oup55qE5paH5Lu257Si5byVCiAgICAgKiBAcGFyYW0gcGF0aCDlvZPliY3pgInkuK3nmoTmlofku7bnm67lvZUg5aaC5qC555uu5b2V5LiL55qEICfmiJHnmoTpn7PkuZAn5Li6ICcv5oiR55qE6Z+z5LmQJwogICAgICogQHBhcmFtIGUg54K55Ye75LqL5Lu2CiAgICAgKi8KICAgIGVudGVyRm9sZGVyOiBmdW5jdGlvbiBlbnRlckZvbGRlcihpbmRleCwgcGF0aCkgewogICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy5zZWxlY3RlZEZpbGVDb3VudCA9IDA7CiAgICAgIHRoaXMuc2VsZWN0QWxsRmlsZXMgPSBmYWxzZTsKICAgICAgdmFyIHByZVBhdGggPSAnJzsgLy8g5Zyo5qC555uu5b2V5LiLIOebruW9leWJjee8gOS4uiAnLycs5YiZ6YeN572u5YmN57yA5Li656m6LOeUseS6juWPguaVsHBhdGjmmK/luKYgJy8n55qELOmYsuatouebruW9leWkmuS4gOS4qicvJwoKICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLmZ1bGxQYXRoID09PSAnLycpIHsKICAgICAgICBwcmVQYXRoID0gJyc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcHJlUGF0aCA9IHRoaXMuJHN0b3JlLnN0YXRlLmZ1bGxQYXRoOwogICAgICB9CgogICAgICB0aGlzLmZ1bGxQYXRoID0gcHJlUGF0aCArIHBhdGg7CiAgICAgIHRoaXMuY3VycmVudFBhdGggPSBwYXRoOyAvLyBjb25zb2xlLmxvZygnZnVsbFBhdGg6JyArIHRoaXMuZnVsbFBhdGgpCiAgICAgIC8vIGNvbnNvbGUubG9nKCdjdXJyZW50UGF0aDonICsgdGhpcy5jdXJyZW50UGF0aCkKCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAnL2luZGV4JywKICAgICAgICBxdWVyeTogewogICAgICAgICAgY2F0ZWdvcnk6ICdhbGwnLAogICAgICAgICAgZmlsZVBhdGg6IHRoaXMuZnVsbFBhdGgKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWkjeWItuaWh+S7tgogICAgY29weUZpbGU6IGZ1bmN0aW9uIGNvcHlGaWxlKCkgewogICAgICB2YXIgX3RoaXMxMiA9IHRoaXM7CgogICAgICB0aGlzLiRmaWxlU2VsZWN0b3IoewogICAgICAgIHRpdGxlOiAn5aSN5Yi25paH5Lu2JywKICAgICAgICB1c2VySW5mbzogdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8sCiAgICAgICAgb25seUZvbGRlcjogdHJ1ZSwKICAgICAgICBzaG93OiB0cnVlCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKCdyZXM6JywgcmVzKTsKCiAgICAgICAgaWYgKF90aGlzMTIuc2VsZWN0ZWRGaWxlQ291bnQgPT09IDEgJiYgX3RoaXMxMi5maWxlTGlzdFtfdGhpczEyLnNlbGVjdEZpbGVJbmRleF0uaXNEaXIgIT09IDEpIHsKICAgICAgICAgIGlmIChyZXMuZmlsZVBhdGggPT0gX3RoaXMxMi5maWxlTGlzdFtfdGhpczEyLnNlbGVjdEZpbGVJbmRleF0uZmlsZVBhdGgpIHsKICAgICAgICAgICAgX3RoaXMxMi4kdG9hc3QuZXJyb3IoJ+S4jeiDveWkjeWItuWIsOW9k+WJjeebruW9lScpOwoKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICB1c2VySWQ6IF90aGlzMTIuZ2V0Q29va2llcygndWlkJyksCiAgICAgICAgICAgIGZpbGVQYXRoOiByZXMuZmlsZVBhdGgsCiAgICAgICAgICAgIGZpbGVJZDogX3RoaXMxMi5maWxlTGlzdFtfdGhpczEyLnNlbGVjdEZpbGVJbmRleF0uaWQKICAgICAgICAgIH07CgogICAgICAgICAgX2NvcHlGaWxlKGRhdGEsIHRydWUpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwoKICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAwKSB7CiAgICAgICAgICAgICAgX3RoaXMxMi5zZWxlY3RlZEZpbGUgPSBuZXcgQXJyYXkoX3RoaXMxMi5maWxlTGlzdC5sZW5ndGgpLmZpbGwoZmFsc2UpOwoKICAgICAgICAgICAgICBfdGhpczEyLiR0b2FzdC5zdWNjZXNzKHJlcy5tc2cpOwoKICAgICAgICAgICAgICBfdGhpczEyLmdldEZpbGVMaXN0KF90aGlzMTIuZnVsbFBhdGgsIHRydWUpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIF90aGlzMTIuJHRvYXN0LmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKHJlcy5maWxlUGF0aCA9PSBfdGhpczEyLnNlbGVjdEZpbGVMaXN0WzBdLmZpbGVQYXRoKSB7CiAgICAgICAgICAgIF90aGlzMTIuJHRvYXN0LmVycm9yKCfkuI3lpI3liLbliLDlvZPliY3nm67lvZUnKTsKCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgX2RhdGEgPSB7CiAgICAgICAgICAgIC8vIHVzZXJJZDogdGhpcy5nZXRDb29raWVzKCd1aWQnKSwKICAgICAgICAgICAgZmlsZVBhdGg6IHJlcy5maWxlUGF0aCwKICAgICAgICAgICAgZmlsZUxpc3Q6IF90aGlzMTIuc2VsZWN0RmlsZUxpc3QKICAgICAgICAgIH07CiAgICAgICAgICBiYXRjaENvcHlGaWxlKF9kYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAwKSB7CiAgICAgICAgICAgICAgX3RoaXMxMi5nZXRGaWxlTGlzdChfdGhpczEyLmZ1bGxQYXRoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfdGhpczEyLiR0b2FzdC5lcnJvcihyZXMubXNnKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICBjb25zb2xlLmxvZygn5om56YeP5aSN5Yi2Jyk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgfSk7IC8vIHRoaXMuJGNvbmZpcm1Cb3goewogICAgICAvLyAgIHRpdGxlOiAn5aSN5Yi25paH5Lu2JywKICAgICAgLy8gICBzaG93VHlwZTogMQogICAgICAvLyB9KQogICAgICAvLyAgIC50aGVuKCgpID0+IHsKICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCflpI3liLbmlofku7bmjqXlj6PosIPnlKgnKQogICAgICAvLyAgICAgaWYgKHRoaXMuc2VsZWN0ZWRGaWxlQ291bnQgPT09IDEgJiYgdGhpcy5maWxlTGlzdFt0aGlzLnNlbGVjdEZpbGVJbmRleF0uaXNEaXIgIT09IDEpIHsKICAgICAgLy8gICAgICAgY29uc3QgZGF0YSA9IHsKICAgICAgLy8gICAgICAgICBmaWxlUGF0aDogdGhpcy4kc3RvcmUuc3RhdGUuY29weU1vdmVQYXRoLAogICAgICAvLyAgICAgICAgIGZpbGVJZDogdGhpcy5maWxlTGlzdFt0aGlzLnNlbGVjdEZpbGVJbmRleF0uaWQKICAgICAgLy8gICAgICAgfQogICAgICAvLyAgICAgICBjb3B5RmlsZShkYXRhLCB0cnVlKS50aGVuKChyZXMpID0+IHsKICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZyhyZXMpCiAgICAgIC8vICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAwKSB7CiAgICAgIC8vICAgICAgICAgICB0aGlzLnNlbGVjdGVkRmlsZSA9IG5ldyBBcnJheSh0aGlzLmZpbGVMaXN0Lmxlbmd0aCkuZmlsbChmYWxzZSkKICAgICAgLy8gICAgICAgICAgIHRoaXMuJHRvYXN0LnN1Y2Nlc3MocmVzLm1zZykKICAgICAgLy8gICAgICAgICAgIHRoaXMuZ2V0RmlsZUxpc3QodGhpcy5mdWxsUGF0aCwgdHJ1ZSkKICAgICAgLy8gICAgICAgICB9IGVsc2UgewogICAgICAvLyAgICAgICAgICAgdGhpcy4kdG9hc3QuZXJyb3IocmVzLm1zZykKICAgICAgLy8gICAgICAgICB9CiAgICAgIC8vICAgICAgIH0pCiAgICAgIC8vICAgICB9IGVsc2UgewogICAgICAvLyAgICAgICBjb25zdCBkYXRhID0gewogICAgICAvLyAgICAgICAgIGZpbGVQYXRoOiB0aGlzLiRzdG9yZS5zdGF0ZS5jb3B5TW92ZVBhdGgsCiAgICAgIC8vICAgICAgICAgZmlsZUxpc3Q6IHRoaXMuc2VsZWN0RmlsZUxpc3QKICAgICAgLy8gICAgICAgfQogICAgICAvLyAgICAgICBiYXRjaENvcHlGaWxlKGRhdGEpLnRoZW4oKHJlcykgPT4gewogICAgICAvLyAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMCkgewogICAgICAvLyAgICAgICAgICAgdGhpcy5nZXRGaWxlTGlzdCh0aGlzLmZ1bGxQYXRoKQogICAgICAvLyAgICAgICAgIH0gZWxzZSB7CiAgICAgIC8vICAgICAgICAgICB0aGlzLiR0b2FzdC5lcnJvcihyZXMubXNnKQogICAgICAvLyAgICAgICAgIH0KICAgICAgLy8gICAgICAgfSkKICAgICAgLy8gICAgICAgY29uc29sZS5sb2coJ+aJuemHj+WkjeWIticpCiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgfSkKICAgICAgLy8gICAuY2F0Y2goKCkgPT4gewogICAgICAvLyAgIH0pCiAgICB9LAogICAgLy8g56e75Yqo5paH5Lu2CiAgICBtb3ZlRmlsZTogZnVuY3Rpb24gbW92ZUZpbGUoKSB7CiAgICAgIHZhciBfdGhpczEzID0gdGhpczsKCiAgICAgIHRoaXMuJGZpbGVTZWxlY3Rvcih7CiAgICAgICAgdGl0bGU6ICfnp7vliqjmlofku7YnLAogICAgICAgIHVzZXJJbmZvOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mbywKICAgICAgICBvbmx5Rm9sZGVyOiB0cnVlLAogICAgICAgIHNob3c6IHRydWUKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2coJ3JlczonLCByZXMpOwoKICAgICAgICBpZiAoX3RoaXMxMy5zZWxlY3RlZEZpbGVDb3VudCA9PT0gMSAmJiBfdGhpczEzLmZpbGVMaXN0W190aGlzMTMuc2VsZWN0RmlsZUluZGV4XS5pc0RpciAhPT0gMSkgewogICAgICAgICAgLy8gbGV0IGZpbGVzCiAgICAgICAgICAvLyB0aGlzLmZpbGVMaXN0LmZpbHRlcigoaXRlbSxpbmRleCkgPT4gaXRlbSkKICAgICAgICAgIGlmIChyZXMuZmlsZVBhdGggPT0gX3RoaXMxMy5maWxlTGlzdFtfdGhpczEzLnNlbGVjdEZpbGVJbmRleF0uZmlsZVBhdGgpIHsKICAgICAgICAgICAgX3RoaXMxMy4kdG9hc3QuZXJyb3IoJ+S4jeiDveenu+WKqOWIsOW9k+WJjeebruW9lScpOwoKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICB1c2VySWQ6IF90aGlzMTMuZ2V0Q29va2llcygndWlkJyksCiAgICAgICAgICAgIGZpbGVJZDogX3RoaXMxMy5maWxlTGlzdFtfdGhpczEzLnNlbGVjdEZpbGVJbmRleF0uaWQsCiAgICAgICAgICAgIGZpbGVQYXRoOiByZXMuZmlsZVBhdGgKICAgICAgICAgIH07CgogICAgICAgICAgX21vdmVGaWxlKGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwoKICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAwKSB7CiAgICAgICAgICAgICAgX3RoaXMxMy5nZXRGaWxlTGlzdChfdGhpczEzLmZ1bGxQYXRoLCB0cnVlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfdGhpczEzLiR0b2FzdC5lcnJvcihyZXMubXNnKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBfZGF0YTIgPSB7CiAgICAgICAgICAgIC8vIHVzZXJJZDogdGhpcy5nZXRDb29raWVzKCd1aWQnKSwKICAgICAgICAgICAgZmlsZVBhdGg6IHJlcy5maWxlUGF0aCwKICAgICAgICAgICAgZmlsZUxpc3Q6IF90aGlzMTMuc2VsZWN0RmlsZUxpc3QKICAgICAgICAgIH07CiAgICAgICAgICBiYXRjaE1vdmVGaWxlKF9kYXRhMikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMCkgewogICAgICAgICAgICAgIF90aGlzMTMuZ2V0RmlsZUxpc3QoX3RoaXMxMy5mdWxsUGF0aCk7CgogICAgICAgICAgICAgIF90aGlzMTMuc2VsZWN0ZWRGaWxlLmxlbmd0aCA9IDA7CiAgICAgICAgICAgICAgX3RoaXMxMy5zZWxlY3RlZEZpbGVDb3VudCA9IDA7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgX3RoaXMxMy4kdG9hc3QuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOyAvLyDmibnph4/np7vliqgKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDph43lkb3lkI3mlofku7YKICAgIHJlbmFtZUZpbGU6IGZ1bmN0aW9uIHJlbmFtZUZpbGUoKSB7CiAgICAgIHZhciBfdGhpczE0ID0gdGhpczsKCiAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnc2VuZE9wZXJhdGlvbkZpbGUnLCB0aGlzLmZpbGVMaXN0W3RoaXMuc2VsZWN0RmlsZUluZGV4XSk7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgndXBkYXRlUmVuYW1lRmlsZU5hbWUnLCB0aGlzLmZpbGVMaXN0W3RoaXMuc2VsZWN0RmlsZUluZGV4XS5maWxlTmFtZSk7CiAgICAgIEJ1cy4kZW1pdCgnZmlsZU5hbWUnLCB0aGlzLmZpbGVMaXN0W3RoaXMuc2VsZWN0RmlsZUluZGV4XS5maWxlTmFtZSk7CiAgICAgIHRoaXMuJGNvbmZpcm1Cb3goewogICAgICAgIHRpdGxlOiAn6YeN5ZG95ZCN5paH5Lu2JywKICAgICAgICBzaG93VHlwZTogMywKICAgICAgICBmaWxlOiB0aGlzLmZpbGVMaXN0W3RoaXMuc2VsZWN0RmlsZUluZGV4XSwKICAgICAgICBvcGVyYXRpb246ICdyZW5hbWUnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7IC8vIHZhciBmaWxlTmFtZSA9IHRoaXMuZmlsZUxpc3RbdGhpcy5zZWxlY3RGaWxlSW5kZXhdLmZpbGVFeHQgIT09IG51bGwKICAgICAgICAvLyAgID8gdGhpcy4kc3RvcmUuc3RhdGUucmVuYW1lRmlsZU5hbWUgKyAnLicgKyB0aGlzLmZpbGVMaXN0W3RoaXMuc2VsZWN0RmlsZUluZGV4XS5maWxlRXh0IDogdGhpcy4kc3RvcmUuc3RhdGUucmVuYW1lRmlsZU5hbWUKCiAgICAgICAgaWYgKHJlcy5maWxlTmFtZSA8PSAwKSB7CiAgICAgICAgICBfdGhpczE0LiR0b2FzdC5lcnJvcign5paH5Lu25ZCN5LiN6IO95Li656m6Jyk7CgogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICB1c2VySWQ6IF90aGlzMTQuZ2V0Q29va2llcygndWlkJyksCiAgICAgICAgICBmaWxlSWQ6IF90aGlzMTQuZmlsZUxpc3RbX3RoaXMxNC5zZWxlY3RGaWxlSW5kZXhdLmlkLAogICAgICAgICAgZmlsZU5hbWU6IHJlcy5maWxlTmFtZSwKICAgICAgICAgIGZpbGVQYXRoOiByZXMuZmlsZVBhdGgsCiAgICAgICAgICBpc0RpcjogX3RoaXMxNC5maWxlTGlzdFtfdGhpczE0LnNlbGVjdEZpbGVJbmRleF0uaXNEaXIKICAgICAgICB9OwoKICAgICAgICBfcmVuYW1lRmlsZShkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CgogICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAwKSB7CiAgICAgICAgICAgIF90aGlzMTQuZ2V0RmlsZUxpc3QoX3RoaXMxNC5mdWxsUGF0aCwgdHJ1ZSk7CgogICAgICAgICAgICBfdGhpczE0LiR0b2FzdC5zdWNjZXNzKHJlcy5tc2cpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMxNC4kdG9hc3QuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHt9KTsKICAgIH0sCiAgICAvLyDliKDpmaTmlofku7Yg5Y2V5LiqCiAgICBkZWxldGVGaWxlOiBmdW5jdGlvbiBkZWxldGVGaWxlKCkgewogICAgICB2YXIgX3RoaXMxNSA9IHRoaXM7CgogICAgICB0aGlzLiRjb25maXJtQm94KHsKICAgICAgICB0aXRsZTogJ+WIoOmZpOaWh+S7ticsCiAgICAgICAgbXNnOiAn56Gu5a6a5Yig6Zmk6L+ZJyArIHRoaXMuJHN0b3JlLnN0YXRlLnNlbGVjdEZpbGVDb3VudCArICfkuKrpobnnm67lkJcnLAogICAgICAgIHNob3dUeXBlOiAwCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnNvbGUubG9nKCfnoa7orqTliKDpmaQnKTsKCiAgICAgICAgaWYgKF90aGlzMTUuc2VsZWN0ZWRGaWxlQ291bnQgPT09IDEpIHsKICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICB1c2VySWQ6IF90aGlzMTUuZ2V0Q29va2llcygndWlkJyksCiAgICAgICAgICAgIGlkOiBfdGhpczE1LmZpbGVMaXN0W190aGlzMTUuc2VsZWN0RmlsZUluZGV4XS5pZAogICAgICAgICAgfTsKCiAgICAgICAgICBfZGVsZXRlRmlsZShkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKCiAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMCkgewogICAgICAgICAgICAgIF90aGlzMTUuaW5pdCgpOwoKICAgICAgICAgICAgICBfdGhpczE1LiRzdG9yZS5jb21taXQoJ3VwZGF0ZVVzZXJTdG9yYWdlJywgcmVzLmRhdGEudXNlclN0b3JhZ2UpOwoKICAgICAgICAgICAgICBpZiAoX3RoaXMxNS4kcm91dGUucXVlcnkuY2F0ZWdvcnkgPT09ICdhbGwnKSB7CiAgICAgICAgICAgICAgICBfdGhpczE1LmdldEZpbGVMaXN0KF90aGlzMTUuZnVsbFBhdGgsIHRydWUpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfdGhpczE1LmdldEZpbGVMaXN0QnlUeXBlKF90aGlzMTUuJHJvdXRlLnF1ZXJ5LmNhdGVnb3J5KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF90aGlzMTUuJHRvYXN0LnN1Y2Nlc3MoJ+WIoOmZpOaIkOWKnycpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIF90aGlzMTUuJHRvYXN0LmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8g5om56YeP5Yig6ZmkCiAgICAgICAgICAvLyBjb25zdCBkYXRhID0gewogICAgICAgICAgLy8gICAvLyB0aGlzLnNlbGVjdEZpbGVJZExpc3QKICAgICAgICAgIC8vICAgLy8gZmlsZVBhdGg6IHRoaXMuZmlsZVBhdGgsCiAgICAgICAgICAvLyB9CiAgICAgICAgICBiYXRjaERlbGV0ZUZpbGUoX3RoaXMxNS5zZWxlY3RGaWxlSWRMaXN0KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKCiAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMCkgewogICAgICAgICAgICAgIF90aGlzMTUuZ2V0RmlsZUxpc3QoX3RoaXMxNS5mdWxsUGF0aCwgdHJ1ZSk7CgogICAgICAgICAgICAgIF90aGlzMTUuc2VsZWN0ZWRGaWxlID0gbmV3IEFycmF5KF90aGlzMTUuZmlsZUxpc3QubGVuZ3RoKS5maWxsKGZhbHNlKTsKCiAgICAgICAgICAgICAgX3RoaXMxNS4kdG9hc3Quc3VjY2Vzcygn5Yig6Zmk5oiQ5YqfJyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgX3RoaXMxNS4kdG9hc3QuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge30pOwogICAgfSwKICAgIC8vIOWIhuS6q+aWh+S7tgogICAgc2hhcmVGaWxlOiBmdW5jdGlvbiBzaGFyZUZpbGUoKSB7CiAgICAgIHZhciBfdGhpczE2ID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkRmlsZUNvdW50ID4gMSkgewogICAgICAgIHRoaXMuJHRvYXN0LmVycm9yKCfor7fpgInmi6nkuIDkuKrmlofku7bmiJbmlofku7blpLnliIbkuqsnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuJGNvbmZpcm1Cb3goewogICAgICAgIHRpdGxlOiAn5YiG5Lqr5paH5Lu2JywKICAgICAgICBzaG93VHlwZTogNCwKICAgICAgICBmaWxlOiB0aGlzLmZpbGVMaXN0W3RoaXMuc2VsZWN0RmlsZUluZGV4XQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChwKSB7CiAgICAgICAgY29uc29sZS5sb2coJ3AuZXhwaXJlZFRpbWUnICsgcC5leHBpcmVkVGltZSk7CgogICAgICAgIGlmIChfdGhpczE2LnNlbGVjdGVkRmlsZUNvdW50ID09PSAxKSB7CiAgICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgICAgaWQ6IF90aGlzMTYuZmlsZUxpc3RbX3RoaXMxNi5zZWxlY3RGaWxlSW5kZXhdLmlkCiAgICAgICAgICB9OwoKICAgICAgICAgIF9zaGFyZUZpbGUoZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CgogICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09IDApIHsKICAgICAgICAgICAgICBfdGhpczE2LmdldEZpbGVMaXN0KF90aGlzMTYuZnVsbFBhdGgpOwoKICAgICAgICAgICAgICBfdGhpczE2LiR0b2FzdCgn5YiG5Lqr5oiQ5YqfJyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgX3RoaXMxNi4kdG9hc3QuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyDmibnph4/liIbkuqsKICAgICAgICAgIHZhciBfZGF0YTMgPSB7CiAgICAgICAgICAgIGZpbGVMaXN0OiBfdGhpczE2LnNlbGVjdEZpbGVJZExpc3QKICAgICAgICAgIH07CgogICAgICAgICAgX3NoYXJlRmlsZShfZGF0YTMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwoKICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAwKSB7CiAgICAgICAgICAgICAgX3RoaXMxNi5nZXRGaWxlTGlzdChfdGhpczE2LmZ1bGxQYXRoKTsKCiAgICAgICAgICAgICAgX3RoaXMxNi5zZWxlY3RlZEZpbGUgPSBuZXcgQXJyYXkoX3RoaXMxNi5maWxlTGlzdC5sZW5ndGgpLmZpbGwoZmFsc2UpOwoKICAgICAgICAgICAgICBfdGhpczE2LiR0b2FzdC5zdWNjZXNzKCfliIbkuqvmiJDlip8nKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfdGhpczE2LiR0b2FzdC5lcnJvcihyZXMubXNnKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7CiAgICB9LAogICAgLy8g5paH5Lu25bGV56S65pa55byPCiAgICBzZWxlY3REaXNwbGF5TW9kZTogZnVuY3Rpb24gc2VsZWN0RGlzcGxheU1vZGUobW9kZSkgewogICAgICB0aGlzLnNob3dDcmVhdGVGb2xkZXIgPSBmYWxzZTsKCiAgICAgIGlmIChtb2RlID09ICdibG9jaycpIHsKICAgICAgICB0aGlzLmRpc3BsYXlNb2RlID0gJ2xpc3QnOwogICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZGlzcGxheScsICdsaXN0Jyk7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCd1cGRhdGVEaXNwbGF5TW9kZScsICdsaXN0Jyk7CiAgICAgIH0gZWxzZSBpZiAobW9kZSA9PSAnbGlzdCcpIHsKICAgICAgICB0aGlzLmRpc3BsYXlNb2RlID0gJ2Jsb2NrJzsKICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2Rpc3BsYXknLCAnYmxvY2snKTsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3VwZGF0ZURpc3BsYXlNb2RlJywgJ2Jsb2NrJyk7CiAgICAgIH0KICAgIH0sCiAgICB0b29sT3BlcmF0aW9uOiBmdW5jdGlvbiB0b29sT3BlcmF0aW9uKGl0ZW1NZXRob2RzKSB7CiAgICAgIHRoaXNbaXRlbU1ldGhvZHNdKCk7CiAgICB9LAogICAgZmlsZU9wdGlvbjogZnVuY3Rpb24gZmlsZU9wdGlvbihpdGVtTWV0aG9kcykgewogICAgICB0aGlzW2l0ZW1NZXRob2RzXSgpOwogICAgfSwKICAgIC8vIOiOt+WPluaWh+S7tuWIl+ihqCjpgJrov4flhajot6/lvoQpCiAgICAvLyBhc3luYyBnZXRGaWxlTGlzdCAocGF0aCwgaXNSZWZyZXNoKSB7CiAgICAvLyAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlCiAgICAvLyAgIHRoaXMuc2VsZWN0QWxsRmlsZXMgPSBmYWxzZQogICAgLy8gICB0aGlzLmZpbGVMaXN0Lmxlbmd0aCA9IDAKICAgIC8vICAgdGhpcy5zb3J0RmlsZUxpc3QubGVuZ3RoID0gMAogICAgLy8KICAgIC8vICAgaWYgKHBhdGggPT09IHRoaXMuJHJvdXRlLnF1ZXJ5LmZpbGVQYXRoKSB7CiAgICAvLyAgICAgdGhpcy5zZWxlY3RlZEZpbGVDb3VudCA9IDAKICAgIC8vICAgfQogICAgLy8gICBjb25zdCBkYXRhID0gewogICAgLy8gICAgIGZpbGVQYXRoOiBwYXRoID09PSAnJyA/ICcvJyA6IHBhdGgsCiAgICAvLyAgICAgcmVmcmVzaDogISFpc1JlZnJlc2gKICAgIC8vICAgfQogICAgLy8gICBnZXRGaWxlTGlzdEJ5UGF0aChkYXRhKS50aGVuKChyZXMpID0+IHsKICAgIC8vICAgICBpZiAocmVzLmNvZGUgPT09IDApIHsKICAgIC8vICAgICAgIHRoaXMuaW5pdCgpCiAgICAvLyAgICAgICB0aGlzLmZpbGVMaXN0ID0gcmVzLmRhdGEubGlzdAogICAgLy8gICAgICAgY29uc29sZS5sb2coSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXMuZGF0YS5saXN0KSkpCiAgICAvLyAgICAgICAvLyDojrflj5bpppbpobXlm77niYcKICAgIC8vICAgICAgIHRoaXMuaW1hZ2VMaXN0ID0gdGhpcy5maWxlTGlzdC5maWx0ZXIoaXRlbSA9PiBpdGVtLmZpbGVUeXBlID09PSAxKQogICAgLy8gICAgICAgLy8g5YWz6Zet5Yqo55S7CiAgICAvLyAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2UKICAgIC8vICAgICAgIHRoaXMuc29ydEZpbGVMaXN0ID0gdGhpcy5maWxlTGlzdC5zb3J0KHRoaXMuY29tcGFyZSgnaXNEaXInLCAtMSkpCiAgICAvLyAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3VwZGF0ZUZpbGVMaXN0JywgdGhpcy5maWxlTGlzdCkKICAgIC8vICAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gbmV3IEFycmF5KHRoaXMuZmlsZUxpc3QubGVuZ3RoKS5maWxsKGZhbHNlKQogICAgLy8gICAgIH0gZWxzZSB7CiAgICAvLyAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2UKICAgIC8vICAgICAgIGlmIChyZXMuY29kZSA9PT0gNDAxKSB7CiAgICAvLyAgICAgICAgIHRoaXMuJHRvYXN0LmVycm9yKHJlcy5tc2cpCiAgICAvLyAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvbG9naW4nKQogICAgLy8gICAgICAgfQogICAgLy8gICAgIH0KICAgIC8vICAgfSkKICAgIC8vIH0sCiAgICAvLyDojrflj5bmlofku7bliJfooago6YCa6L+H5paH5Lu25YiG57G7KQogICAgZ2V0RmlsZUxpc3RCeVR5cGU6IGZ1bmN0aW9uIGdldEZpbGVMaXN0QnlUeXBlKHR5cGUpIHsKICAgICAgdmFyIF90aGlzMTcgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIGRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgIGZpbGVUeXBlOiBfdGhpczE3LiRyb3V0ZS5xdWVyeS5jYXRlZ29yeSwKICAgICAgICAgICAgICAgICAgY3VycmVudFBhZ2U6IF90aGlzMTcuJHN0b3JlLnN0YXRlLmN1cnJlbnRQYWdlLAogICAgICAgICAgICAgICAgICBwYWdlQ291bnQ6IF90aGlzMTcuJHN0b3JlLnN0YXRlLnBhZ2VDb3VudAogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBfZ2V0RmlsZUxpc3RCeVR5cGUoZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CgogICAgICAgICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczE3LmZpbGVMaXN0Lmxlbmd0aCA9IDA7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMxNy5zb3J0RmlsZUxpc3QgPSAwOwogICAgICAgICAgICAgICAgICAgIF90aGlzMTcuZmlsZUxpc3QgPSByZXMuZGF0YS5saXN0OwogICAgICAgICAgICAgICAgICAgIF90aGlzMTcuc29ydEZpbGVMaXN0ID0gcmVzLmRhdGEubGlzdDsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXMxNy4kc3RvcmUuY29tbWl0KCd1cGRhdGVGaWxlTGlzdCcsIF90aGlzMTcuZmlsZUxpc3QpOwoKICAgICAgICAgICAgICAgICAgICBfdGhpczE3LnNlbGVjdGVkRmlsZSA9IG5ldyBBcnJheShfdGhpczE3LmZpbGVMaXN0Lmxlbmd0aCkuZmlsbChmYWxzZSk7IC8vIHRoaXMucGFnZURhdGEudG90YWwgPSByZXMuZGF0YS50b3RhbAogICAgICAgICAgICAgICAgICAgIC8vIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgLy8g6K6h566X5oC76aG15pWwCiAgICAgICAgICAgICAgICAgICAgLy8g5YWz6Zet5Yqo55S7CgogICAgICAgICAgICAgICAgICAgIF90aGlzMTcuc2hvd0xvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzMTcudG90YWwgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTcudG90YWwgPSByZXMuZGF0YS50b3RhbDsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTcucGFnZUNvdW50ID0gTWF0aC5jZWlsKF90aGlzMTcudG90YWwgLyBfdGhpczE3LiRzdG9yZS5zdGF0ZS5wYWdlU2l6ZSk7CiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5oC76aG15pWwJyArIF90aGlzMTcucGFnZUNvdW50KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMxNy4kdG9hc3QuZXJyb3IocmVzLm1zZyk7CgogICAgICAgICAgICAgICAgICAgIF90aGlzMTcuc2hvd0xvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXMxNy4kdG9hc3QuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyDliJvlu7rmlofku7blpLkKICAgIGNyZWF0ZUZvbGRlcjogZnVuY3Rpb24gY3JlYXRlRm9sZGVyKCkgewogICAgICB0aGlzLnNob3dDcmVhdGVGb2xkZXIgPSB0cnVlOwogICAgICB0aGlzLmNyZWF0ZUZvbGRlck5hbWUgPSAnJzsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuJHJlZnMuY3JlYXRlRm9sZGVySW5wdXQuZm9jdXMoKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5Yib5bu65Zyo57q/5paH5qGjCiAgICBjcmVhdGVEb2N1bWVudDogZnVuY3Rpb24gY3JlYXRlRG9jdW1lbnQoKSB7CiAgICAgIGNvbnNvbGUubG9nKCfliJvlu7rlnKjnur/mlofmoaMnKTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICcvZXhjZWwnLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICBjcmVhdGU6ICdzaGVldCcsCiAgICAgICAgICB0eXBlOiAyCiAgICAgICAgfQogICAgICB9KTsgLy8gVnVlLnByb3RvdHlwZS4kcHJldmlld0V4Y2VsKHsgZmlsZUluZm86IDAgfSkKICAgIH0sCiAgICAvLyDnprvnur/kuIvovb0KICAgIG9mZmxpbmVEb3dubG9hZDogZnVuY3Rpb24gb2ZmbGluZURvd25sb2FkKCkgewogICAgICB2YXIgX3RoaXMxOCA9IHRoaXM7CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy4kY29uZmlybUJveCh7CiAgICAgICAgdGl0bGU6ICfliJvlu7rnprvnur/kuIvovb0nLAogICAgICAgIHNob3dUeXBlOiAzLAogICAgICAgIG9wZXJhdGlvbjogJ29mZmxpbmVEb3dubG9hZCcsCiAgICAgICAgeWVzQnRuVGV4dDogJ+WIm+W7uuS4i+i9veS7u+WKoScKICAgICAgfSkudGhlbihmdW5jdGlvbiAocCkgewogICAgICAgIGNvbnNvbGUubG9nKHAudXJsKTsKCiAgICAgICAgaWYgKCFfdGhpczE4LmNoZWNrVXJsKHAudXJsKSkgewogICAgICAgICAgX3RoaXMxOC4kdG9hc3QuZXJyb3IoJ+ivt+i+k+WFpeato+ehrueahOS4i+i9vemTvuaOpScpOwoKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIF90aGlzLnJlbW90ZVRhc2sgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKCiAgICAgICAgX3RoaXMxOC4kdG9hc3Quc3VjY2Vzcygn56a757q/5LiL6L295Lu75Yqh5byA5aeLLi4uJywgLTEpOyAvLyDliJvlu7rnprvnur/kuIvovb3ov5vluqbmm7TmlrDlrprml7blmagKCgogICAgICAgIG9mZmxpbmVUaW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBfdGhpczE5ID0gdGhpczsKCiAgICAgICAgICAvLyDmr48156eS5Yi35paw5LiA5qyhCiAgICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgICAgdHlwZTogJ3JlbW90ZScsCiAgICAgICAgICAgIHVybDogcC51cmwsCiAgICAgICAgICAgIHQ6IF90aGlzLnJlbW90ZVRhc2sKICAgICAgICAgIH07CiAgICAgICAgICBnZXRQcm9ncmVzcyhkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgaWYgKF90aGlzLm9mZmxpbmVGaWxlLmZpbGVOYW1lICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICBCdXMuJGVtaXQoJ3RvYXN0TXNnJywgX3RoaXMub2ZmbGluZUZpbGUuZmlsZU5hbWUgKyAnIOS4i+i9vei/m+W6pjogJyArIHJlcy5kYXRhLnByb2dyZXNzICsgJyUnKTsKICAgICAgICAgICAgfSAvLyBCdXMuJGVtaXQoJ3VwZGF0ZUxvYWRpbmdUZXh0JywgcmVzLmRhdGEucHJvZ3Jlc3MgPj0gMTAwID8gJ+S4i+i9veWujOaIkCcgOiAn5LiL6L296L+b5bqmOiAnICsgcmVzLmRhdGEucHJvZ3Jlc3MgKyAnJScpCgoKICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnByb2dyZXNzID49IDEwMCkgewogICAgICAgICAgICAgIEJ1cy4kZW1pdCgndG9hc3RNc2cnLCBfdGhpcy5vZmZsaW5lRmlsZS5maWxlTmFtZSArICcg5LiL6L295a6M5oiQJyk7CiAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChvZmZsaW5lVGltZXIpOwoKICAgICAgICAgICAgICBfdGhpcy5nZXRGaWxlTGlzdChfdGhpczE5LmZ1bGxQYXRoKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMuY29kZSAhPT0gMCkgewogICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwob2ZmbGluZVRpbWVyKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSwgMzAwMCk7CiAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICB1cmw6IHAudXJsLAogICAgICAgICAgdDogX3RoaXMucmVtb3RlVGFzaywKICAgICAgICAgIHR5cGU6ICdyZW1vdGUnCiAgICAgICAgfTsgLy8g5Yib5bu656a757q/5LiL6L295Lu75YqhCgogICAgICAgIGNyZWF0ZU9mZmxpbmUoZGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwoKICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMCkgewogICAgICAgICAgICAvLyB0aGlzLiR0b2FzdC5zdWNjZXNzKHJlcy5tc2cpCiAgICAgICAgICAgIF90aGlzMTgub2ZmbGluZUZpbGUgPSByZXMuZGF0YTsKICAgICAgICAgICAgQnVzLiRlbWl0KCd0b2FzdE1zZycsICfkuIvovb3ku7vliqE6ICcgKyBfdGhpczE4Lm9mZmxpbmVGaWxlLmZpbGVOYW1lICsgJyDliJvlu7rmiJDlip8nKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzMTguJHRvYXN0LmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7CiAgICB9LAogICAgY3JlYXRlRm9sZGVyQWN0aW9uOiBmdW5jdGlvbiBjcmVhdGVGb2xkZXJBY3Rpb24oKSB7CiAgICAgIHZhciBfdGhpczIwID0gdGhpczsKCiAgICAgIC8vIHZhciBmbGFnID0gbmV3IFJlZ0V4cCgnW2B+IUAjJF4mKigpPXx7fVwnOjtcJyxcXFtcXF0uPD48Pi8/fiFAI++/peKApuKApiYqKClffHt944CQ44CRJzs6IiJcJy4s44CBPyBdJykKICAgICAgLy8gdmFyIGZsYWcgPSBuZXcgUmVnRXhwKCdbYH4hQCMkXiYqKCk9fHt9XCc6O1wnLFxcW1xcXS48Pjw+Lz9+IUAj77+l4oCm4oCmJiooKV98e33jgJDjgJEnOzoiIlwnLizjgIE/IF0nKQogICAgICB2YXIgZmxhZyA9IG5ldyBSZWdFeHAoJ1tgfiFAIyReJiooKT18e31cJzo7XCcsXFxbXFxdLjw+44CK44CLLz9+77yBQCPvv6XigKbigKYmKu+8iO+8ieKAlOKAlHx7feOAkOOAkeKAmO+8m++8muKAneKAnFwn44CC77yM44CB77yfIF0nKTsgLy8g5Yik5pat5paH5Lu25ZCN5piv5ZCm5YyF5ZCr54m55q6K5a2X56ymCgogICAgICBpZiAoZmxhZy50ZXN0KHRoaXMuY3JlYXRlRm9sZGVyTmFtZSkpIHsKICAgICAgICB0aGlzLiR0b2FzdC5lcnJvcign5paH5Lu25aS55ZCN56ew5LiN6IO95YyF5ZCr54m55q6K5a2X56ymJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLmZpbGVOYW1lID0gdGhpcy50cmltKHRoaXMuY3JlYXRlRm9sZGVyTmFtZSwgJ2cnKTsKCiAgICAgIGlmICh0aGlzLmZpbGVOYW1lICE9PSAnJykgewogICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgZmlsZVBhdGg6IHRoaXMuJHN0b3JlLnN0YXRlLmZ1bGxQYXRoLAogICAgICAgICAgZmlsZU5hbWU6IHRoaXMuJHJlZnMuY3JlYXRlRm9sZGVySW5wdXQudmFsdWUsCiAgICAgICAgICBwYXJlbnRQYXRoSWQ6IHRoaXMuY3VycmVudEZpbGUuaWQKICAgICAgICB9OwogICAgICAgIGNyZWF0ZUZvbGRlcihkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CgogICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAwKSB7CiAgICAgICAgICAgIF90aGlzMjAuJHRvYXN0LnN1Y2Nlc3MoJ+aWsOW7uuaWh+S7tuWkueaIkOWKnycpOwoKICAgICAgICAgICAgX3RoaXMyMC5zaG93Q3JlYXRlRm9sZGVyID0gZmFsc2U7CgogICAgICAgICAgICBfdGhpczIwLmdldEZpbGVMaXN0KF90aGlzMjAuZnVsbFBhdGgsIHRydWUpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMyMC4kdG9hc3QuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kdG9hc3QuZXJyb3IoJ+aWh+S7tuWkueWQjeensOS4jeiDveS4uuepuizor7fovpPlhaXmlofku7blkI3np7AnKTsKICAgICAgfQogICAgfSwKICAgIHVwbG9hZE1vdXNlb3ZlcjogZnVuY3Rpb24gdXBsb2FkTW91c2VvdmVyKCkgewogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tbGlzdCcpLnN0eWxlLmRpc3BsYXkgPSAnJzsKICAgIH0sCiAgICB1cGxvYWRNb3VzZW91dDogZnVuY3Rpb24gdXBsb2FkTW91c2VvdXQoKSB7CiAgICAgIHRoaXMuJHJlZnMuZHJvcGRvd24uc3R5bGUgPSAnZGlzcGxheTpub25lJzsgLy8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duLWxpc3QnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnCiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["C:\\Users\\86191\\Desktop\\text\\Authentication_web\\src\\components\\index\\Index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"main-list\" :style=\"{'overflow':showMarkdown? 'hidden':'auto'}\">\n    <div class=\"file-list-toolbar__wrapper\">\n      <div\n        class=\"nd-file-list-toolbar nd-file-list-toolbar__actions inline-block-v-middle\"\n      >\n        <!--上传-->\n        <a\n          class=\"upload-button upload_wrapper\"\n          @mouseover=\"uploadMouseover\"\n          @mouseout=\"uploadMouseout\"\n        >\n          <button\n            trigger=\"hover\"\n            type=\"button\"\n            class=\"u-button upload-button nd-file-list-toolbar-action-item u-button--primary u-button--small is-round is-has-icon\"\n          >\n            <i class=\"iconfont icon-shangchuan\"></i>\n            <span class=\"upload_text\" @click=\"handleUploadFileBtnClick(1)\">上传</span>\n          </button>\n          <ul\n            class=\"dropdown-list nd-common-float-menu\"\n            style=\"display: none\"\n            ref=\"dropdown\"\n          >\n            <li\n              id=\"menu_uploader-file\"\n              class=\"sub cursor-p upload-wrapper\"\n              @click=\"handleUploadFileBtnClick(1)\"\n            >\n              上传文件\n            </li>\n            <li\n              id=\"menu_uploader-directory\"\n              class=\"sub cursor-p upload-wrapper\"\n              @click=\"handleUploadFileBtnClick(2)\"\n            >\n              上传文件夹\n            </li>\n            <li\n              id=\"menu_uploader-drag\"\n              class=\"sub cursor-p upload-wrapper\"\n              @click=\"handleUploadFileBtnClick(3)\"\n            >\n              拖拽上传\n            </li>\n          </ul>\n        </a>\n        <!--默认功能条-->\n        <div class=\"btn-group inline-block-v-middle theme-primary-text\" v-if=\"this.selectedFileCount===0\">\n          <button\n            type=\"button\"\n            class=\"u-button toolbar-item is-need-left-sep\"\n            @click=\"createFolder\"\n            v-show=\"$route.query.category === 'all'\"\n          >\n            <i class=\"iconfont icon-xinjianwenjianjia\"></i>\n            <span class=\"toolbar_text\">新建文件夹</span>\n          </button>\n\n          <!--<button-->\n          <!--  type=\"button\"-->\n          <!--  class=\"u-button toolbar-item is-need-left-sep\"-->\n          <!--  @click=\"createDocument\"-->\n          <!--  v-show=\"$route.query.category === 'all'\"-->\n          <!--&gt;-->\n          <!--  <i class=\"iconfont icon-xinjianwendang\"></i>-->\n          <!--  <span class=\"toolbar_text\">新建在线文档</span>-->\n          <!--</button>-->\n          <button\n            type=\"button\"\n            class=\"u-button toolbar-item is-need-left-sep\"\n            @click=\"offlineDownload\"\n            v-show=\"$route.query.category === 'all'\"\n          >\n            <i class=\"iconfont icon-xiazai\"></i>\n            <span class=\"toolbar_text\">离线下载</span>\n          </button>\n          <!--<button-->\n          <!--  type=\"button\"-->\n          <!--  :id=\"index\"-->\n          <!--  :method=\"item.methods\"-->\n          <!--  v-show=\"item.methods\"-->\n          <!--  class=\"u-button toolbar-item is-need-left-sep\"-->\n          <!--  v-for=\"(item, index) in defaultToolBarList\"-->\n          <!--  @click=\"toolOperation(item.methods)\"-->\n          <!--  :key=\"item.name\"-->\n          <!--&gt;-->\n          <!--  <i class=\"iconfont\" :class=\"item.iconClassName\"></i>-->\n          <!--  <span class=\"toolbar_text\">{{ item.name }}</span>-->\n          <!--</button>-->\n        </div>\n        <!--选中文件功能梯条-->\n        <div class=\"btn-group inline-block-v-middle theme-primary-text\" v-else>\n          <!--下载-->\n          <button\n            type=\"button\"\n            class=\"u-button toolbar-item is-need-left-sep\"\n          >\n            <a :href=\"getDownloadFilePath(this.fileList[this.selectFileIndex])\"\n               class=\"theme-primary-text\">\n              <i class=\"iconfont icon-xiazai\"></i>\n              <span class=\"toolbar_text theme-primary-text\">下载</span>\n            </a>\n          </button>\n          <!--重命名-->\n          <button class=\"u-button toolbar-item is-need-left-sep\"\n                  v-show=\"this.selectedFileCount === 1\"\n                  type=\"button\"\n                  @click=\"renameFile\"\n          >\n            <i class=\"iconfont icon-zhongmingming\"></i>\n            <span class=\"toolbar_text\">重命名</span>\n          </button>\n\n          <button\n            type=\"button\"\n            :id=\"index\"\n            class=\"u-button toolbar-item is-need-left-sep\"\n            v-for=\"(item, index) in fileToolBarList\"\n            @click=\"fileOption(item.methodName)\"\n            :key=\"item.name\"\n          >\n            <i class=\"iconfont\" :class=\"item.iconClassName\"></i>\n            <span class=\"toolbar_text\">{{ item.name }}</span>\n          </button>\n        </div>\n      </div>\n      <!--搜索-->\n      <div class=\"file-list-toolbar__search inline-block-v-middle\">\n        <div class=\"u-input u-input--primary u-input--small u-input--suffix\">\n          <input\n            type=\"text\"\n            class=\"search_input u-input__inner\"\n            placeholder=\"搜索我的文件\"\n            autocomplete=\"off\"\n            v-model=\"searchKeyWords\"\n            @keyup.enter=\"search()\"\n          />\n          <span class=\"u-input__suffix\">\n            <span class=\"u-input__suffix-inner\">\n              <i class=\"iconfont icon-sousuo\" v-if=\"$route.query.search === undefined\" @click=\"search\"></i>\n              <i class=\"iconfont icon-guanbi\" v-if=\"$route.query.search !== undefined\"\n                 @click=\"back('/'), searchKeyWords=''\"></i>\n            </span>\n          </span>\n        </div>\n      </div>\n    </div>\n    <!--文件路径导航条-->\n    <div class=\"main-list__nav file-main__nav grid\">\n      <!--导航条左-->\n      <div class=\"file-main__nav-left\">\n        <div v-if=\"$route.query.filePath !== undefined || $route.query.search !== undefined\">\n          <span class=\"file-selector__nav-item\">\n            <span\n              class=\"file-selector__nav-item-title text-ellip\"\n              @click=\"back($route.query.filePath)\"\n            >返回上一级</span\n            >\n            <span class=\"file-selector__nav-item-sep\">|</span>\n          </span>\n          <span class=\"file-selector__nav-item\">\n            <span\n              class=\"file-selector__nav-item-title text-ellip\"\n              @click=\"back('/')\"\n              :style=\"{'color':$route.query.search !== undefined? '#06a7ff !important':''}\"\n            >全部文件\n            </span>\n            <span class=\"file-selector__nav-item-sep\"\n            >></span>\n            <!--搜索导航显示-->\n          <span class=\"file-selector__nav-item\" v-if=\"searchKeyWords !== ''\">\n            <span class=\"file-selector__nav-item-sep\" style=\"display: inline-block\"\n            >></span>\n            <span\n              class=\"file-selector__nav-item-title text-ellip is-current-nav\">搜索:\n              {{ searchKeyWords }}\n            </span>\n          </span>\n          </span>\n          <template v-if=\"this.$route.query.filePath!== undefined\">\n            <span\n              class=\"file-selector__nav-item\"\n              v-for=\"(item, index) in this.$route.query.filePath.split('/').slice(1)\"\n              :key=\"item\"\n            >\n            <span\n              class=\"file-selector__nav-item-title text-ellip is-current-nav\"\n              :path=\"fullPath.split('/')\"\n              @click=\"navigate(index)\"\n              :index=\"index\"\n            >{{ item }}</span\n            >\n            <span class=\"file-selector__nav-item-sep\">></span>\n          </span>\n          </template>\n\n\n        </div>\n        <div v-if=\"$route.path === '/index'\">\n          <span class=\"title\">{{\n              this.getIndexPageTitle($route.query.category)\n            }}</span>\n        </div>\n      </div>\n      <!--导航条右-->\n      <div class=\"file-main__nav-right\">\n        <span class=\"file-main__nav-right-count\">\n          <template v-if=\"auditCount>0\">\n            已加载{{ this.sortFileList ? this.sortFileList.length : 0 }}个, {{ auditCount }}个未审核\n          </template>\n          <template v-else>\n            已全部加载,共{{ this.sortFileList ? this.sortFileList.length : 0 }}个\n          </template>\n        </span>\n        <i\n          class=\"iconfont cursor-p file-main__nav-right-icon inline-block-v-middle\"\n          :class=\"\n            displayMode === 'block'\n              ? 'icon-xianshifangshi_lie'\n              : 'icon-xianshifangshi_kuai'\n          \"\n          @click=\"selectDisplayMode(displayMode)\"\n        ></i>\n        <i class=\"iconfont icon-shuaxin cursor-p file-main__nav-right-icon inline-block-v-middle\"\n           @click=\"refreshFileList\" style=\"margin-left: 5px\" title=\"刷新文件列表\"></i>\n      </div>\n    </div>\n    <!--文件显示  缩略图显示-->\n    <div class=\"file-grid-list clearfix main-list__grid\"\n         v-show=\"displayMode === 'block'\"\n    >\n      <!--文件选择提示-->\n      <div class=\"file-grid-list__nav\">\n        <label\n          class=\"u-checkbox nd-file-grid-list__select-all\"\n          :class=\"selectAllFiles === true ? 'is-checked' : ''\"\n        >\n          <span\n            class=\"u-checkbox__input\"\n            :class=\"selectAllFiles === true ? 'is-checked' : ''\"\n          >\n            <span class=\"u-checkbox__inner\"></span>\n            <input\n              type=\"checkbox\"\n              aria-hidden=\"false\"\n              @click.stop=\"selectAll($event)\"\n              class=\"u-checkbox__original\"\n              value=\"\"\n            />\n          </span>\n          <span class=\"u-checkbox__label\">{{\n              this.selectedFileCount > 0\n                ? '已选择' + `${this.selectedFileCount}` + '个文件/文件夹'\n                : '全选'\n            }}</span>\n        </label>\n        <div class=\"clear\"></div>\n      </div>\n      <!--无文件提示-->\n      <div\n        class=\"nd-grid-list__body-empty\"\n        v-if=\"sortFileList.length === 0 && showCreateFolder == false\"\n      >\n        <div class=\"nd-main-filelist__empty\">\n          <div class=\"nd-main-filelist__empty-body\">\n            <img\n              src=\"https://nd-static.bdstatic.com/m-static/v20-main/img/empty-folder.55c81ea2.png\"\n              class=\"nd-main-filelist__empty-icon\"\n            />\n            <p class=\"nd-main-filelist__empty-title\">空空如也</p>\n          </div>\n        </div>\n      </div>\n      <!-- -->\n      <!--文件显示列表  缩略图显示-->\n      <div class=\"file-grid-list__body show-mode-block mouse-choose-list\"\n           v-contextmenu:contextmenu\n           style=\"\">\n        <div class=\"mouse-choose-box\"\n             style=\"\n            padding-top: 0px;\n            padding-bottom: 20px;\n            display: flex;\n            flex-wrap: wrap;\n            justify-content: flex-start;\n          \"\n        >\n          <!--新建文件夹编辑-->\n          <div\n            class=\"grid-list__item text-center edit-mode\"\n            v-if=\"showCreateFolder\"\n          >\n            <div class=\"grid-list__title-edit-action\">\n              <div\n                class=\"grid-list__title-edit-action--btn is-confirm inline-block-v-middle cursor-p\"\n              >\n                <i class=\"iconfont icon-duihao\" @click=\"createFolderAction\"></i>\n              </div>\n              <div\n                class=\"grid-list__title-edit-action--btn is-cancel inline-block-v-middle cursor-p\"\n              >\n                <i\n                  class=\"iconfont icon-guanbi\"\n                  @click=\"function () { showCreateFolder = false}\n                  \"\n                ></i>\n              </div>\n            </div>\n            <div class=\"grid-list__item-icon-wrapper\">\n              <img\n                src=\"@/assets/files/folder.png\"\n                alt=\"\"\n                class=\"grid-list__item-icon img-before-icon iconfont icon-pure-color\"\n              />\n            </div>\n            <div class=\"grid-list__item-detail-tip\">\n              <div class=\"grid-list__title-edit-input u-input u-input--small\">\n                <input\n                  type=\"text\"\n                  v-model=\"createFolderName\"\n                  class=\"u-input__inner\"\n                  @keyup.enter=\"createFolderAction\"\n                  autofocus=\"autofocus\"\n                  autocomplete=\"off\"\n                  ref=\"createFolderInput\"\n                />\n              </div>\n            </div>\n          </div>\n\n          <!--文件列表-->\n          <div\n            class=\"grid-list__item text-center cursor-p\"\n            v-for=\"(item, index) in sortFileList\"\n            v-contextmenu:contextmenu\n            @contextmenu.prevent=\"showContentMenuType(index)\"\n            :fid=\"item.id\"\n            :key=\"'id' + index\"\n            :class=\"selectedFile[index] === true ? 'is-checked' : ''\"\n          >\n            <!--顶部操作功能-->\n            <div class=\"grid-list__item-top\">\n              <label\n                class=\"u-checkbox\"\n                :id=\"selectedFile[index] === true ? 'is-checked' : ''\"\n                :class=\"[\n                  selectedFile[index] === true ? 'is-checked' : ''\n                ]\"\n              >\n                <span\n                  class=\"u-checkbox__input\"\n                  :class=\"[\n                    selectedFile[index] === true ? 'is-checked' : '',\n                    selectAllFiles === true ? 'is-checked' : ''\n                  ]\"\n                >\n                  <span\n                    class=\"u-checkbox__inner\"\n                    @click.stop=\"selectFile(index, $event)\"\n                  ></span>\n                  <!--@click.stop=\"selectFile(index, $event)\"-->\n                  <input\n                    type=\"checkbox\"\n                    aria-hidden=\"false\"\n                    class=\"u-checkbox__original\"\n                    value=\"\"\n                  />\n                </span>\n              </label>\n              <!--<div-->\n              <!--  class=\"file-list__line-action theme-primary-text grid-list__item-list-action\"-->\n              <!--&gt;-->\n              <!--  <i-->\n              <!--    title=\"更多\"-->\n              <!--    class=\"iconfont icon-qita u-tooltip u-icon u-icon-more cursor-p file-list__line-action-item\"-->\n              <!--    @click=\"showContentMenuType(index)\"-->\n              <!--  ></i>-->\n              <!--</div>-->\n            </div>\n            <!--文件显示主体-->\n            <!--clickActions(getClickFileType(item) !== undefined?getClickFileType(item):'' ,-->\n            <div\n              draggable=\"true\"\n              @click=\"\n                clickActions(index,\n                  item,e\n                )\n              \"\n            >\n              <div class=\"file-list-drag-copy\">\n                <div class=\"file-list-drag-copy__item is-id-1\">\n                  <!--<i class=\"iconfont icon-wenjianjia1\"></i>-->\n                  <img\n                    src=\"@/assets/files/folder.png\"\n                    class=\"file-list-drag-copy__item-title-icon img-before-icon iconfont icon-pure-color\"\n                  />\n                  <span\n                    class=\"file-list-drag-copy__item-title-text inline-block-v-middle text-ellip\"\n                  >{{ item }}</span\n                  >\n                </div>\n              </div>\n              <div class=\"grid-list__item-icon-wrapper\">\n                <img v-if=\"item.fileType === 1\"\n                     :data-source=\"getRowImageSrc(item)\"\n                     class=\"nd-grid-list__item-icon img-before-icon iconfont icon-pure-color\"\n                     :src=\"setFileImg(item)\"\n                />\n                <img v-else\n                     class=\"nd-grid-list__item-icon img-before-icon iconfont icon-pure-color\"\n                     :src=\"setFileImg(item)\"\n                />\n              </div>\n              <div class=\"u-tooltip\">\n                <p class=\"grid-list__item-title text-ellip\" :title=\"item.fileName\">\n                  <!--item.fileName-->\n                  {{ item.fileName !== undefined ? item.fileName : '' }}\n                </p>\n                <p class=\"grid-list__item-desc text-ellip\" :title=\"item.fileUpdateTime\">\n                  {{ item.fileUpdateTime.slice(5) }}\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n    </div>\n\n    <!--文件显示 列表显示-->\n    <div class=\"main-filelist main-list__table\"\n         v-show=\"displayMode === 'list'\"\n         v-contextmenu:contextmenu\n    >\n      <div class=\"table is-show-header\">\n        <div class=\"table__header\">\n          <table class=\"table__header-table\">\n            <colgroup>\n              <col width=\"4%\">\n              <col width=\"47%\">\n              <col width=\"22%\">\n              <col width=\"20%\">\n            </colgroup>\n            <thead>\n            <tr class=\"table__header-row\">\n              <th class=\"table__header-th text-center table__header-select\">\n                <label\n                  class=\"u-checkbox file-grid-list__select-all\"\n                  :class=\"selectAllFiles === true ? 'is-checked' : ''\"\n                >\n                    <span\n                      class=\"u-checkbox__input\"\n                      :class=\"selectAllFiles === true ? 'is-checked' : ''\"\n                    >\n                      <span class=\"u-checkbox__inner\"></span>\n                      <input\n                        type=\"checkbox\"\n                        aria-hidden=\"false\"\n                        class=\"u-checkbox__original\"\n                        @click.stop=\"selectAll($event)\"\n                        value=\"\"\n                      />\n                    </span>\n                  <span class=\"u-checkbox__label title\">{{\n                      this.selectedFileCount > 0\n                        ? '已选择' +\n                        `${this.selectedFileCount}` +\n                        '个文件/文件夹'\n                        : ''\n                    }}</span>\n                </label>\n              </th>\n              <th class=\"table__header-th is-name\">\n                <div class=\"text-ellip content inline-block-v-middle\">\n                  <span v-show=\"this.selectedFileCount ===0\" class=\"title\" @click=\"changeOrder('fileName')\">文件名</span>\n                  <div class=\"nd-sort\" v-show=\"orderColumn=='fileName' && selectedFileCount < 1\"\n                       @click=\"changeOrder('fileName')\">\n                    <i class=\"iconfont icon icon-shangsanjiaoxing\"\n                       :class=\"order==='asc'?'active':''\"></i>\n                    <i class=\"iconfont icon icon-xiasanjiaoxing\"\n                       :class=\"order==='desc'?'active':''\"></i>\n                  </div>\n                </div>\n              </th>\n              <th class=\"table__header-th\">\n                <div class=\"text-ellip content inline-block-v-middle\">\n                  <span class=\"title\" @click=\"changeOrder('fileUpdateTime')\">修改时间</span>\n                  <div class=\"nd-sort\" v-show=\"orderColumn=='fileUpdateTime'\" @click=\"changeOrder('fileUpdateTime')\">\n                    <i class=\"iconfont icon icon-shangsanjiaoxing\"\n                       :class=\"order==='asc'?'active':''\"></i>\n                    <i class=\"iconfont icon icon-xiasanjiaoxing\"\n                       :class=\"order==='desc'?'active':''\"></i>\n                  </div>\n                </div>\n              </th>\n              <th class=\"table__header-th\">\n                <div class=\"text-ellip content inline-block-v-middle\">\n                  <span class=\"title\" @click=\"changeOrder('fileSize')\">大小</span>\n                  <div class=\"nd-sort\" v-show=\"orderColumn=='fileSize'\" @click=\"changeOrder('fileSize')\">\n                    <i class=\"iconfont icon icon-shangsanjiaoxing\"\n                       :class=\"order==='asc'?'active':''\"></i>\n                    <i class=\"iconfont icon icon-xiasanjiaoxing\"\n                       :class=\"order==='desc'?'active':''\"></i>\n                  </div>\n                </div>\n              </th>\n\n            </tr>\n            </thead>\n          </table>\n        </div>\n        <!--文件列表主体-->\n        <div class=\"table__body mouse-choose-list\">\n          <table class=\"table__body-table mouse-choose-box\">\n            <colgroup>\n              <col width=\"4%\">\n              <col width=\"47%\">\n              <col width=\"22%\">\n              <col width=\"20%\">\n            </colgroup>\n            <tbody>\n            <!--新建文件夹-->\n            <tr class=\"table__body-row  mouse-choose-item\" v-if=\"showCreateFolder\">\n              <td class=\"text-center is-select\">\n                <label\n                  class=\"u-checkbox is-disabled\"\n                >\n                <span\n                  class=\"u-checkbox__input\"\n                >\n                  <span\n                    class=\"u-checkbox__inner\"\n                  ></span>\n                  <!--@click.stop=\"selectFile(index, $event)\"-->\n                  <input\n                    type=\"checkbox\"\n                    aria-hidden=\"false\"\n                    class=\"u-checkbox__original\"\n                    value=\"\"\n                  />\n                </span>\n                </label>\n              </td>\n              <!--文件名-->\n              <td class=\"text-ellip table__td\"\n              >\n                <div class=\"list-name cursor-p\">\n                  <div>\n                    <img\n                      class=\"list-name__title-icon img-before-icon iconfont icon-pure-color\"\n                      src=\"@/assets/files/folder.png\"\n                    />\n                    <div class=\"list-name__title-edit-input u-input u-input--small inline-block-v-middle\">\n                      <input type=\"text\" class=\"u-input__inner inline-block-v-middle\"\n                             @keyup.enter=\"createFolderAction\"\n                             autofocus=\"autofocus\"\n                             v-model=\"createFolderName\"\n                             autocomplete=\"off\"\n                             ref=\"createFolderInput\">\n                    </div>\n                    <div class=\"nd-list-name__title-edit-action is-confirm inline-block-v-middle cursor-p\">\n                      <i class=\"iconfont icon-duihao\" @click=\"createFolderAction\"></i>\n                    </div>\n                    <div class=\"nd-list-name__title-edit-action is-cancel inline-block-v-middle cursor-p\">\n                      <i\n                        class=\"iconfont icon-guanbi\"\n                        @click=\"function () { showCreateFolder = false}\n                  \"\n                      ></i>\n                    </div>\n\n                  </div>\n                </div>\n              </td>\n              <!--修改时间-->\n              <td class=\"text-ellip nd-table__td normal-column\">\n                <div class=\"file-list-time-column\">\n                  <p class=\"column-content-hide\">\n                    {{ new Date().getFullYear() + '-' + (new Date().getMonth() + 1) + '-' + new Date().getDate() + ' ' + new\n                  Date().getHours() + ':' + new Date().getMinutes()\n                    }}</p>\n                  <div class=\"nd-file-list__line-action theme-primary-text column-content-show\">\n                    <i title=\"分享\"\n                       class=\"inline-block-v-middle cursor-p u-icon file-list__line-action-item u-icon-share\"></i>\n                    <i title=\"下载\"\n                       class=\"inline-block-v-middle cursor-p u-icon file-list__line-action-item u-icon-share\"></i>\n                    <i title=\"更多\"\n                       class=\"inline-block-v-middle cursor-p u-icon file-list__line-action-item u-icon-share\"></i>\n                  </div>\n                </div>\n              </td>\n              <!--大小-->\n              <td class=\"text-ellip nd-table__td normal-column\">\n                <section>\n                  <span>-</span>\n                </section>\n              </td>\n            </tr>\n            <!--@contextmenu.prevent=\"openMenu($event, item, index)\"-->\n            <tr :data-id=\"item.id\" class=\"table__body-row  mouse-choose-item\"\n                :class=\"selectedFile[index] === true ? 'is-checked' : ''\"\n                v-contextmenu:contextmenu\n                @contextmenu.prevent=\"showContentMenuType(index)\"\n                :index=\"index\"\n                :fid=\"item.id\"\n                :key=\"'id' + index\"\n                :id=\"'fid' + item.id\"\n                v-for=\"(item,index) in sortFileList\">\n              <td class=\"text-center is-select\">\n                <label\n                  class=\"u-checkbox\"\n                  :id=\"selectedFile[index] === true ? 'is-checked' : ''\"\n                  :class=\"[\n                  selectedFile[index] === true ? 'is-checked' : '',\n                  selectedFile[index] === true ? 'is-checked' : ''\n                ]\"\n                >\n                <span\n                  class=\"u-checkbox__input\"\n                  :class=\"[\n                    selectedFile[index] === true ? 'is-checked' : '',\n                    selectAllFiles === true ? 'is-checked' : ''\n                  ]\"\n                >\n                  <span\n                    class=\"u-checkbox__inner\"\n                    @click.stop=\"selectFile(index, $event)\"\n                  ></span>\n                  <!--@click.stop=\"selectFile(index, $event)\"-->\n                  <input\n                    type=\"checkbox\"\n                    aria-hidden=\"false\"\n                    class=\"u-checkbox__original\"\n                    value=\"\"\n                  />\n                </span>\n                </label>\n              </td>\n              <!--文件名-->\n              <td class=\"text-ellip table__td\"\n                  @click=\"clickActions(\n                   index,\n                  item\n                )\"\n              >\n                <div class=\"list-name cursor-p\">\n                  <div class=\"pointer-events-all cursor-p\">\n                    <img v-if=\"item.fileType === 1\"\n                         :data-source=\"getRowImageSrc(item)\"\n                         class=\"list-name__title-icon img-before-icon iconfont icon-pure-color\"\n                         :src=\"setFileImg(item)\"\n                    />\n                    <img v-else\n                         class=\"list-name__title-icon img-before-icon iconfont icon-pure-color\"\n                         :src=\"setFileImg(item)\"\n                    />\n                    <a :title=\"item.fileName\"\n                       class=\"list-name__title-text inline-block-v-middle text-ellip\">\n                      {{ item.fileName }}\n                    </a>\n                  </div>\n                </div>\n              </td>\n              <!--修改时间-->\n              <td class=\"text-ellip nd-table__td normal-column\">\n                <div class=\"file-list-time-column\">\n                  <p class=\"column-content-hide\">{{ item.fileUpdateTime }}</p>\n                  <div class=\"nd-file-list__line-action theme-primary-text column-content-show\">\n                    <i title=\"分享\"\n                       class=\"inline-block-v-middle cursor-p u-icon file-list__line-action-item u-icon-share\"></i>\n                    <i title=\"下载\"\n                       class=\"inline-block-v-middle cursor-p u-icon file-list__line-action-item u-icon-share\"></i>\n                    <i title=\"更多\"\n                       class=\"inline-block-v-middle cursor-p u-icon file-list__line-action-item u-icon-share\"></i>\n                  </div>\n                </div>\n              </td>\n              <!--大小-->\n              <td class=\"text-ellip nd-table__td normal-column\">\n                <section>\n                <span v-if=\"item.isDir === 0\">{{\n                    item.fileSize | storageTrans\n                  }}</span>\n                  <span v-else>-</span>\n                </section>\n              </td>\n            </tr>\n            </tbody>\n          </table>\n        </div>\n        <!--无文件显示-->\n        <div class=\"table__body-empty\" style=\"display: none\">\n\n        </div>\n      </div>\n    </div>\n\n\n    <Loading v-show=\"showLoading\" :text=\"this.loadingText\"></Loading>\n    <!--文件详情-->\n    <FileInfo\n      :file-list=\"fileList\"\n      :fullPath=\"selectFullPath\"\n      :fullPathArr=\"fullPath.split('/').slice(1)\"\n      :selectFileIndex=\"selectFileIndex\"\n      :selectedFileCount=\"selectedFileCount\"\n    ></FileInfo>\n\n    <!--<div style=\"width: 100%; position: fixed; bottom: 50px;left: 30px;z-index: 500;\" v-show=\"false\">-->\n\n    <!--  <uploader :options=\"options\" :autoStart=\"false\"-->\n    <!--            :fileStatusText=\"{success: '上传成功',error: '上传失败',uploading: '正在上传',paused: '暂停上传',waiting: '等待上传'}\"-->\n    <!--            @file-success=\"onFileSuccess\" @file-added=\"fileAdded\" @file-error=\"onFileError\"-->\n    <!--            class=\"uploader-example\">-->\n    <!--    <uploader-unsupport></uploader-unsupport>-->\n    <!--    <uploader-drop>-->\n    <!--      <uploader-btn :attrs=\"attrs\" single>上传</uploader-btn>-->\n    <!--    </uploader-drop>-->\n    <!--    <uploader-list></uploader-list>-->\n    <!--  </uploader>-->\n    <!--</div>-->\n\n\n    <v-contextmenu class=\"contextmenu\" ref=\"contextmenu\" style=\"width: 120px\">\n      <!--空白处菜单-->\n      <template v-if=\"selectedFileCount===0\">\n        <v-contextmenu-submenu title=\"查看\">\n          <v-contextmenu-item class=\"contextmenu-item\" @click=\"selectDisplayMode(displayMode)\">\n            <span class=\"menu__item-select-icon inline-block-v-middle\"\n                  v-show=\"displayMode === 'list'\"\n                  :class=\"displayMode === 'list' ? 'active': ''\">\n            </span>\n            <span class=\"menu-text\">列表</span>\n          </v-contextmenu-item>\n          <v-contextmenu-item class=\"contextmenu-item\"\n                              @click=\"selectDisplayMode(displayMode)\">\n            <span class=\"menu__item-select-icon inline-block-v-middle\"\n                  v-show=\"displayMode === 'block'\"\n                  :class=\"displayMode === 'block' ? 'active': ''\">\n            </span>\n            <span class=\"menu-text\">缩略图</span>\n          </v-contextmenu-item>\n        </v-contextmenu-submenu>\n\n        <v-contextmenu-item @click=\"getFileList(fullPath)\">刷新</v-contextmenu-item>\n        <v-contextmenu-item @click=\"createFolder()\">新建文件夹</v-contextmenu-item>\n      </template>\n\n      <!--单文件右键菜单-->\n      <template v-if=\"selectedFileCount===1\">\n        <v-contextmenu-item\n          @click=\"menuMethods(item.methodName)\"\n          style=\"margin: 3px 0\"\n          v-for=\"item in singleMenuList\"\n          :key=\"item.id\">\n          <i class=\"iconfont v-contextmenu-submenu__icon\"\n             :class=\"item.iconClassName\"></i>\n          {{ item.name }}\n        </v-contextmenu-item>\n        <!--解压文件-->\n        <v-contextmenu-submenu\n          style=\"margin: 3px 0;position: relative\" title=\"解压文件\"\n          class=\"unzip-menu\"\n          @click=\"unzip(selectFileIndex)\"\n          v-if=\"this.fileList[this.selectFileIndex].fileExt==='zip'\">\n          <!--<v-contextmenu-submenu__icon class=\"iconfont icon-jieyasuo\"></v-contextmenu-submenu__icon>-->\n          <span class=\"iconfont icon-jieyasuo menu__item-select-icon  inline-block-v-middle \">\n            </span>\n          <!--<i class=\"iconfont icon-jieyasuo v-contextmenu-submenu__icon\"-->\n          <!--   style=\"font-size: 14px;position: absolute;left: 0px\">-->\n          <!--</i>-->\n          <!--解压缩-->\n          <v-contextmenu-item class=\"contextmenu-item\" @click=\"unzip(fileList[selectFileIndex],1)\">\n            <!--<i class=\"iconfont icon-jieyasuo1 v-contextmenu-submenu__icon\"-->\n            <!--   style=\"font-size: 14px\">-->\n            <!--</i>-->\n            <span class=\"iconfont icon-jieyasuo menu__item-select-icon  inline-block-v-middle \">\n            </span>\n            <span class=\"menu-text\">到当前文件夹</span>\n          </v-contextmenu-item>\n          <v-contextmenu-item class=\"contextmenu-item\" @click=\"unzip(fileList[selectFileIndex],2)\">\n            <span class=\"iconfont icon-jieyasuo menu__item-select-icon inline-block-v-middle\">\n\n            </span>\n            <span class=\"menu-text\">\n              到\"{{ this.fileList[this.selectFileIndex].fileName.replace('.' + this.fileList[this.selectFileIndex].fileExt, '')\n              }}\"</span>\n          </v-contextmenu-item>\n          <v-contextmenu-item class=\"contextmenu-item\" @click=\"unzip(fileList[selectFileIndex],3)\">\n            <span class=\"iconfont icon-jieyasuo menu__item-select-icon inline-block-v-middle\">\n              <!--<i class=\"iconfont icon-jieyasuo1 v-contextmenu-submenu__icon\"-->\n              <!--   style=\"font-size: 14px\">-->\n              <!--</i>-->\n            </span>\n            <span class=\"menu-text\">到目标文件夹</span>\n          </v-contextmenu-item>\n\n        </v-contextmenu-submenu>\n\n        <!--格式转换-->\n        <v-contextmenu-submenu title=\"格式转换\"\n                               v-if=\"conversionExtList.includes(fileList[selectFileIndex].fileExt)\">\n          <v-contextmenu-item class=\"contextmenu-item\"\n                              v-show=\"fileList[selectFileIndex].fileExt === 'pdf'\"\n                              @click=\"formatConversion(fileList[selectFileIndex],'docx')\">\n            <!--<span class=\"menu__item-select-icon inline-block-v-middle\">-->\n            <!--</span>-->\n            <span class=\"menu-text\">转Word</span>\n          </v-contextmenu-item>\n          <v-contextmenu-item class=\"contextmenu-item\"\n                              v-show=\"fileList[selectFileIndex].fileExt === 'doc' ||\n                  fileList[selectFileIndex].fileExt === 'docx' || fileList[selectFileIndex].fileExt === 'xlsx'\"\n                              @click=\"formatConversion(fileList[selectFileIndex],'pdf')\">\n            <!--<span class=\"menu__item-select-icon inline-block-v-middle\">-->\n            <!--</span>-->\n            <span class=\"menu-text\">转PDF</span>\n\n          </v-contextmenu-item>\n        </v-contextmenu-submenu>\n\n        <!--文字识别-->\n        <v-contextmenu-item style=\"margin: 3px 0\" @click=\"ocr(selectFileIndex)\"\n                            v-if=\"fileList[selectFileIndex].fileType===1\">\n          <i class=\"iconfont icon-wenzishibie v-contextmenu-submenu__icon\" style=\"font-size: 14px\">\n          </i>\n          文字识别\n        </v-contextmenu-item>\n        <v-contextmenu-item style=\"margin: 3px 0\">\n          <a :href=\"getDownloadFilePath(this.fileList[this.selectFileIndex])\" style=\"color: #333\">\n            <i class=\"iconfont icon-xiazai v-contextmenu-submenu__icon\"></i>下载\n          </a>\n        </v-contextmenu-item>\n      </template>\n\n      <!--多文件右键菜单-->\n      <template v-if=\"selectedFileCount>1\">\n        <!--<v-contextmenu-item>多个文件右键</v-contextmenu-item>-->\n        <v-contextmenu-item\n          @click=\"menuMethods(item.methodName)\"\n          style=\"margin: 3px 0\"\n          v-for=\"item in multiMenuList\"\n          :key=\"item.id\">\n          <i class=\"iconfont v-contextmenu-submenu__icon\" :class=\"item.iconClassName\"></i>\n          {{ item.name }}\n        </v-contextmenu-item>\n        <v-contextmenu-item style=\"margin: 3px 0\">\n          <a :href=\"getDownloadFilePath(this.fileList[this.selectFileIndex])\" style=\"color: #333\">\n            <i class=\"iconfont icon-xiazai v-contextmenu-submenu__icon\"></i>下载\n          </a>\n        </v-contextmenu-item>\n      </template>\n    </v-contextmenu>\n\n    <ContextMenu\n      :event=\"e\"\n      :left=\"menuLeft\"\n      :top=\"menuTop\"\n      v-show=\"showMenu\"\n      :selectFileIndex=\"selectFileIndex\"\n      :selectedFile=\"selectedFile\"\n      :file=\"fileList[this.selectFileIndex ===-1 ? this.selectFileIndex : 0]\"\n      :count=\"selectedFileCount\"\n      :type=\"selectedFileCount === 1 ? 1 : 2\"\n    ></ContextMenu>\n\n    <Message :show=\"showMessage\"></Message>\n    <!--测试按钮-->\n    <!--<div class=\"test-btn\" v-show=\"this.$route.fullPath.includes('')\"-->\n    <!--     :path=\"this.$route.fullPath\"-->\n    <!--     @click=\"test\"-->\n    <!--     style=\"-->\n    <!--  position: fixed;-->\n    <!--  top: 80px;-->\n    <!--  left: 770px;-->\n    <!--  z-index: 4;cursor: pointer;-->\n    <!--  background-color: #06a7ff;-->\n    <!--  \"-->\n    <!--&gt;-->\n    <!--  测试方法-->\n    <!--</div>-->\n\n    <!--<div class=\"test-btn\" v-show=\"this.$route.fullPath.includes('')\"-->\n    <!--     :path=\"this.$route.fullPath\"-->\n    <!--     @click=\"test2\"-->\n    <!--     style=\"-->\n    <!--  position: fixed;-->\n    <!--  top: 80px;-->\n    <!--  left: 880px;-->\n    <!--  z-index: 4;cursor: pointer;-->\n    <!--  background-color: #06a7ff;-->\n    <!--  \"-->\n    <!--&gt;-->\n    <!--  测试方法2-->\n    <!--</div>-->\n\n  </div>\n</template>\n\n<script>\n\nimport {\n  batchCopyFile,\n  batchDeleteFile,\n  batchMoveFile,\n  copyFile,\n  createFolder,\n  createOffline,\n  deleteFile,\n  getDownloadProgress,\n  getFileListByType,\n  moveFile,\n  renameFile,\n  searchFile,\n  shareFile,\n  unzipFile,\n  getProgress\n  , formatconversion\n} from '@/request/file'\nimport viewerApi from '@/components/play/imagePreview/api'\nimport FileInfo from '@/components/index/fileInfo/FileInfo'\nimport ContextMenu from '@/components/common/contextMenu/ContextMenu.vue'\nimport Message from '@/components/common/message/Message'\nimport Loading from '@/components/common/loading/Loading'\nimport Bus from '@/libs/bus'\nimport { getUserInfo } from '@/request/user'\nimport { blankMenuList, conversionExtList, defaultMenuList, multiMenuList } from '@/libs/map'\nimport Vue from 'vue'\n\nvar websocket\nlet unzipTimer\nvar formatTimer\nvar offlineTimer\nexport default {\n  name: 'Index',\n  props: {},\n  components: {\n    FileInfo,\n    ContextMenu,\n    Message,\n    Loading\n  },\n  data () {\n    return {\n      defaultMenuList,\n      multiMenuList,\n      blankMenuList,\n      conversionExtList,\n      websocket: WebSocket,\n      loadingText: '加载中...',\n      // 文件总数\n      total: 0,\n      // 文件审核中数\n      auditCount: 0,\n      // 总页数\n      pageCount: 0,\n      // 分页大小\n      pageSize: 50,\n      e: Object,\n      // 显示加载动画\n      showLoading: false,\n      // 显示创建文件夹\n      showCreateFolder: false,\n      fileName: '',\n      createFolderName: '',\n      // 打开文件索引\n      openFileIndex: -1,\n      // 显示提示框\n      showMessage: false,\n      // 获取文件的全路径\n      fullPath: '',\n      selectFullPath: '',\n      showMenu: false,\n      showMarkdown: false,\n      imageList: [],\n      // 右键菜单弹窗左边距离\n      menuLeft: 0,\n      searchKeyWords: '',\n      // 右键菜单弹窗上边距离\n      menuTop: 0,\n      menuType: 1,\n      path: '/',\n      currentFile: {\n        id: -1\n      },\n      // 选中文件数量\n      selectedFileCount: 0,\n      // 当前点击文件索引\n      selectFileIndex: -1,\n      // 选中文件记录 长度为文件数量,true选中,false未选中\n      selectedFile: [],\n      // 是否选中所有文件\n      selectAllFiles: false,\n      // 选中文件对象数组\n      selectFileArray: [],\n      // 文件列表\n      fileList: [],\n      // 排序文件列表\n      sortFileList: [],\n      // 选中文件列表 包含file所有信息\n      selectFileList: [],\n      // 选中文件id列表\n      selectFileIdList: [],\n      // 文件显示方式 默认block,可选值list\n      displayMode: 'block',\n      fileToolBarList: [\n        // {\n        //   id: 2,\n        //   name: '下载',\n        //   iconClassName: 'icon-xiazai',\n        //   methodName: 'download'\n        // },\n        {\n          id: 3,\n          name: '分享',\n          iconClassName: 'icon-fenxiang1',\n          methodName: 'shareFile'\n        },\n        {\n          id: 4,\n          name: '复制',\n          iconClassName: 'icon-fuzhi',\n          methodName: 'copyFile'\n        },\n        {\n          id: 5,\n          name: '移动',\n          iconClassName: 'icon-yidong',\n          methodName: 'moveFile'\n        },\n        // {\n        //   id: 6,\n        //   name: '重命名',\n        //   iconClassName: 'icon-zhongmingming',\n        //   methodName: 'renameFile'\n        // },\n        {\n          id: 7,\n          name: '删除',\n          iconClassName: 'icon-shanchu',\n          methodName: 'deleteFile'\n        }\n      ],\n      singleMenuList: [\n        {\n          id: 1,\n          name: '打开',\n          iconClassName: 'icon-openl',\n          methodName: 'menuOpen',\n          count: 1\n        },\n        // {\n        //   id: 2,\n        //   name: '下载',\n        //   iconClassName: 'icon-xiazai',\n        //   methodName: 'menuDownload'\n        // },\n        {\n          id: 3,\n          name: '分享',\n          iconClassName: 'icon-fenxiang1',\n          methodName: 'shareFile'\n        },\n        {\n          id: 4,\n          name: '复制',\n          iconClassName: 'icon-fuzhi',\n          methodName: 'copyFile'\n        },\n        {\n          id: 5,\n          name: '移动',\n          iconClassName: 'icon-yidong',\n          methodName: 'moveFile'\n        },\n        {\n          id: 6,\n          name: '重命名',\n          iconClassName: 'icon-zhongmingming',\n          methodName: 'renameFile'\n        },\n        {\n          id: 7,\n          name: '删除',\n          iconClassName: 'icon-shanchu',\n          methodName: 'deleteFile'\n        }\n      ],\n      orderColumn: '',\n      order: '',\n      remoteTask: 0,\n      progress: 0,\n      // 离线下载文件\n      offlineFile: {},\n      unzipTimer: null\n    }\n  },\n  watch: {\n    createFolderName: function(val) {\n      var flag = new RegExp('[`~!@#$^&*()=|{}\\':;\\',\\\\[\\\\].<>《》/?~！@#￥……&*（）——|{}【】‘；：”“\\'。，、？ ]')\n      // // 判断 even 是否包含特殊字符\n      if (flag.test(val)) {\n        this.$toast.error('文件夹名称不能包含特殊字符')\n      }\n    },\n    // 监听选择文件数量\n    selectedFileCount: function() {\n      if (this.selectedFileCount === 0) {\n        this.selectAllFiles = false\n        this.selectFileIndex = -1\n      }\n      if (this.selectedFileCount === 1) {\n        this.menuType = 1\n      } else if (this.selectedFileCount > 1) {\n        this.menuType = 2\n      }\n      this.selectFileList.length = 0\n      this.selectFileIdList.length = 0\n      var i = 0\n      for (const argumentsKey of this.selectedFile) {\n        if (argumentsKey === true) {\n          this.selectFileList.push(this.fileList[i])\n          this.selectFileIdList.push(this.fileList[i].id)\n          this.$store.commit('updateSelectFileIdList', this.selectFileIdList)\n        }\n        i++\n      }\n    },\n    showMessage: function() {\n      if (this.showMessage === true) {\n        window.setTimeout(() => {\n          this.showMessage = false\n        }, 3000)\n      }\n    },\n    // 监听路由的filePath属性的数据变化\n    '$route.query.filePath': function(path) {\n      // 加载新文件列表时重置数据为空,开始呢 加载动画\n      this.fileList.length = 0\n      this.sortFileList.length = 0\n      this.showLoading = true\n      // var path = this.$route.query.filePath\n      this.$store.commit('updateFullPath', path)\n      // if (this.$route.query.searh !== undefined) {\n      //   this.search()\n      //   return\n      // }\n      if (path === undefined) {\n        this.fullPath = ''\n        this.currentPath = ''\n        this.getFileList(path)\n        this.$store.commit('updateFullPath', '/')\n      } else {\n        this.getFileList(path)\n        this.$store.commit('updateFullPath', path)\n      }\n    },\n    // 监听文件分类变化\n    '$route.query.category': function() {\n      // 加载新文件列表时重置数据为空,开始呢 加载动画\n      this.fileList.length = 0\n      this.sortFileList.length = 0\n      this.showLoading = true\n\n      this.total = 0\n      this.pageCount = 0\n      this.selectedFileCount = 0\n      // 只要categoryId的值发生变化,这个方法就会被调用\n      console.log('this.$route.query.category !== undefined========', this.$route.query.category !== undefined)\n      if (this.$route.query.category != undefined) {\n        if (this.$route.query.category == 'all') {\n          this.fullPath = ''\n          this.currentPath = ''\n          this.currentFile.id = -1\n          this.getFileList(this.fullPath)\n        } else {\n          const data = {\n            fileType: this.$route.query.category,\n            currentPage: this.$store.state.currentPage,\n            pageCount: this.$store.state.pageCount\n          }\n          console.log('$route.query.category获取分类文件列表')\n          this.getFileListByType(data)\n        }\n      }\n    },\n    searchKeyWords: function(val) {\n      if (val === '') {\n        return\n      }\n      const data = {\n        keywords: val\n      }\n      searchFile(data, true).then((res) => {\n        if (res.code === 0) {\n          this.fileList.length = 0\n          this.sortFileList.length = 0\n          this.fileList = res.data\n          this.sortFileList = res.data\n          this.$store.commit('updateFileList', this.fileList)\n          this.selectedFile = new Array(this.fileList.length).fill(false)\n          // this.pageData.total = res.data.total\n          // this.loading = false\n        } else {\n          this.$toast.error(res.msg)\n        }\n      })\n    },\n    '$route.query.search1': function() {\n      if (this.$route.query.search === undefined) {\n        this.back('/')\n      } else {\n        console.log(this.searchKeyWords)\n        // const data = {\n        //   keywords: this.searchKeyWords\n        // }\n        // searchFile(data, true).then((res) => {\n        //   if (res.code === 0) {\n        //     this.fileList.length = 0\n        //     this.sortFileList.length = 0\n        //     this.fileList = res.data\n        //     this.sortFileList = res.data\n        //     this.$store.commit('updateFileList', this.fileList)\n        //     this.selectedFile = new Array(this.fileList.length).fill(false)\n        //     // this.pageData.total = res.data.total\n        //     // this.loading = false\n        //   } else {\n        //     this.$toast.error(res.msg)\n        //   }\n        // })\n      }\n    },\n    showMenu (value) {\n      if (value) {\n        document.body.addEventListener('click', this.closeMenu)\n      } else {\n        document.body.removeEventListener('click', this.closeMenu)\n      }\n    },\n    showCreateFolder (showCreateFolder) {\n      if (!showCreateFolder === true) {\n        document.body.addEventListener('click', this.closeMenu)\n      } else {\n        // document.body.addEventListener('click', this.closeMenu)\n        document.body.removeEventListener('click', this.closeMenu)\n      }\n    },\n    visible: {\n      handler (newVal) {\n        if (!newVal) {\n          // 解除禁止滚动\n          this.$nextTick(() => {\n            document.removeEventListener('mousewheel', this.mousewheelHandler, { passive: false })\n          })\n\n          this.$emit('update:visible', false)\n        } else {\n          this.$emit('update:visible', true)\n          // 每次弹出弹窗,让遮罩层下面的页面不能滚动\n          this.$nextTick(() => {\n            document.addEventListener('mousewheel', this.mousewheelHandler, { passive: false })\n          })\n        }\n      },\n      immediate: true\n    }\n  },\n  computed: {\n    // 上传文件组件参数\n    uploadFileParams: {\n      get () {\n        const res = {\n          filePath: this.fullPath === '' ? '/' : this.fullPath,\n          isDir: 0\n        }\n        return res\n      },\n      set () {\n        return {\n          filePath: this.fullPath === '' ? '/' : this.fullPath,\n          isDir: 0\n        }\n      }\n    }\n  },\n  created () {\n    if (this.$route.query.category === undefined) {\n      this.$router.push({\n        path: '/index',\n        query: {\n          category: 'all'\n        }\n      })\n    }\n\n    if (this.$route.query.category !== undefined) {\n      this.selectedFileCount = 0\n      // 只要categoryId的值发生变化,这个方法就会被调用\n      if (this.$route.query.category === 'all') {\n        this.fullPath = this.$route.query.filePath ? this.$route.query.filePath : ''\n        this.currentPath = ''\n        this.getFileList(this.fullPath, false)\n      } else {\n        const data = {\n          fileType: this.$route.query.category,\n          currentPage: this.$store.state.currentPage,\n          pageCount: this.$store.state.pageCount\n        }\n        getFileListByType(data).then((res) => {\n          if (res.code === 0) {\n            this.fileList.length = 0\n            this.sortFileList = 0\n            this.fileList = res.data.list\n            this.sortFileList = res.data.list\n            this.$store.commit('updateFileList', this.fileList)\n            this.selectedFile = new Array(this.fileList.length).fill(false)\n          } else {\n            this.$toast.error(res.msg)\n          }\n        })\n      }\n    }\n  },\n  mounted () {\n    if ('WebSocket' in window) {\n      // websocket = new WebSocket('ws://localhost:8080/api/push/websocket/' + JSON.parse(localStorage.getItem('userInfo')).userName)\n      // websocket = new WebSocket('ws://localhost:8080/api/push/websocket?sid=' + JSON.parse(localStorage.getItem('userInfo')).userName)\n      // this.initWebSocket()\n    } else {\n      this.$toast.error('当前浏览器不支持websocket')\n    }\n    this.displayMode = this.$store.state.displayMode\n    // 文件选择后的回调\n    Bus.$on('fileAdded', () => {\n      console.log('文件已选择')\n    })\n\n    // 文件上传成功的回调\n    Bus.$on('fileSuccess', () => {\n      console.log('文件上传成功')\n    })\n    // 重新获取文件列表\n    Bus.$on('updateFileList', (e) => {\n      this.getFileList(this.fullPath, true)\n    })\n  },\n  destroyed: function() { // 离开页面生命周期函数\n\n  },\n  methods: {\n    createWebSocket (userId, fileId, path) {\n      if (!websocket) {\n        // return new WebSocket('ws://localhost:8080/api/push/websocket/?uid' + userId + '&fid' + fileId)\n        return new WebSocket('ws://localhost:8080/api/progress?fileName=123.zip&urlStr=https://mirrors.aliyun.com/ubuntu-releases/trusty/ubuntu-14.04.6-server-amd64.iso&userId=1&type=offline&downloadPath=/&fileSavePath=/')\n        // console.log('ws://' + window.location.host + '/api/push/websocket' + userId + '/' + fileId)\n        // websocket = WebSocket('ws://' + window.location.host + '/api/push/websocket?sid=' + JSON.parse(localStorage.getItem('userInfo')).userName)\n        // return websocket\n        // return new WebSocket('ws://127.0.0.1:8080/api/push/websocket/' + userId + '/' + fileId)\n      } else {\n        return websocket\n      }\n    },\n    /**\n     * WebSocket\n     */\n    initWebSocket () {\n      // 连接错误\n      websocket.onerror = this.setErrorMessage\n\n      // 连接成功\n      websocket.onopen = this.setOnopenMessage\n\n      // 收到消息的回调\n      websocket.onmessage = this.setOnmessageMessage\n\n      // 连接关闭的回调\n      websocket.onclose = this.setOncloseMessage\n\n      // 监听窗口关闭事件,当窗口关闭时,主动去关闭websocket连接,防止连接还没断开就关闭窗口,server端会抛异常.\n      window.onbeforeunload = this.onbeforeunload\n    },\n    setErrorMessage () {\n      console.log('WebSocket连接发生错误   状态码:' + websocket.readyState)\n    },\n    setOnopenMessage () {\n      console.log('WebSocket连接成功    状态码:' + websocket.readyState)\n    },\n    setOnmessageMessage (event) {\n      // 根据服务器推送的消息做自己的业务处理\n      console.log('服务端返回:' + event.data)\n    },\n    setOncloseMessage () {\n      console.log('WebSocket连接关闭    状态码:' + websocket.readyState)\n    },\n    onbeforeunload () {\n      this.closeWebSocket()\n    },\n    closeWebSocket () {\n      websocket.close()\n    },\n    sendWebsocketInfo () {\n      getDownloadProgress().then((res) => {\n        console.log(res)\n        if (res.code === 0) {\n\n        } else {\n          // this.$message.error(res.message)\n        }\n      })\n    },\n    // 修改排序方式\n    changeOrder (column) {\n      if (column !== this.orderColumn) {\n        this.order = 'desc'\n      } else {\n        if (this.order == '') {\n          this.order = 'desc'\n        } else if (this.order == 'desc') {\n          this.order = 'asc'\n        } else if (this.order == 'asc') {\n          this.order = 'desc'\n        }\n      }\n      this.orderColumn = column\n      this.sortFileList = this.generateNewList(this.orderColumn, this.order, this.sortFileList)\n    },\n    /**\n     * 文件格式转换\n     */\n    formatConversion (row, conversionExt) {\n      this.fileFormatConversion(row, conversionExt)\n    },\n    /**\n     * 文件格式转换\n     * @param row\n     * @param conversionExt\n     */\n    fileFormatConversion (row, conversionExt) {\n      // var _this = this\n      var t = new Date().getTime()\n      const data = {\n        fileExt: row.fileExt,\n        convertExt: conversionExt,\n        fileId: row.id,\n        t: t\n      }\n      formatTimer = setInterval(function() {\n        // 每5秒刷新一次\n        const data = {\n          type: 'conversion',\n          fileExt: row.fileExt,\n          convertExt: conversionExt,\n          id: row.id,\n          t: t\n        }\n        getProgress(data).then((res) => {\n          Bus.$emit(\n            'updateLoadingText',\n            res.data.progress >= 100\n              ? '转换完成'\n              : '转换进度: ' + res.data.progress + '%'\n          )\n          if (res.data.finish === 1) {\n            clearInterval(formatTimer)\n            Bus.$emit('updateFileList')\n            // _this.getFileList()\n          }\n          Bus.$emit('toastMsg', ' 转换进度: ' + res.data.progress + '%')\n          if (res.data.progress >= 100) {\n            // _this.getFileList(this.fullPath, true)\n            Bus.$emit('toastMsg', ' 转换完成')\n            Bus.$emit('updateFileList')\n            clearInterval(formatTimer)\n          }\n        })\n      }, 4000)\n      formatconversion(data, true).then((res) => {\n        if (res.code === 0) {\n          this.$toast.success('转换任务创建成功', -1)\n          // this.file = res.data.file\n          if (this.$route.query.category === 'all') {\n            // _this.getFileList(row.filePath, true)\n          } else {\n            // this.getFileListByType(this.$route.query.category)\n          }\n        } else {\n          this.$toast.error(res.msg)\n        }\n      })\n    },\n    /**\n     * 刷新文件列表\n     */\n    refreshFileList () {\n      this.getFileList(this.fullPath, true)\n      // if (this.$route.query.category === 'all') {\n      //   refreshFile.then((res) => {\n      //     if (res.code === 0) {\n      //\n      //     } else {\n      //       this.$toast.error(res.msg)\n      //     }\n      //   })\n      //   // this.getFileList(this.fullPath, true)\n      // } else {\n      //   refreshFile.then((res) => {\n      //     if (res.code === 0) {\n      //     } else {\n      //       this.$toast.error(res.msg)\n      //     }\n      //   })\n      //   // this.getFileListByType(this.$route.query.fileType)\n      // }\n    },\n    // 清除定时器\n    clearTimer (timer) {\n      console.log('清除定时器', timer)\n      clearInterval(timer)\n      // clearInterval(formatTimer)\n    },\n    async unzip (item, type) {\n      // var timer\n      const _this = this\n\n      if (type === 3) {\n        var { filePath } = await this.$fileSelector({\n          title: '选择目录',\n          userInfo: this.$store.state.userInfo,\n          onlyFolder: true,\n          show: true\n        })\n        // 在当前文件夹下创建 解压文件目录\n      } else if (type === 2) {\n        filePath = (item.filePath === '/' ? '/' : item.filePath + '/') + item.fileName.replace('.' + item.fileExt, '')\n      } else {\n        filePath = this.$store.state.fullPath\n      }\n      _this.remoteTask = new Date().getTime()\n      const data = {\n        fid: this.fileList[this.selectFileIndex].id,\n        unzipMode: type,\n        filePath: filePath,\n        t: _this.remoteTask\n      }\n      // websocket = new WebSocket('ws://localhost:8080/api/progress/unzip?id=' + this.fileList[this.selectFileIndex].id + '&uid=' + this.$store.state.userInfo.id)\n      // this.$toast.success(',解压文件所在目录解压文件所在目录解压文件所在目录解压文件所在目录:' + filePath, -1)\n      // 解压到指定文件夹\n      this.unzipTimer = window.setInterval(function() { // 每5秒刷新一次\n        const data = {\n          type: 'unzip',\n          fid: item.id,\n          unzipMode: type,\n          filePath: filePath,\n          t: _this.remoteTask\n        }\n        getProgress(data).then(res => {\n          Bus.$emit('toastMsg', ' 解压进度: ' + res.data.progress + '%')\n          // Bus.$emit('updateLoadingText', res.data.progress >= 100 ? '解压完成' : '解压进度: ' + res.data.progress + '%')\n          if (res.code === 0) {\n            if (res.data.progress >= 100) {\n              Bus.$emit('toastMsg', ' 解压完成')\n              window.clearInterval(_this.unzipTimer)\n              _this.unzipTimer = null\n              Bus.$emit('updateFileList')\n              // _this.getFileList(this.fullPath, true)\n            } else {\n              Bus.$emit('toastMsg', ' 解压进度: ' + res.data.progress + '%')\n            }\n          } else {\n            Bus.$emit('toastMsg', ' 解压失败')\n            window.clearInterval(_this.unzipTimer)\n            _this.unzipTimer = null\n          }\n        })\n      }, 2000)\n      unzipFile(data).then((res) => {\n        if (res.code === 0) {\n          // clearInterval(unzipTimer)\n          this.$toast.success('解压任务创建成功,保存路径:' + filePath, -1)\n        } else {\n          // clearInterval(unzipTimer)\n          this.$toast.error(res.msg)\n        }\n      })\n    },\n    ocr (index) {\n      const image = this.fileList[index]\n      if (image.fileSize > 4194304) {\n        this.$toast.error('图片大小不能超过4M')\n        return\n      }\n      var imageList = this.fileList.filter((item) => item.fileType === 1)\n      const di =\n        imageList.length > 1\n          ? imageList.indexOf(\n            imageList.filter((d) => d.fileName == this.fileList[this.selectFileIndex].fileName)[0]\n          )\n          : 0\n      Vue.prototype.$previewImageOcr({\n        imageList: imageList,\n        defaultIndex: di\n      })\n    },\n    menuMethods (method) {\n      this[method]()\n    },\n    // 打开\n    menuOpen: function() {\n      var index = this.$store.state.selectFileIndex\n      this.clickActions(index, this.fileList[index])\n    },\n    // 分享文件\n    menuShare: function() {\n      this.shareFile()\n    },\n    // 复制文件\n    menuCopy: function() {\n      this.copyFile()\n    },\n    // 移动文件\n    menuMove: function() {\n      this.moveFile()\n    },\n    // 文件重命名\n    menuRename: function() {\n      this.renameFile()\n      // bus.$emit('renameFileName', this.$store.state.fileList[this.$store.state.selectFileIndex].fileName)\n    },\n    // 删除文件\n    menuDelete: function() {\n      this.deleteFile()\n    },\n    menuDownload: function() {\n      // this.$parent.download()\n    },\n    // 刷新页面\n    menuRefresh: function() {\n      if (this.$route.query.category === 'all') {\n        this.getFileList(this.fullPath)\n      } else {\n        this.getFileListByType(this.$route.query.category)\n      }\n    },\n    // 创建文件夹\n    menuCreateFolder: function() {\n      this.createFolder()\n    },\n    menuRestoreFile: function() {\n      console.log('还原文件')\n      this.restoreFile()\n    },\n    menuDeleteRecycle: function() {\n      console.log('彻底删除')\n      this.deleteRecycle()\n    },\n    showContentMenuType (index) {\n      // const _this = this\n      this.selectFileIndex = index\n      this.item = this.fileList[index]\n      if (this.selectedFile[index] === true) {\n      } else {\n        this.init()\n      }\n      if (this.getSelectedFileIndex(this.selectedFile, index) === index) {\n        this.selectFile(index)\n      } else if (this.selectedFileCount === 0) {\n        this.selectFile(index)\n      }\n      return this.$store.state.selectFileCount\n    },\n    getUserInfo () {\n      getUserInfo().then((res) => {\n        console.log(res)\n        if (res.code === 0) {\n          localStorage.setItem('userInfo', JSON.stringify(res.data.userInfo))\n          localStorage.setItem('userStorage', JSON.stringify(res.data.userStorage))\n          this.$store.commit('updateIsLogin', true)\n          this.$store.commit('updateUserInfo', res.data.userInfo)\n          this.$store.commit('updateUserStorage', res.data.userStorage)\n        } else {\n          this.$toast.error(res.msg)\n        }\n      })\n    },\n    // 文件搜索\n    search () {\n      this.selectAllFiles = false\n      this.selectedFileCount = 0\n      if (this.searchKeyWords === '') {\n        this.$toast.error('搜索关键词不能为空')\n      }\n      // this.$router.replace({\n      //   // path: '/index',\n      //   query: {\n      //     category: 'all',\n      //     search: this.searchKeyWords\n      //   }\n      // })\n    },\n    /**\n     * 上传文件按钮点击事件\n     * @description 通过Bus通信,开启全局上传文件流程\n     * @param {boolean} uploadWay 上传方式 0-文件上传 1-文件夹上传 2-粘贴图片或拖拽上传\n     */\n    handleUploadFileBtnClick (uploadWay) {\n      this.$uploadFile({\n        params: this.uploadFileParams,\n        uploadWay,\n        serviceEl: this\n      })\n    },\n\n    // test方法\n    async test () {\n      this.$toast.success('加载中...', -1)\n      // this.sendWebsocketInfo()\n      websocket = this.createWebSocket(1, 1, '')\n\n      // this.downloadFile = this.fileList[4]\n      // await this.$request(\n      //   '/filetransfer/download',\n      //   this.downloadFile,\n      //   'get',\n      //   'params'\n      // )\n    },\n    test2 () {\n      clearInterval(unzipTimer)\n\n      // const data = {\n      //   fileName: '20220508'\n      // }\n      // createCosFolder(data).then(res => {\n      //   console.log(res)\n      // })\n      // this.progress++\n      // if (this.progress > 5) {\n      //   const data = {\n      //     content: '打开文件位置',\n      //     src: '/index'\n      //   }\n      //   Bus.$emit('toastMenu', data)\n      // }\n      // Bus.$emit('toastMsg', '下载进度' + this.progress + '%')\n    },\n    init () {\n      this.selectedFileCount = 0\n      this.selectFileIndex = -1\n      this.selectedFile = new Array(this.fileList.length).fill(false)\n    },\n    previewImgObject (index, imageList) {\n      const $viewer = viewerApi({\n        options: {\n          toolbar: true,\n          url: 'data-source',\n          initialViewIndex: index\n        },\n        images: imageList\n      })\n      console.log($viewer)\n    },\n\n    // 文件夹\n    folder: function(index, fileName, e) {\n      console.log('点击目录:' + fileName)\n      this.enterFolder(index, '/' + fileName, e)\n    },\n    // 路径导航\n    navigate (index) {\n      var currentPath = this.$route.query.filePath\n      // console.log('当前路径:' + currentPath)\n      var routeArr = currentPath.split('/').slice(1)\n      // 将routeArr的前index个元素前面添加/再拼接\n      var path = '/' + routeArr.slice(0, index + 1).join('/')\n      // var routerLength = this.$route.query.filePath.split('/').length\n      // console.log('跳转新路径:' + path)\n      // console.log('routeArr,截取掉第一个空:', routeArr)\n      // console.log('routerLength:' + routerLength)\n      // console.log('点击index:', index)\n      // console.log('点击当前路径:', routeArr[index])\n      // 获取currentPath的routerLength[index]左边的路径\n      // console.log('进入的路径:' + )\n      if (path === '/') {\n        // this.getFileList('/')\n        this.$router.push({\n          path: '/index',\n          query: {\n            category: 'all'\n          }\n        })\n        // this.getFileList('/', false)\n      } else {\n        this.$router.push({\n          path: '/index',\n          query: {\n            category: 'all',\n            filePath: path\n          }\n        })\n        this.$nextTick(function() {\n          // this.getFileList(this.$store.state.fullPath)\n        })\n      }\n    },\n    // 返回上一级目录\n    back (path) {\n      this.searchKeyWords = ''\n      this.showLoading = true\n      this.selectedFileCount = 0\n      this.selectAllFiles = false\n      this.sortFileList.length = 0\n      if (path === '/') {\n        // this.getFileList('/')\n        this.$router.push({\n          path: '/index',\n          query: {\n            category: 'all'\n          }\n        })\n        this.getFileList('/', false)\n      } else {\n        this.$router.go(-1)\n        this.$nextTick(function() {\n          // this.getFileList(this.$store.state.fullPath)\n        })\n      }\n    },\n    moreOption () {\n\n    },\n    // 打开右键菜单\n    openMenu (e, item, index) {\n      this.e = e\n      this.selectFileIndex = index\n      this.item = this.fileList[index]\n      if (this.selectedFile[index] === true) {\n      } else {\n        this.init()\n      }\n      this.menuLeft = e.screenX\n      this.menuTop = e.screenY - 110\n      if (this.getSelectedFileIndex(this.selectedFile, index) === index) {\n        this.selectFile(index)\n      } else if (this.selectedFileCount === 0) {\n        this.selectFile(index)\n      }\n      this.showMenu = true\n    },\n    // 关闭窗口\n    closeMenu () {\n      this.showMenu = false\n      this.showCreateFolder = false\n    },\n\n    // 选择文件\n    selectFile (index) {\n      this.selectFileIndex = index\n      // e.stopImmediatePropagation()\n      if (this.selectAllFiles === true) {\n        this.selectAllFiles = false\n      }\n      if (this.selectedFile[index] == false) {\n        this.selectedFileCount += 1\n        this.selectedFile[index] = true\n        this.$store.commit('updateSelectFileCount', this.selectedFileCount)\n        // 判断是否所有都选则\n        if (\n          this.selectedFile.filter((file) => file == true).length ===\n          this.fileList.length\n        ) {\n          this.selectAllFiles = true\n        } else {\n          this.selectAllFiles = false\n        }\n      } else {\n        this.selectedFileCount -= 1\n        this.selectedFile[index] = false\n        this.$store.commit('updateSelectFileCount', this.selectedFileCount)\n      }\n\n      if (this.selectedFileCount === 1) {\n        this.$store.commit('updateSelectFileIndex', index)\n        // 选中文件为1 且路径为空时\n        if (this.$route.query.filePath === undefined) {\n          this.selectFullPath = '/' + this.fileList[index].fileName\n          this.$store.commit('updateSelectFullPath', this.selectFullPath)\n        } else {\n          // 路径不为空时\n          this.selectFullPath =\n            this.$route.query.filePath + '/' + this.fileList[index].fileName\n          this.$store.commit('updateSelectFullPath', this.selectFullPath)\n        }\n        this.selectFileIndex = this.getSelectedFileIndex(\n          this.selectedFile,\n          true\n        )\n      } else {\n        this.selectFileIndex = -1\n      }\n    },\n    // 获取选中文件索引\n    getSelectedFileIndex (arrays, obj) {\n      var i = arrays.length\n      while (i--) {\n        if (arrays[i] === obj) {\n          return i\n        }\n      }\n      return false\n    },\n    // 选择全部文件\n    selectAll (e) {\n      if (this.selectAllFiles === true) {\n        // 取消选中所有\n        this.selectedFileCount = 0\n        this.$store.commit('updateSelectFileCount', this.fileList.length)\n        this.selectedFile = new Array(this.fileList.length).fill(false)\n      } else {\n        this.selectedFileCount = this.fileList.length\n        this.$store.commit('updateSelectFileCount', this.fileList.length)\n        this.selectedFile = new Array(this.fileList.length).fill(true)\n      }\n      this.selectAllFiles = !this.selectAllFiles\n    },\n    // 点击不同文件实现不同的功能\n    clickActions: function(index, item, e) {\n      console.log('==index:' + index + '==fileName:' + item.fileName)\n      if (item.isDir === 1) {\n        this.currentFile.id = item.id\n        if (this.searchKeyWords !== '') {\n          console.log('搜索进入文件夹')\n          this.$router.push({\n            query: {\n              category: 'all',\n              filePath: item.filePath === '/' ? '/' + item.fileName : item.filePath + '/' + item.fileName\n            }\n          })\n          this.searchKeyWords = ''\n        } else {\n          this.enterFolder(index, '/' + item.fileName)\n        }\n      } else {\n        this.handleFilePreview(index, item, this.fileList)\n      }\n    },\n    /**\n     * 打开目录\n     * @param index 选择的文件索引\n     * @param path 当前选中的文件目录 如根目录下的 '我的音乐'为 '/我的音乐'\n     * @param e 点击事件\n     */\n    enterFolder (index, path) {\n      this.showLoading = true\n      this.selectedFileCount = 0\n      this.selectAllFiles = false\n      var prePath = ''\n      // 在根目录下 目录前缀为 '/',则重置前缀为空,由于参数path是带 '/'的,防止目录多一个'/'\n      if (this.$store.state.fullPath === '/') {\n        prePath = ''\n      } else {\n        prePath = this.$store.state.fullPath\n      }\n      this.fullPath = prePath + path\n      this.currentPath = path\n      // console.log('fullPath:' + this.fullPath)\n      // console.log('currentPath:' + this.currentPath)\n      this.$router.push({\n        path: '/index',\n        query: {\n          category: 'all',\n          filePath: this.fullPath\n        }\n      })\n    },\n    // 复制文件\n    copyFile () {\n      this.$fileSelector({\n        title: '复制文件',\n        userInfo: this.$store.state.userInfo,\n        onlyFolder: true,\n        show: true\n      }).then(res => {\n        console.log('res:', res)\n        if (this.selectedFileCount === 1 && this.fileList[this.selectFileIndex].isDir !== 1) {\n          if (res.filePath == this.fileList[this.selectFileIndex].filePath) {\n            this.$toast.error('不能复制到当前目录')\n            return\n          }\n          const data = {\n            userId: this.getCookies('uid'),\n            filePath: res.filePath,\n            fileId: this.fileList[this.selectFileIndex].id\n          }\n          copyFile(data, true).then((res) => {\n            console.log(res)\n            if (res.code === 0) {\n              this.selectedFile = new Array(this.fileList.length).fill(false)\n              this.$toast.success(res.msg)\n              this.getFileList(this.fullPath, true)\n            } else {\n              this.$toast.error(res.msg)\n            }\n          })\n        } else {\n          if (res.filePath == this.selectFileList[0].filePath) {\n            this.$toast.error('不复制到当前目录')\n            return\n          }\n          const data = {\n            // userId: this.getCookies('uid'),\n            filePath: res.filePath,\n            fileList: this.selectFileList\n          }\n          batchCopyFile(data).then((res) => {\n            if (res.code === 0) {\n              this.getFileList(this.fullPath)\n            } else {\n              this.$toast.error(res.msg)\n            }\n          })\n          console.log('批量复制')\n        }\n      }).catch(err => {\n        console.log(err)\n      })\n\n      // this.$confirmBox({\n      //   title: '复制文件',\n      //   showType: 1\n      // })\n      //   .then(() => {\n      //     console.log('复制文件接口调用')\n      //     if (this.selectedFileCount === 1 && this.fileList[this.selectFileIndex].isDir !== 1) {\n      //       const data = {\n      //         filePath: this.$store.state.copyMovePath,\n      //         fileId: this.fileList[this.selectFileIndex].id\n      //       }\n      //       copyFile(data, true).then((res) => {\n      //         console.log(res)\n      //         if (res.code === 0) {\n      //           this.selectedFile = new Array(this.fileList.length).fill(false)\n      //           this.$toast.success(res.msg)\n      //           this.getFileList(this.fullPath, true)\n      //         } else {\n      //           this.$toast.error(res.msg)\n      //         }\n      //       })\n      //     } else {\n      //       const data = {\n      //         filePath: this.$store.state.copyMovePath,\n      //         fileList: this.selectFileList\n      //       }\n      //       batchCopyFile(data).then((res) => {\n      //         if (res.code === 0) {\n      //           this.getFileList(this.fullPath)\n      //         } else {\n      //           this.$toast.error(res.msg)\n      //         }\n      //       })\n      //       console.log('批量复制')\n      //     }\n      //   })\n      //   .catch(() => {\n      //   })\n    },\n    // 移动文件\n    moveFile () {\n      this.$fileSelector({\n        title: '移动文件',\n        userInfo: this.$store.state.userInfo,\n        onlyFolder: true,\n        show: true\n      }).then(res => {\n        console.log('res:', res)\n        if (this.selectedFileCount === 1 && this.fileList[this.selectFileIndex].isDir !== 1) {\n          // let files\n          // this.fileList.filter((item,index) => item)\n          if (res.filePath == this.fileList[this.selectFileIndex].filePath) {\n            this.$toast.error('不能移动到当前目录')\n            return\n          }\n          const data = {\n            userId: this.getCookies('uid'),\n            fileId: this.fileList[this.selectFileIndex].id,\n            filePath: res.filePath\n          }\n          moveFile(data).then((res) => {\n            console.log(res)\n            if (res.code === 0) {\n              this.getFileList(this.fullPath, true)\n            } else {\n              this.$toast.error(res.msg)\n            }\n          })\n        } else {\n          const data = {\n            // userId: this.getCookies('uid'),\n            filePath: res.filePath,\n            fileList: this.selectFileList\n          }\n          batchMoveFile(data).then((res) => {\n            if (res.code === 0) {\n              this.getFileList(this.fullPath)\n              this.selectedFile.length = 0\n              this.selectedFileCount = 0\n            } else {\n              this.$toast.error(res.msg)\n            }\n          })\n          // 批量移动\n        }\n      }).catch(err => {\n        console.log(err)\n      })\n    },\n    // 重命名文件\n    renameFile () {\n      this.$bus.$emit('sendOperationFile', this.fileList[this.selectFileIndex])\n      this.$store.commit('updateRenameFileName', this.fileList[this.selectFileIndex].fileName)\n      Bus.$emit('fileName', this.fileList[this.selectFileIndex].fileName)\n      this.$confirmBox({\n        title: '重命名文件',\n        showType: 3,\n        file: this.fileList[this.selectFileIndex],\n        operation: 'rename'\n      })\n        .then((res) => {\n          console.log(res)\n          // var fileName = this.fileList[this.selectFileIndex].fileExt !== null\n          //   ? this.$store.state.renameFileName + '.' + this.fileList[this.selectFileIndex].fileExt : this.$store.state.renameFileName\n          if (res.fileName <= 0) {\n            this.$toast.error('文件名不能为空')\n            return\n          }\n          const data = {\n            userId: this.getCookies('uid'),\n            fileId: this.fileList[this.selectFileIndex].id,\n            fileName: res.fileName,\n            filePath: res.filePath,\n            isDir: this.fileList[this.selectFileIndex].isDir\n          }\n          renameFile(data).then((res) => {\n            console.log(res)\n            if (res.code === 0) {\n              this.getFileList(this.fullPath, true)\n              this.$toast.success(res.msg)\n            } else {\n              this.$toast.error(res.msg)\n            }\n          })\n        })\n        .catch(() => {\n        })\n    },\n    // 删除文件 单个\n    deleteFile () {\n      this.$confirmBox({\n        title: '删除文件',\n        msg: '确定删除这' + this.$store.state.selectFileCount + '个项目吗',\n        showType: 0\n      })\n        .then(() => {\n          console.log('确认删除')\n          if (this.selectedFileCount === 1) {\n            const data = {\n              userId: this.getCookies('uid'),\n              id: this.fileList[this.selectFileIndex].id\n            }\n            deleteFile(data).then((res) => {\n              console.log(res)\n              if (res.code === 0) {\n                this.init()\n                this.$store.commit('updateUserStorage', res.data.userStorage)\n                if (this.$route.query.category === 'all') {\n                  this.getFileList(this.fullPath, true)\n                } else {\n                  this.getFileListByType(this.$route.query.category)\n                }\n                this.$toast.success('删除成功')\n              } else {\n                this.$toast.error(res.msg)\n              }\n            })\n          } else {\n            // 批量删除\n            // const data = {\n            //   // this.selectFileIdList\n            //   // filePath: this.filePath,\n            // }\n            batchDeleteFile(this.selectFileIdList).then((res) => {\n              console.log(res)\n              if (res.code === 0) {\n                this.getFileList(this.fullPath, true)\n                this.selectedFile = new Array(this.fileList.length).fill(false)\n                this.$toast.success('删除成功')\n              } else {\n                this.$toast.error(res.msg)\n              }\n            })\n          }\n        })\n        .catch(() => {\n        })\n    },\n    // 分享文件\n    shareFile () {\n      if (this.selectedFileCount > 1) {\n        this.$toast.error('请选择一个文件或文件夹分享')\n        return\n      }\n      this.$confirmBox({\n        title: '分享文件',\n        showType: 4,\n        file: this.fileList[this.selectFileIndex]\n      })\n        .then((p) => {\n          console.log('p.expiredTime' + p.expiredTime)\n          if (this.selectedFileCount === 1) {\n            const data = {\n              id: this.fileList[this.selectFileIndex].id\n            }\n            shareFile(data).then((res) => {\n              console.log(res)\n              if (res.code === 0) {\n                this.getFileList(this.fullPath)\n                this.$toast('分享成功')\n              } else {\n                this.$toast.error(res.msg)\n              }\n            })\n          } else {\n            // 批量分享\n            const data = {\n              fileList: this.selectFileIdList\n            }\n            shareFile(data).then((res) => {\n              console.log(res)\n              if (res.code === 0) {\n                this.getFileList(this.fullPath)\n                this.selectedFile = new Array(this.fileList.length).fill(false)\n                this.$toast.success('分享成功')\n              } else {\n                this.$toast.error(res.msg)\n              }\n            })\n          }\n        })\n        .catch(() => {\n        })\n    },\n    // 文件展示方式\n    selectDisplayMode (mode) {\n      this.showCreateFolder = false\n      if (mode == 'block') {\n        this.displayMode = 'list'\n        window.localStorage.setItem('display', 'list')\n        this.$store.commit('updateDisplayMode', 'list')\n      } else if (mode == 'list') {\n        this.displayMode = 'block'\n        window.localStorage.setItem('display', 'block')\n        this.$store.commit('updateDisplayMode', 'block')\n      }\n    },\n    toolOperation: function(itemMethods) {\n      this[itemMethods]()\n    },\n    fileOption: function(itemMethods) {\n      this[itemMethods]()\n    },\n\n    // 获取文件列表(通过全路径)\n    // async getFileList (path, isRefresh) {\n    //   this.showLoading = true\n    //   this.selectAllFiles = false\n    //   this.fileList.length = 0\n    //   this.sortFileList.length = 0\n    //\n    //   if (path === this.$route.query.filePath) {\n    //     this.selectedFileCount = 0\n    //   }\n    //   const data = {\n    //     filePath: path === '' ? '/' : path,\n    //     refresh: !!isRefresh\n    //   }\n    //   getFileListByPath(data).then((res) => {\n    //     if (res.code === 0) {\n    //       this.init()\n    //       this.fileList = res.data.list\n    //       console.log(JSON.parse(JSON.stringify(res.data.list)))\n    //       // 获取首页图片\n    //       this.imageList = this.fileList.filter(item => item.fileType === 1)\n    //       // 关闭动画\n    //       this.showLoading = false\n    //       this.sortFileList = this.fileList.sort(this.compare('isDir', -1))\n    //       this.$store.commit('updateFileList', this.fileList)\n    //       this.selectedFile = new Array(this.fileList.length).fill(false)\n    //     } else {\n    //       this.showLoading = false\n    //       if (res.code === 401) {\n    //         this.$toast.error(res.msg)\n    //         this.$router.push('/login')\n    //       }\n    //     }\n    //   })\n    // },\n    // 获取文件列表(通过文件分类)\n    async getFileListByType (type) {\n      const data = {\n        fileType: this.$route.query.category,\n        currentPage: this.$store.state.currentPage,\n        pageCount: this.$store.state.pageCount\n      }\n      getFileListByType(data).then((res) => {\n        console.log(res)\n        if (res.code === 0) {\n          this.fileList.length = 0\n          this.sortFileList = 0\n          this.fileList = res.data.list\n          this.sortFileList = res.data.list\n          this.$store.commit('updateFileList', this.fileList)\n          this.selectedFile = new Array(this.fileList.length).fill(false)\n          // this.pageData.total = res.data.total\n          // this.loading = false\n          // 计算总页数\n          // 关闭动画\n          this.showLoading = false\n          if (this.total === 0) {\n            this.total = res.data.total\n            this.pageCount = Math.ceil(this.total / this.$store.state.pageSize)\n            console.log('总页数' + this.pageCount)\n          }\n        } else {\n          this.$toast.error(res.msg)\n          this.showLoading = false\n          this.$toast.error(res.msg)\n        }\n      })\n    },\n    // 创建文件夹\n    createFolder: function() {\n      this.showCreateFolder = true\n      this.createFolderName = ''\n      this.$nextTick(function() {\n        this.$refs.createFolderInput.focus()\n      })\n    },\n    // 创建在线文档\n    createDocument: function() {\n      console.log('创建在线文档')\n      this.$router.push({\n        path: '/excel',\n        query: {\n          create: 'sheet',\n          type: 2\n        }\n      })\n\n      // Vue.prototype.$previewExcel({ fileInfo: 0 })\n    },\n    // 离线下载\n    offlineDownload: function() {\n      const _this = this\n      this.$confirmBox({\n        title: '创建离线下载',\n        showType: 3,\n        operation: 'offlineDownload',\n        yesBtnText: '创建下载任务'\n      })\n        .then((p) => {\n          console.log(p.url)\n          if (!this.checkUrl(p.url)) {\n            this.$toast.error('请输入正确的下载链接')\n            return\n          }\n          _this.remoteTask = new Date().getTime()\n          this.$toast.success('离线下载任务开始...', -1)\n          // 创建离线下载进度更新定时器\n          offlineTimer = setInterval(function() { // 每5秒刷新一次\n            const data = {\n              type: 'remote',\n              url: p.url,\n              t: _this.remoteTask\n            }\n            getProgress(data).then(res => {\n              if (_this.offlineFile.fileName !== undefined) {\n                Bus.$emit('toastMsg', _this.offlineFile.fileName + ' 下载进度: ' + res.data.progress + '%')\n              }\n              // Bus.$emit('updateLoadingText', res.data.progress >= 100 ? '下载完成' : '下载进度: ' + res.data.progress + '%')\n              if (res.data.progress >= 100) {\n                Bus.$emit('toastMsg', _this.offlineFile.fileName + ' 下载完成')\n                clearInterval(offlineTimer)\n                _this.getFileList(this.fullPath)\n              } else if (res.code !== 0) {\n                clearInterval(offlineTimer)\n              }\n            })\n          }, 3000)\n          const data = {\n            url: p.url,\n            t: _this.remoteTask,\n            type: 'remote'\n          }\n          // 创建离线下载任务\n          createOffline(data).then((res) => {\n            console.log(res)\n            if (res.code === 0) {\n              // this.$toast.success(res.msg)\n              this.offlineFile = res.data\n              Bus.$emit('toastMsg', '下载任务: ' + this.offlineFile.fileName + ' 创建成功')\n            } else {\n              this.$toast.error(res.msg)\n            }\n          })\n        })\n        .catch(() => {\n        })\n    },\n    createFolderAction () {\n      // var flag = new RegExp('[`~!@#$^&*()=|{}\\':;\\',\\\\[\\\\].<><>/?~!@#￥……&*()_|{}【】';:\"\"\\'.,、? ]')\n      // var flag = new RegExp('[`~!@#$^&*()=|{}\\':;\\',\\\\[\\\\].<><>/?~!@#￥……&*()_|{}【】';:\"\"\\'.,、? ]')\n      var flag = new RegExp('[`~!@#$^&*()=|{}\\':;\\',\\\\[\\\\].<>《》/?~！@#￥……&*（）——|{}【】‘；：”“\\'。，、？ ]')\n      // 判断文件名是否包含特殊字符\n      if (flag.test(this.createFolderName)) {\n        this.$toast.error('文件夹名称不能包含特殊字符')\n        return\n      }\n      this.fileName = this.trim(this.createFolderName, 'g')\n      if (this.fileName !== '') {\n        const data = {\n          filePath: this.$store.state.fullPath,\n          fileName: this.$refs.createFolderInput.value,\n          parentPathId: this.currentFile.id\n        }\n        createFolder(data).then((res) => {\n          console.log(res)\n          if (res.code === 0) {\n            this.$toast.success('新建文件夹成功')\n            this.showCreateFolder = false\n            this.getFileList(this.fullPath, true)\n          } else {\n            this.$toast.error(res.msg)\n          }\n        })\n      } else {\n        this.$toast.error('文件夹名称不能为空,请输入文件名称')\n      }\n    },\n    uploadMouseover: function() {\n      document.querySelector('.dropdown-list').style.display = ''\n    },\n    uploadMouseout: function() {\n      this.$refs.dropdown.style = 'display:none'\n      // document.querySelector('.dropdown-list').style.display = 'none'\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n\n</style>\n"],"sourceRoot":""}]}